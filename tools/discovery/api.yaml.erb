# Copyright 2017 Google Inc.
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# TODO(nelsonjr): Make all Zone and Region resource ref

--- !ruby/object:Api::Product
name: Google Cloud <%= results['title'] %>
prefix: g<%= results['title'].split[0].downcase %>
versions:
  - !ruby/object:Api::Product::Version
    name: <%= results['version'] %>
    base_url: <%= results['baseUrl'] %>
scopes:
  <% results['auth']['oauth2']['scopes'].each do |scope| -%>
    - <%= scope[0] %>
  <% end -%>
objects:
<% results['schemas'].each do |object| -%>
<%
  object_name = object[0]
  obj = object[1]
-%>
  - !ruby/object:Api::Resource
    name: '<%= object_name %>'
    base_url: projects/{{project}}/serviceAccounts
    description: |
      <%= obj['description'] %>
    properties:
<% (obj['properties'] || []).each do |prop| -%>
<%
  prop_name = prop[0]
  prop_obj = prop[1]
-%>
      - !ruby/object:Api::Type::<%= (prop_obj['type'] || '').capitalize %>
        name: <%= prop_name %>
        description: <%= prop_obj['description'] %>
<% if (prop_obj['description'] || '').include? '[Required]' -%>
        required: true
<% end -%>
<% if (prop_obj['description'] || '').include? 'Output-only' %>
        output: true
<% end -%>
<% end -%>
<% end -%>
