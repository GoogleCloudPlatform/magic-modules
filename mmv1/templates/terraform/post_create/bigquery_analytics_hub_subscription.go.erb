// `name` is autogenerated from the api so needs to be set post-create
subscription, ok := res["subscription"]
if !ok {
	return fmt.Errorf("Create response didn't contain subscription object. Create may not have succeeded.")
}

subscriptionMap := subscription.(map[string]interface{})
name, ok := subscriptionMap["name"].(string)
if !ok {
	return fmt.Errorf("Subscription object didn't contain name. Create may not have succeeded.")
}
if err := d.Set("name", name); err != nil {
	return fmt.Errorf("Error setting name: %s, %s", err, name)
}

if err := d.Set("subscription_id", tpgresource.GetResourceNameFromSelfLink(name)); err != nil {
	return fmt.Errorf("Error setting subscription_id: %s, %s", err, name)
}

// Store the ID now that we have set the computed name
id, err = tpgresource.ReplaceVars(d, config, "{{name}}")
if err != nil {
	return fmt.Errorf("Error constructing id: %s", err)
}
d.SetId(id)
