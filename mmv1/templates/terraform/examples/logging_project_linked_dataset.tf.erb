#resource "google_project" "basic" {
#  project_id = "tf-test%{random_suffix}"
#  name       = "tf-test%{random_suffix}"
#  org_id     = "<%= ctx[:test_env_vars]['org_id'] %>"
#}

resource "google_logging_project_bucket_config" "basic" {
  location         = "global"
#  project          = google_project.basic.project_id
  project          = "<%= ctx[:test_env_vars]['project_name'] %>"
  enable_analytics = true
  bucket_id        = "tftest%{random_suffix}"
}

#resource "google_project_service" "logging" {
##  project = google_project.basic.project_id
#  project = "<%= ctx[:test_env_vars]['project_name'] %>"
#  service = "logging.googleapis.com"
#}

resource "google_logging_project_linked_dataset" "basic" {
  link_id = "tftest%{random_suffix}"
  bucket  = google_logging_project_bucket_config.basic.id
#
#  depends_on = [
#    google_project_service.logging
#  ]
}
