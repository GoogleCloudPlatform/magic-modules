resource "google_storage_bucket" "bucket" {
  name          = "{{index $.Vars "catalog"}}"
  name          = "tf-test-{{index $.Vars "catalog"}}{{index $.Vars "random_suffix"}}"
  location      = "us-central1"
  force_destroy = true
  uniform_bucket_level_access = true
}

resource "google_biglake_iceberg_catalog" "catalog" {
  name = "{{index $.Vars "catalog"}}"
  name = "tf-test-{{index $.Vars "catalog"}}{{index $.Vars "random_suffix"}}"
  catalog_type = "CATALOG_TYPE_GCS_BUCKET"
  depends_on = [
    google_storage_bucket.bucket
  ]
}

resource "google_biglake_iceberg_namespace" "{{$.PrimaryResourceId}}" {
resource "google_biglake_iceberg_namespace" "my_iceberg_namespace" {
  catalog = google_biglake_iceberg_catalog.catalog.name
  namespace = ["{{index $.Vars "name"}}"]
  properties = {
    key = "value"
  }
}
