resource "google_clouddeploy_deploy_policy" "{{$.PrimaryResourceId}}" {
  name     = "{{index $.Vars "policy"}}"
  location = "us-central1"
  selectors {
    delivery_pipeline {
      id = "{{index $.Vars "delivery_pipeline"}}"
    }
  }
  rules {
    rollout_restriction {
      id = "rule"
      time_windows {
        time_zone = "America/Los_Angeles"
        weekly_windows {
            start_time {
                hours = 0
                minutes = 0
            }
            end_time {
                hours = "24"
                minutes = "00"
            }
        }
      }
    }
  }
}
