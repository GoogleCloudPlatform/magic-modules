# todo: create the certificate root authority to avoid internal error
# https://cloudlogging.app.goo.gl/iTqQ74YbhdJJmzsaA
resource "google_privateca_ca_pool" "default" {
  provider  = google-beta
  name      = "<%= ctx[:vars]['privateca_ca_pool_name'] %>"
  location  = "us-central1"
  tier      = "ENTERPRISE"
}

resource "google_network_security_tls_inspection_policy" "<%= ctx[:primary_resource_id] %>" {
  provider = google-beta
  name     = "<%= ctx[:vars]['resource_name'] %>"
  location = "us-central1"
  ca_pool  = google_privateca_ca_pool.default.id
}