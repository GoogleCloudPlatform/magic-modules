resource "google_dataplex_datascan" "<%= ctx[:primary_resource_name] %>" {
  location     = "us-central1"
  data_scan_id = "<%= ctx[:primary_resource_id] %>"

  data {
        resource = "//bigquery.googleapis.com/projects/bigquery-public-data/datasets/samples/tables/shakespeare"
  }

  data_quality_spec {
      rules {
          dimension = "VALIDITY"

          table_condition_expectation {
            sql_expression = "COUNT(*) > 0"
          }
        }
      }


  execution_spec {
    trigger {
              on_demand {}
            }
  }


  project = "<%= ctx[:test_env_vars]['project_name'] %>"
}


