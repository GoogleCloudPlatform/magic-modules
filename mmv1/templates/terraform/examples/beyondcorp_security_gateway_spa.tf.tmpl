resource "google_beyondcorp_security_gateway" "{{$.PrimaryResourceId}}" {
  security_gateway_id = "{{index $.Vars "security_gateway_name"}}"
  display_name = "My SPA Security Gateway resource"
  proxy_protocol_config {
    allowed_client_headers = ["header1", "header2"]
    contextual_headers {
      user_info {
        output_type = "PROTOBUF"
      }
      group_info {
        output_type = "JSON"
      }
      device_info {
        output_type = "NONE"
      }
      output_type = "NONE"
    }
    metadata_headers = {
      metadata-header1 = "value1"
      metadata-header2 = "value2"
    }
    gateway_identity = "RESOURCE_NAME"
    client_ip = true
  }
  service_discovery {
    api_gateway {
      resource_override {
        path = "/api/v1/routes"
       }
    }
  }
}