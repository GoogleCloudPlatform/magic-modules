resource "google_healthcare_pipeline_job" "<%= ctx[:primary_resource_id] %>" {
  name  = "<%= ctx[:vars]['backfill_pipeline_name'] %>"
  location = "us-central1"
  dataset = google_healthcare_dataset.dataset.id
  backfill_pipeline_job {
    mapping_pipeline_job = "${google_healthcare_dataset.dataset.id}/pipelinejobs/<%= ctx[:vars]['mapping_pipeline_name'] %>"
  }      
}

resource "google_healthcare_dataset" "dataset" {
  name     = "<%= ctx[:vars]['dataset_name'] %>"
  location = "us-central1"
}