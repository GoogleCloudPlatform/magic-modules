resource "google_vertex_ai_endpoint" "{{$.PrimaryResourceId}}" {
  name         = "{{$.PrimaryResourceName}}"
  display_name = "sample-endpoint"
  description  = "A sample vertex endpoint"
  location     = "us-central1"
  region       = "us-central1"
  labels       = {
    label-one = "value-one"
  }
  enable_private_service_connect = true
  private_service_connect_config {
    enable_private_service_connect = true
    project_allowlist = [
      "${data.google_project.project.number}"
    ]
    enable_secure_private_service_connect = true
  }

  traffic_split = jsonencode({})

  predict_request_response_logging_config {
    bigquery_destination {
      output_uri = "bq://${data.google_project.project.number}"
    }
    enabled       = true
    sampling_rate = 0.1
  }

  dedicated_endpoint_enabled = true
}

data "google_project" "project" {}
