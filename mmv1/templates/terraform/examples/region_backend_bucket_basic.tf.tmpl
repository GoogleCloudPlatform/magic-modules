resource "google_compute_region_backend_bucket" "{{$.PrimaryResourceId}}" {
  name                  = "{{index $.Vars "backend_bucket_name"}}"
  region                = "{{index $.Vars "region"}}"
  bucket_name           = google_storage_bucket.{{$.PrimaryResourceId}}.name
  description           = "Regional backend bucket example"
  load_balancing_scheme = "INTERNAL_MANAGED"
}

resource "google_storage_bucket" "{{$.PrimaryResourceId}}" {
  name                        = "{{index $.Vars "bucket_name"}}"
  location                    = upper("{{index $.Vars "region"}}")
  force_destroy               = true
  uniform_bucket_level_access = true
}