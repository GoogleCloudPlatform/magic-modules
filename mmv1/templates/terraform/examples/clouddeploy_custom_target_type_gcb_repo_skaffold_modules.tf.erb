resource "google_clouddeploy_custom_target_type" "<%= ctx[:primary_resource_id] %>" {
    location = "us-central1"
    name = "<%= ctx[:vars]['custom_target_type_name'] %>"
    description = "My custom target type"
    custom_actions {
      render_action = "renderAction"
      deploy_action = "deployAction"
      include_skaffold_modules {
        configs = ["my-config"]
        google_cloud_build_repo_v2 {
            projectID = "777"
            region = "us-central1"
            connection = "git"
            repo = "repo"
            path = "configs/skaffold.yaml"
            ref = "main
        }
      }
    }
}
