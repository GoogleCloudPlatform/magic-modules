resource "google_identity_platform_project_default_config" "<%= ctx[:primary_resource_id] %>" {
    sign_in {
        allow_duplicate_emails = true
       
        anonymous {
            enabled = true
        }
       
        email {
            enabled = true
            password_required = false
        }
       
        phone_number {
            enabled = true
            test_phone_numbers = {
                "+11231231234" = "000000"
            }
        }
    }

    blocking_functions {
        triggers {
            "beforeSignIn" = {
                function_uri = "new_uri-before-sign-in"
            }
        }

        forward_inbound_credentials {
            refresh_token = true
            access_token = true
            id_token = true
        }
    }

    quota {
        sign_up_quota_config {
            quota = 1000
        }
    }

    authorized_domains = ["test.domain.com", "new..domain.com"]
}
