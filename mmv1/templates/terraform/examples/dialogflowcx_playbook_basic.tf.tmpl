resource "google_dialogflow_cx_agent" "agent" {
  display_name          = "{{index $.Vars "agent_name"}}"
  location              = "global"
  default_language_code = "en"
  time_zone             = "America/New_York"
  description           = "Example description."
}

resource "google_dialogflow_cx_playbook" "{{$.PrimaryResourceId}}" {
  parent       = google_dialogflow_cx_agent.agent.id
  display_name = "Example Display Name"
  goal         = "Example Goal"
  instruction {
    steps {
      text = "step 1"
      steps = [
        <<EOF
        {
          "text": "step 1 1"
        }
        EOF,
        <<EOF
        {
          "text": "step 1 2",
          "steps": [
            {
              "text": "step 1 2 1"
            },
            {
              "text": "step 1 2 2"
            }
          ]
        }
        EOF,
        <<EOF
        {
          "text": "step 1 3"
        }
        EOF
      ]
    }
    steps {
      text = "step 2"
    }
    steps {
      text = "step 3"
    }
  }
}
