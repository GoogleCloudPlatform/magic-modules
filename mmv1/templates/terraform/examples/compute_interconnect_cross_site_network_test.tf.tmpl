data "google_project" "project" {
  provider = google-beta
}

resource "google_compute_cross_site_network" "example-cross-site-network" {
  name        = "{{index $.Vars "cross_site_network"}}"
  description = "Example cross site network"
  provider    = google-beta
}

resource "google_compute_interconnect" "{{$.PrimaryResourceId}}" {
  name                 = "{{index $.Vars "interconnect_name"}}"
  customer_name        = "{{index $.Vars "customer_name"}}"
  interconnect_type    = "DEDICATED"
  requested_features  = ["CROSS_SITE_NETWORK"]
  provider            = google-beta
  link_type            = "LINK_TYPE_ETHERNET_10G_LR"
  location             = "https://www.googleapis.com/compute/v1/projects/${data.google_project.project.id}/global/interconnectLocations/z2z-us-west8-zone2-tzphxd-z" # Special location only available for Google testing.
  requested_link_count = 1
  description          = "{{index $.Vars "description"}}"
}