resource "google_compute_interconnect_group_create_members" "{{$.PrimaryResourceId}}" {
  intent_mismatch_behavior = "REJECT"
  template_interconnect {
    customer_name = "{{index $.Vars "customer_name"}}"
    link_type = "LINK_TYPE_ETHERNET_10G_LR"
    location = "https://www.googleapis.com/compute/v1/projects/${data.google_project.project.name}/global/interconnectLocations/iad-zone1-1"
    requested_link_count = 1
  }
  
  interconnects = [
    {
      name = "{{index $.Vars "interconnect_name"}}-a"
    },
    {
      name = "{{index $.Vars "interconnect_name"}}-b"
    }
  ]
}

resource "google_compute_interconnect_group" "foobar" {
  name   = "{{index $.Vars "interconnect_group_name"}}"
  intent = "NO_SLA"
}
