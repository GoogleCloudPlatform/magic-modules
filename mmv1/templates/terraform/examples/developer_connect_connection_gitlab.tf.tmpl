resource "google_developer_connect_connection" "{{$.PrimaryResourceId}}" {
  location = "us-central1"
  connection_id = "{{index $.Vars "connection_name"}}"

  gitlab_config {
    webhook_secret_secret_version = "{{index $.Vars "webhook_version"}}"
    
    read_authorizer_credential {
      user_token_secret_version = "{{index $.Vars "read_cred"}}"
    }
    
    authorizer_credential {
      user_token_secret_version = "{{index $.Vars "auth_cred"}}"
    }
  }
}
