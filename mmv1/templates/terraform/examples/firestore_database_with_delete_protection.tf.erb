resource "google_firestore_database" "<%= ctx[:primary_resource_id] %>" {
  project                           = google_project.project.project_id
  name                              = "my-database"
  location_id                       = "nam5"
  type                              = "FIRESTORE_NATIVE"

  # Prevents accidental deletion of the database.
  # To delete the database, first set this field to `DELETE_PROTECTION_DISABLED`, apply the changes.
  # Then delete the database resource and apply the changes again.
  delete_protection_state           = "DELETE_PROTECTION_ENABLED"

  # Enables deletion of the database on destory.
  # By default the database is just abandoned and not deleted on destroy.
  deletion_policy = "DELETE"

  depends_on = [google_project_service.firestore]
}
