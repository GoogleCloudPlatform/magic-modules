{{- if ne $.TargetVersionName "ga" }}
config := meta.(*transport_tpg.Config)
userAgent, err := tpgresource.GenerateUserAgentString(d, config.UserAgent)
if err != nil {
	return nil, err
}

project, err := tpgresource.GetProject(d, config)
if err != nil {
	return nil, fmt.Errorf("Error fetching project for Instance: %s", err)
}

if d.HasChange("pause_replication") {
		obj := make(map[string]interface{})
		endpoint := ""

		pauseReplicationProp, err := expandFilestoreInstancePauseReplication(d.Get("pause_replication"), d, config)
		if err != nil {
			return nil, err
		} else if v, ok := d.GetOkExists("pause_replication"); !tpgresource.IsEmptyValue(reflect.ValueOf(v)) && (ok || !reflect.DeepEqual(v, pauseReplicationProp)) {
			obj["pauseReplication"] = pauseReplicationProp
		}

		if d.Get("pause_replication") == true {
			endpoint = "pauseReplica"

		} else if d.Get("pause_replication") == false {
			endpoint = "resumeReplica"
		} else {
			endpoint = "resumeReplica"
		}
	    url, err := tpgresource.ReplaceVars(d, config,  fmt.Sprintf("{{"{{"}}{{$.ProductMetadata.Name}}BasePath{{"}}"}}{{$.SelfLinkUri}}:%s",endpoint))

		if err != nil {
			return nil, err
		}

		headers := make(http.Header)
		
	   // err == nil indicates that the billing_project value was found

		emptyReqBody := make(map[string]interface{})

		res, err := transport_tpg.SendRequest(transport_tpg.SendRequestOptions{
			Config:    config,
			Method:    "POST",
			Project:   project,
			RawURL:    url,
			UserAgent: userAgent,
			Body:      emptyReqBody,
			Timeout:   d.Timeout(schema.TimeoutUpdate),
			Headers:   headers,
		})
		if err != nil {
			return nil, fmt.Errorf("Error Pausing/Resuming Instance %q: %s", d.Id(), err)
		} else {
			log.Printf("[DEBUG] Finished Pausing/Resuming Instance %q: %#v", d.Id(), res)
		}

		err = FilestoreOperationWaitTime(
			config, res, project, "Pausing/Resuming Instance", userAgent,
			d.Timeout(schema.TimeoutUpdate))
		if err != nil {
			return nil, err
		}

	}
{{- end }}
return obj, nil