resource "google_compute_subnetwork" "{{$.PrimaryResourceId}}" {
  name             = "{{index $.PrefixedVars "subnetwork_name"}}"
  region           = "us-central1"
  network          = google_compute_network.custom-test-network.id
  stack_type       = "IPV6_ONLY"
  ipv6_access_type = "EXTERNAL"
  ip_collection    = "{{index $.PrefixedVars "ip_collection_url"}}"
}

resource "google_compute_network" "custom-test-network" {
  name                    = "{{index $.PrefixedVars "network_name"}}"
  auto_create_subnetworks = false
}