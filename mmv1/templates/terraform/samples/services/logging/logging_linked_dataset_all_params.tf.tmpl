resource "google_logging_project_bucket_config" "{{$.PrimaryResourceId}}" {
  location         = "global"
  project          = "{{index $.TestEnvVars "project"}}"
  enable_analytics = true
  bucket_id        = "{{index $.PrefixedVars "bucket_id"}}"
}

resource "google_logging_linked_dataset" "{{$.PrimaryResourceId}}" {
  link_id     = "{{index $.PrefixedVars "link_id"}}"
  bucket      = "{{index $.PrefixedVars "bucket_id"}}"
  parent      = "projects/{{index $.TestEnvVars "project"}}"
  location    = "global"
  description = "Linked dataset test"

  depends_on = ["google_logging_project_bucket_config.{{$.PrimaryResourceId}}"]
}
