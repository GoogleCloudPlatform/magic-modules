<%- # the license inside this block applies to this file
        # Copyright 2023 Google Inc.
        # Licensed under the Apache License, Version 2.0 (the "License");
        # you may not use this file except in compliance with the License.
        # You may obtain a copy of the License at
        #
        #     http://www.apache.org/licenses/LICENSE-2.0
        #
        # Unless required by applicable law or agreed to in writing, software
        # distributed under the License is distributed on an "AS IS" BASIS,
        # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
        # See the License for the specific language governing permissions and
        # limitations under the License.
-%>
// Extract any empty fields from the bucket field.
parent := d.Get("parent").(string)
longBucket := d.Get("bucket").(string)
parent, err = ExtractFieldByPattern("parent", parent, longBucket, "((projects|folders|organizations|billingAccounts)/[a-z0-9A-Z-]*)/locations/.*")
if err != nil {
	return err
}
d.Set("parent", parent)
location := d.Get("location").(string)
location, err = ExtractFieldByPattern("location", location, longBucket, "[a-zA-Z]*/[a-z0-9A-Z-]*/locations/([a-z0-9-]*)/buckets/.*")
if err != nil {
	return err
}
shortBucket := GetResourceNameFromSelfLink(longBucket)
name := GetResourceNameFromSelfLink(d.Get("name").(string))
// Set all the other fields to their short forms before forming url and setting ID.
d.Set("location", location)
d.Set("bucket", shortBucket)
d.Set("name", name)
// Set URL using custom formatting (allowing forward slash in parent).
url = fmt.Sprintf("%s%s/locations/%s/buckets/%s/views?viewId=%s", config.LoggingBasePath, parent, location, shortBucket, name)
