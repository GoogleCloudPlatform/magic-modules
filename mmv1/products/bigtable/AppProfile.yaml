<<<<<<< HEAD
# Copyright 2023 Google Inc.
=======
# Copyright 2024 Google Inc.
>>>>>>> 2fdda66097e2c96688e59f7c58c1f717c7785856
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

<<<<<<< HEAD
--- !ruby/object:Api::Resource
name: 'AppProfile'
kind: 'bigtable#appProfile'
base_url: projects/{{project}}/instances/{{instance}}/appProfiles?appProfileId={{app_profile_id}}
create_url: projects/{{project}}/instances/{{instance}}/appProfiles?appProfileId={{app_profile_id}}&ignoreWarnings={{ignore_warnings}}
delete_url: projects/{{project}}/instances/{{instance}}/appProfiles/{{app_profile_id}}?ignoreWarnings={{ignore_warnings}}
update_url: projects/{{project}}/instances/{{instance}}/appProfiles/{{app_profile_id}}?ignoreWarnings={{ignore_warnings}}
update_verb: :PATCH
update_mask: true
self_link: 'projects/{{project}}/instances/{{instance}}/appProfiles/{{app_profile_id}}'
description: |
  App profile is a configuration object describing how Cloud Bigtable should treat traffic from a particular end user application.
references: !ruby/object:Api::Resource::ReferenceLinks
  api: 'https://cloud.google.com/bigtable/docs/reference/admin/rest/v2/projects.instances.appProfiles'
id_format: 'projects/{{project}}/instances/{{instance}}/appProfiles/{{app_profile_id}}'
import_format:
  ['projects/{{project}}/instances/{{instance}}/appProfiles/{{app_profile_id}}']
skip_sweeper: true
examples:
  - !ruby/object:Provider::Terraform::Examples
    name: 'bigtable_app_profile_anycluster'
=======
---
name: 'AppProfile'
kind: 'bigtable#appProfile'
description: |
  App profile is a configuration object describing how Cloud Bigtable should treat traffic from a particular end user application.
references:
  guides:
  api: 'https://cloud.google.com/bigtable/docs/reference/admin/rest/v2/projects.instances.appProfiles'
docs:
id_format: 'projects/{{project}}/instances/{{instance}}/appProfiles/{{app_profile_id}}'
base_url: 'projects/{{project}}/instances/{{instance}}/appProfiles?appProfileId={{app_profile_id}}'
self_link: 'projects/{{project}}/instances/{{instance}}/appProfiles/{{app_profile_id}}'
create_url: 'projects/{{project}}/instances/{{instance}}/appProfiles?appProfileId={{app_profile_id}}&ignoreWarnings={{ignore_warnings}}'
update_url: 'projects/{{project}}/instances/{{instance}}/appProfiles/{{app_profile_id}}?ignoreWarnings={{ignore_warnings}}'
update_verb: 'PATCH'
update_mask: true
delete_url: 'projects/{{project}}/instances/{{instance}}/appProfiles/{{app_profile_id}}?ignoreWarnings={{ignore_warnings}}'
import_format:
  - 'projects/{{project}}/instances/{{instance}}/appProfiles/{{app_profile_id}}'
timeouts:
  insert_minutes: 20
  update_minutes: 20
  delete_minutes: 20
custom_code:
  extra_schema_entry: 'templates/terraform/extra_schema_entry/bigtable_app_profile.go.tmpl'
  encoder: 'templates/terraform/encoders/bigtable_app_profile.go.tmpl'
  pre_update: 'templates/terraform/pre_update/bigtable_app_profile.go.tmpl'
exclude_sweeper: true
examples:
  - name: 'bigtable_app_profile_anycluster'
>>>>>>> 2fdda66097e2c96688e59f7c58c1f717c7785856
    primary_resource_id: 'ap'
    vars:
      instance_name: 'bt-instance'
      app_profile_name: 'bt-profile'
      deletion_protection: 'true'
    test_vars_overrides:
<<<<<<< HEAD
      deletion_protection: 'false'
    oics_vars_overrides:
      deletion_protection: 'false'
=======
      'deletion_protection': 'false'
    oics_vars_overrides:
      'deletion_protection': 'false'
>>>>>>> 2fdda66097e2c96688e59f7c58c1f717c7785856
    ignore_read_extra:
      - 'ignore_warnings'
    # bigtable instance does not use the shared HTTP client, this test creates an instance
    skip_vcr: true
<<<<<<< HEAD
  - !ruby/object:Provider::Terraform::Examples
    name: 'bigtable_app_profile_singlecluster'
=======
  - name: 'bigtable_app_profile_singlecluster'
>>>>>>> 2fdda66097e2c96688e59f7c58c1f717c7785856
    primary_resource_id: 'ap'
    vars:
      instance_name: 'bt-instance'
      app_profile_name: 'bt-profile'
      deletion_protection: 'true'
    test_vars_overrides:
<<<<<<< HEAD
      deletion_protection: 'false'
    oics_vars_overrides:
      deletion_protection: 'false'
=======
      'deletion_protection': 'false'
    oics_vars_overrides:
      'deletion_protection': 'false'
>>>>>>> 2fdda66097e2c96688e59f7c58c1f717c7785856
    ignore_read_extra:
      - 'ignore_warnings'
    # bigtable instance does not use the shared HTTP client, this test creates an instance
    skip_vcr: true
<<<<<<< HEAD
  - !ruby/object:Provider::Terraform::Examples
    name: 'bigtable_app_profile_multicluster'
=======
  - name: 'bigtable_app_profile_multicluster'
>>>>>>> 2fdda66097e2c96688e59f7c58c1f717c7785856
    primary_resource_id: 'ap'
    vars:
      instance_name: 'bt-instance'
      app_profile_name: 'bt-profile'
      deletion_protection: 'true'
    test_vars_overrides:
<<<<<<< HEAD
      deletion_protection: 'false'
    oics_vars_overrides:
      deletion_protection: 'false'
=======
      'deletion_protection': 'false'
    oics_vars_overrides:
      'deletion_protection': 'false'
>>>>>>> 2fdda66097e2c96688e59f7c58c1f717c7785856
    ignore_read_extra:
      - 'ignore_warnings'
    # bigtable instance does not use the shared HTTP client, this test creates an instance
    skip_vcr: true
<<<<<<< HEAD
  - !ruby/object:Provider::Terraform::Examples
    name: 'bigtable_app_profile_priority'
=======
  - name: 'bigtable_app_profile_priority'
>>>>>>> 2fdda66097e2c96688e59f7c58c1f717c7785856
    primary_resource_id: 'ap'
    vars:
      instance_name: 'bt-instance'
      app_profile_name: 'bt-profile'
      deletion_protection: 'true'
    test_vars_overrides:
<<<<<<< HEAD
      deletion_protection: 'false'
    oics_vars_overrides:
      deletion_protection: 'false'
=======
      'deletion_protection': 'false'
    oics_vars_overrides:
      'deletion_protection': 'false'
>>>>>>> 2fdda66097e2c96688e59f7c58c1f717c7785856
    ignore_read_extra:
      - 'ignore_warnings'
    # bigtable instance does not use the shared HTTP client, this test creates an instance
    skip_vcr: true
<<<<<<< HEAD
custom_code: !ruby/object:Provider::Terraform::CustomCode
  encoder: templates/terraform/encoders/bigtable_app_profile.go.erb
  extra_schema_entry: templates/terraform/extra_schema_entry/bigtable_app_profile.go.erb
  pre_update: templates/terraform/pre_update/bigtable_app_profile.go.erb

parameters:
  - !ruby/object:Api::Type::String
    name: 'appProfileId'
    description:
      'The unique name of the app profile in the form
      `[_a-zA-Z0-9][-_.a-zA-Z0-9]*`.'
    required: true
    immutable: true
    url_param_only: true
  - !ruby/object:Api::Type::String
    name: 'instance'
    description: 'The name of the instance to create the app profile within.'
    immutable: true
    url_param_only: true
    diff_suppress_func: tpgresource.CompareResourceNames
  - !ruby/object:Api::Type::Boolean
    name: 'ignoreWarnings'
    description:
      'If true, ignore safety checks when deleting/updating the app profile.'
    default_value: false
    url_param_only: true
properties:
  - !ruby/object:Api::Type::String
    name: 'name'
=======
parameters:
  - name: 'appProfileId'
    type: String
    description:
      'The unique name of the app profile in the form
      `[_a-zA-Z0-9][-_.a-zA-Z0-9]*`.'
    url_param_only: true
    required: true
    immutable: true
  - name: 'instance'
    type: String
    description: 'The name of the instance to create the app profile within.'
    url_param_only: true
    immutable: true
    diff_suppress_func: 'tpgresource.CompareResourceNames'
  - name: 'ignoreWarnings'
    type: Boolean
    description:
      'If true, ignore safety checks when deleting/updating the app profile.'
    url_param_only: true
    default_value: false
properties:
  - name: 'name'
    type: String
>>>>>>> 2fdda66097e2c96688e59f7c58c1f717c7785856
    description:
      'The unique name of the requested app profile. Values are of the form
      `projects/<project>/instances/<instance>/appProfiles/<appProfileId>`.'
    output: true
<<<<<<< HEAD
  - !ruby/object:Api::Type::String
    name: 'description'
    description: |
      Long form description of the use case for this app profile.
  - !ruby/object:Api::Type::Boolean
    name: 'multiClusterRoutingUseAny'
    exactly_one_of:
      - single_cluster_routing
      - multi_cluster_routing_use_any
=======
  - name: 'description'
    type: String
    description: |
      Long form description of the use case for this app profile.
  - name: 'multiClusterRoutingUseAny'
    type: Boolean
>>>>>>> 2fdda66097e2c96688e59f7c58c1f717c7785856
    description: |
      If true, read/write requests are routed to the nearest cluster in the instance, and will fail over to the nearest cluster that is available
      in the event of transient errors or delays. Clusters in a region are considered equidistant. Choosing this option sacrifices read-your-writes
      consistency to improve availability.
<<<<<<< HEAD
    custom_expand: 'templates/terraform/custom_expand/bigtable_app_profile_routing.erb'
    custom_flatten: 'templates/terraform/custom_flatten/bigtable_app_profile_routing.erb'
  - !ruby/object:Api::Type::NestedObject
    name: 'singleClusterRouting'
    exactly_one_of:
      - single_cluster_routing
      - multi_cluster_routing_use_any
    description: |
      Use a single-cluster routing policy.
    properties:
      - !ruby/object:Api::Type::String
        name: 'clusterId'
        required: true
        description: |
          The cluster to which read/write requests should be routed.
      - !ruby/object:Api::Type::Boolean
        name: 'allowTransactionalWrites'
        description: |
          If true, CheckAndMutateRow and ReadModifyWriteRow requests are allowed by this app profile.
          It is unsafe to send these requests to the same table/row/column in multiple clusters.
  - !ruby/object:Api::Type::NestedObject
    name: 'standardIsolation'
    default_from_api: true
    description: |
      The standard options used for isolating this app profile's traffic from other use cases.
    conflicts:
      - data_boost_isolation_read_only
    properties:
      - !ruby/object:Api::Type::Enum
        name: 'priority'
        required: true
        description: |
          The priority of requests sent using this app profile.
        values:
          - :PRIORITY_LOW
          - :PRIORITY_MEDIUM
          - :PRIORITY_HIGH
  - !ruby/object:Api::Type::NestedObject
    name: 'dataBoostIsolationReadOnly'
=======
    exactly_one_of:
      - 'single_cluster_routing'
      - 'multi_cluster_routing_use_any'
    custom_flatten: 'templates/terraform/custom_flatten/bigtable_app_profile_routing.tmpl'
    custom_expand: 'templates/terraform/custom_expand/bigtable_app_profile_routing.tmpl'
  - name: 'singleClusterRouting'
    type: NestedObject
    description: |
      Use a single-cluster routing policy.
    exactly_one_of:
      - 'single_cluster_routing'
      - 'multi_cluster_routing_use_any'
    properties:
      - name: 'clusterId'
        type: String
        description: |
          The cluster to which read/write requests should be routed.
        required: true
      - name: 'allowTransactionalWrites'
        type: Boolean
        description: |
          If true, CheckAndMutateRow and ReadModifyWriteRow requests are allowed by this app profile.
          It is unsafe to send these requests to the same table/row/column in multiple clusters.
  - name: 'standardIsolation'
    type: NestedObject
    description: |
      The standard options used for isolating this app profile's traffic from other use cases.
    default_from_api: true
    conflicts:
      - data_boost_isolation_read_only
    properties:
      - name: 'priority'
        type: Enum
        description: |
          The priority of requests sent using this app profile.
        required: true
        enum_values:
          - 'PRIORITY_LOW'
          - 'PRIORITY_MEDIUM'
          - 'PRIORITY_HIGH'
  - name: 'dataBoostIsolationReadOnly'
    type: NestedObject
>>>>>>> 2fdda66097e2c96688e59f7c58c1f717c7785856
    description: |
      Specifies that this app profile is intended for read-only usage via the Data Boost feature.
    conflicts:
      - standard_isolation
    properties:
<<<<<<< HEAD
      - !ruby/object:Api::Type::Enum
        name: 'computeBillingOwner'
        required: true
        description: |
          The Compute Billing Owner for this Data Boost App Profile.
        values:
          - :HOST_PAYS
=======
      - name: 'computeBillingOwner'
        type: Enum
        description: |
          The Compute Billing Owner for this Data Boost App Profile.
        required: true
        enum_values:
          - 'HOST_PAYS'
>>>>>>> 2fdda66097e2c96688e59f7c58c1f717c7785856
