# Copyright 2023 Google Inc.
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

--- !ruby/object:Api::Resource
    name: 'EnvKeystoreAliasesSelfSigned'
    base_url: '{{keystore_id}}/aliases/{{alias}}'
    create_url: '{{keystore_id}}/aliases?alias={{alias}}&format={{format}}'
    self_link: '{{keystore_id}}/aliases/{{alias}}'
    delete_url: '{{keystore_id}}/aliases/{{alias}}'
    input: true 
    description: |
      An Environment Alias in Apigee
    parameters: 
      - !ruby/object:Api::Type::String
        name: 'orgId'
        description: |
          The Apigee environment group associated with the Apigee environment,
          in the format `organizations/{{org_name}}/environments/{{env_name}}`.
        input: true
        url_param_only: true
      - !ruby/object:Api::Type::String
        name: 'keystoreId'
        description: |
          The Apigee environment group associated with the Apigee environment,
          in the format `organizations/{{org_name}}/environments/{{env_name}}`.
        required: true
        input: true
        url_param_only: true
      - !ruby/object:Api::Type::String
        name: 'alias'
        input: true
        description: |
          Alias for the key/certificate pair. Values must match the regular expression [\w\s-.]{1,255}. 
          This must be provided for all formats except selfsignedcert; self-signed certs may specify the alias in either 
          this parameter or the JSON body.
      - !ruby/object:Api::Type::String
        name: 'format'
        input: true
        required: true
        url_param_only: true
        description: | 
          Required. Format of the data. Valid values include: selfsignedcert, keycertfile, or pkcs12
    properties:
      - !ruby/object:Api::Type::NestedObject
        name: 'subjectAlternativeDnsNames'
        description: |
          List of alternative host names. Maximum length is 255 characters for each value.
        properties:
          - !ruby/object:Api::Type::String
            name: 'subjectAlternativeName'
            description: Subject Alternative Name
      - !ruby/object:Api::Type::Integer
        name: 'keySize'
        description: |
          Key size. Default and maximum value is 2048 bits.
      - !ruby/object:Api::Type::String
        name: 'sigAlg'
        description: |
          Signature algorithm to generate private key. Valid values are SHA512withRSA, SHA384withRSA, and SHA256withRSA 
      - !ruby/object:Api::Type::NestedObject
        name: subject
        description: Subject details.
        properties:
          - !ruby/object:Api::Type::String
            name: 'countryCode'
            description: Two-letter country code. Example, IN for India, US for United States of America.
          - !ruby/object:Api::Type::String
            name: 'state'
            description: State or district name. Maximum length is 128 characters.
          - !ruby/object:Api::Type::String
            name: 'locality'
            description: City or town name. Maximum length is 128 characters.
          - !ruby/object:Api::Type::String
            name: 'org'
            description: Organization name. Maximum length is 64 characters.
          - !ruby/object:Api::Type::String
            name: 'orgUnit'
            description: Organization team name. Maximum length is 64 characters.
          - !ruby/object:Api::Type::String
            name: 'commonName'
            description: | 
                Common name of the organization. Maximum length is 64 characters.
          - !ruby/object:Api::Type::String
            name: 'email'
            description: Email address. Max 255 characters.
      - !ruby/object:Api::Type::Integer
        name: certValidityInDays
        description: |
          Validity duration of certificate, in days. Accepts positive non-zero value. Defaults to 365.
    references: !ruby/object:Api::Resource::ReferenceLinks
      guides:
        'Creating an environment':
          'https://cloud.google.com/apigee/docs/api-platform/get-started/create-environment'
      api: 'https://cloud.google.com/apigee/docs/reference/apis/apigee/rest/v1/organizations.environments.keystores/create'