# Copyright 2025 Google Inc.
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
---
name: Deployment
description: Description
base_url: projects/{{project}}/locations/{{location}}/apps/{{app}}/deployments
update_mask: true
self_link: projects/{{project}}/locations/{{location}}/apps/{{app}}/deployments/{{name}}
create_url: projects/{{project}}/locations/{{location}}/apps/{{app}}/deployments
update_verb: PATCH
id_format: projects/{{project}}/locations/{{location}}/apps/{{app}}/deployments/{{name}}
import_format:
  - projects/{{project}}/locations/{{location}}/apps/{{app}}/deployments/{{name}}
examples:
  - name: "ces_deployment_basic"
    primary_resource_id: "my-deployment"
    vars:
      deployment_display_name: 'my-deployment'
      app_display_name: 'my-app'
      app_id: 'app-id'
autogen_status: RGVwbG95bWVudA==
parameters:
  - name: location
    type: String
    description: Resource ID segment making up resource `name`. It identifies the resource within its parent collection as described in https://google.aip.dev/122.
    immutable: true
    url_param_only: true
    required: true
  - name: app
    type: String
    description: Resource ID segment making up resource `name`. It identifies the resource within its parent collection as described in https://google.aip.dev/122.
    immutable: true
    url_param_only: true
    required: true
properties:
  - name: appVersion
    type: String
    description: |-
      The resource name of the app version to deploy.
      Format:
      projects/{project}/locations/{location}/apps/{app}/versions/{version}
    required: true
    ignore_read: true
  - name: channelProfile
    type: NestedObject
    description: |-
      A ChannelProfile configures the agent's behavior for a specific communication
      channel, such as web UI or telephony.
    required: true
    properties:
      - name: channelType
        type: String
        description: |-
          The type of the channel profile.
          Possible values:
          UNKNOWN
          WEB_UI
          API
          TWILIO
          GOOGLE_TELEPHONY_PLATFORM
          CONTACT_CENTER_AS_A_SERVICE
      - name: disableBargeInControl
        type: Boolean
        description: |-
          Whether to disable user barge-in control in the conversation.
          - **true**: User interruptions are disabled while the agent is speaking.
          - **false**: The agent retains automatic control over when the user can
          interrupt.
      - name: disableDtmf
        type: Boolean
        description: Whether to disable DTMF (dual-tone multi-frequency).
      - name: personaProperty
        type: NestedObject
        description: Represents the persona property of a channel.
        properties:
          - name: persona
            type: String
            description: |-
              The persona of the channel.
              Possible values:
              UNKNOWN
              CONCISE
              CHATTY
      - name: profileId
        type: String
        description: The unique identifier of the channel profile.
      - name: webWidgetConfig
        type: NestedObject
        description: Message for configuration for the web widget.
        properties:
          - name: modality
            type: String
            description: |-
              The modality of the web widget.
              Possible values:
              UNKNOWN_MODALITY
              CHAT_AND_VOICE
              VOICE_ONLY
              CHAT_ONLY
          - name: theme
            type: String
            description: |-
              The theme of the web widget.
              Possible values:
              UNKNOWN_THEME
              LIGHT
              DARK
          - name: webWidgetTitle
            type: String
            description: The title of the web widget.
  - name: createTime
    type: String
    description: Timestamp when this deployment was created.
    output: true
  - name: displayName
    type: String
    description: Display name of the deployment.
    required: true
  - name: etag
    type: String
    description: |-
      Etag used to ensure the object hasn't changed during a read-modify-write
      operation. If the etag is empty, the update will overwrite any concurrent
      changes.
    output: true
  - name: name
    type: String
    description: |-
      Identifier. The resource name of the deployment.
      Format:
      projects/{project}/locations/{location}/apps/{app}/deployments/{deployment}
    output: true
    custom_flatten: 'templates/terraform/custom_flatten/name_from_self_link.tmpl'
  - name: updateTime
    type: String
    description: Timestamp when this deployment was last updated.
    output: true
