--- !ruby/object:Api::Resource
base_url: projects/{{project}}/locations/{{location}}/backupVaults
create_url: projects/{{project}}/locations/{{location}}/backupVaults?backupVaultId={{backup_vault_id}}
self_link: projects/{{project}}/locations/{{location}}/backupVaults/{{backup_vault_id}}
id_format: projects/{{project}}/locations/{{location}}/backupVaults/{{backup_vault_id}}
import_format:
  - projects/{{project}}/locations/{{location}}/backupVaults/{{backup_vault_id}}
name: BackupVault
description: Container to store and organize immutable backups.
autogen_async: true
examples:
  - !ruby/object:Provider::Terraform::Examples
    min_version: beta
    name: 'backup_dr_backup_vault_basic'
    primary_resource_id: 'backup-vault-test'
    vars:
      backup_vault_id: 'tf-test-backup-vault-test%{random_suffix}'
    test_env_vars:
      project: :PROJECT_NAME
  - !ruby/object:Provider::Terraform::Examples
    min_version: beta
    name: 'backup_dr_backup_vault_full'
    primary_resource_id: 'backup-vault-test2'
    vars:
      backup_vault_id: 'tf-test2-backup-vault-test%{random_suffix}%{random_suffix}'
      effective_time: "%{calculated_effective_time}" 
    test_env_vars:
      project: :PROJECT_NAME
properties:
  - !ruby/object:Api::Type::String
    name: name
    description: 'Output only. Identifier. The resource name. '
    output: true
  - !ruby/object:Api::Type::String
    name: description
    description: 'Optional. The description of the BackupVault instance (2048 characters
      or less). '
  - !ruby/object:Api::Type::KeyValueLabels
    name: labels
    output:
    api_name:
    description: "Optional. Resource labels to represent user provided metadata.\nNo
      labels currently defined: "
    min_version:
    ignore_write:
    update_verb:
    update_url:
    immutable:
  - !ruby/object:Api::Type::String
    name: createTime
    description: 'Output only. The time when the instance was created. '
    output: true
  - !ruby/object:Api::Type::String
    name: updateTime
    description: 'Output only. The time when the instance was updated. '
    output: true
  - !ruby/object:Api::Type::String
    name: backupMinimumEnforcedRetentionDuration
    description: "Required. The default and minimum enforced retention for each backup
      within the\nbackup vault.  The enforced retention for each backup can be extended. "
    required: true
  - !ruby/object:Api::Type::Boolean
    name: deletable
    description: 'Output only. Set to true when there are no backups nested under this
      resource. '
    output: true
  - !ruby/object:Api::Type::String
    name: etag
    output: true
    description: "Optional. Server specified ETag for the backup vault resource to\nprevent
      simultaneous updates from overwiting each other. "
  - !ruby/object:Api::Type::String
    name: state
    description: "Output only. The BackupVault resource instance state. \n Possible
      values:\n STATE_UNSPECIFIED\nCREATING\nACTIVE\nDELETING\nERROR"
    output: true
  - !ruby/object:Api::Type::String
    name: effectiveTime
    description: 'Optional. Time after which the BackupVault resource is locked. '
  - !ruby/object:Api::Type::String
    name: backupCount
    description: 'Output only. The number of backups in this backup vault. '
    output: true
  - !ruby/object:Api::Type::String
    name: serviceAccount
    description: "Output only. Service account used by the BackupVault Service for this
      BackupVault.  The\nuser should grant this account permissions in their workload
      project to\nenable the service to run backups and restores there. "
    output: true
  - !ruby/object:Api::Type::String
    name: totalStoredBytes
    description: 'Output only. Total size of the storage used by all backup resources. '
    output: true
  - !ruby/object:Api::Type::String
    name: uid
    description: "Output only. Output only\nImmutable after resource creation until
      resource deletion. "
    output: true
  - !ruby/object:Api::Type::KeyValueAnnotations
    name: annotations
    output:
    api_name:
    description: "Optional. User annotations. See https://google.aip.dev/128#annotations\nStores
      small amounts of arbitrary data. "
    min_version:
    ignore_write:
    update_verb:
    update_url:
    immutable:
parameters:
  - !ruby/object:Api::Type::String
    name: location
    description: " "
    url_param_only: true
    required: true
    immutable: true
  - !ruby/object:Api::Type::String
    name: backupVaultId
    description: "Required. ID of the requesting object\nIf auto-generating ID server-side,
      remove this field and\nbackup_vault_id from the method_signature of Create RPC "
    url_param_only: true
    required: true
    immutable: true
async: !ruby/object:Api::OpAsync
  operation: !ruby/object:Api::OpAsync::Operation
    path: name
    base_url: "{{op_id}}"
    wait_ms: 1000
    timeouts:
  result: !ruby/object:Api::OpAsync::Result
    path: response
    resource_inside_response: true
  status: !ruby/object:Api::OpAsync::Status
    path: done
    complete: true
    allowed:
      - true
      - false
  error: !ruby/object:Api::OpAsync::Error
    path: error
    message: message
update_verb: :PATCH
update_mask: true
