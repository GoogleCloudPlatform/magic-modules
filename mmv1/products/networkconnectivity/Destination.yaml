# Copyright 2025 Google Inc.
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

---
name: 'Destination'
description: |
  'Manage Multicloud Data Transfer Destinations'
references:
  guides:
    'QUICKSTART_TITLE': 'https://docs.cloud.google.com/data-transfer-essentials/docs/create-resources'
  api: 'https://docs.cloud.google.com/network-connectivity/docs/reference/networkconnectivity/rest/v1/projects.locations.multicloudDataTransferConfigs.destinations'

base_url: 'projects/{{project}}/locations/{{location}}/multicloudDataTransferConfigs/{{multicloud_data_transfer_config}}/destinations'
self_link: 'projects/{{project}}/locations/{{location}}/multicloudDataTransferConfigs/{{multicloud_data_transfer_config}}/destinations/{{name}}'

create_url: 'projects/{{project}}/locations/{{location}}/multicloudDataTransferConfigs/{{multicloud_data_transfer_config}}/destinations?destination_id={{name}}'

update_verb: 'PATCH'
update_mask: true

autogen_async: true

async:
  operation:
    base_url: '{{op_id}}'

examples:
  - name: "network_connectivity_destination_basic"
    primary_resource_id: "example"
    vars:
      config_name: "basic-config"
      destination_name: "basic-destination"

parameters:
  - name: 'multicloudDataTransferConfig'
    type: String
    required: true
    immutable: true
    url_param_only: true
    description: |
      The multicloud data transfer config of the destination.
  - name: 'location'
    type: String
    required: true
    immutable: true
    url_param_only: true
    description: |
      The location of the destination.
  - name: 'name'
    type: String
    required: true
    immutable: true
    url_param_only: true
    description: |
      The name of the destination.

properties:
  - name: 'createTime'
    type: Time
    output: true
    description: |
      Time when the `Destination` resource was created.
  - name: 'updateTime'
    type: Time
    output: true
    description: |
      Time when the `Destination` resource was updated.
  - name: 'labels'
    type: KeyValueLabels
    description: |
      User-defined labels.
  - name: 'etag'
    type: Fingerprint
    output: true
    description: |
      The etag is computed by the server, and might be sent with update and
      delete requests so that the client has an up-to-date value before
      proceeding.
  - name: 'description'
    type: String
    description: |
      A description of this resource.
  - name: 'ipPrefix'
    type: String
    required: true
    immutable: true
    description: |
      The IP prefix that represents your workload on another CSP.
  - name: 'endpoints'
    type: Array
    required: true
    is_set: true
    description: |
      The list of DestinationEndpoint resources configured for the IP prefix.
    item_type:
      type: NestedObject
      properties:
        - name: 'asn'
          type: String
          required: true
          description: |
            The ASN of the remote IP prefix.
        - name: 'csp'
          type: String
          required: true
          description: |
            The CSP of the remote IP prefix.
        - name: 'state'
          type: Enum
          output: true
          enum_values:
            - 'VALID'
            - 'INVALID'
          description: |
            The state of the DestinationEndpoint resource.
        - name: 'updateTime'
          type: Time
          output: true
          description: |
            Time when the DestinationEndpoint resource was updated.
  - name: 'stateTimeline'
    type: NestedObject
    output: true
    description: |
      The timeline of the expected `Destination` states or the current rest
      state. If a state change is expected, the value is `ADDING`,
      `DELETING` or `SUSPENDING`, depending on the action specified.
    properties:
      - name: 'states'
        type: Array
        output: true
        description: The state and activation time details of the resource state.
        item_type:
          type: NestedObject
          properties:
            - name: 'state'
              type: Enum
              output: true
              enum_values:
                - 'ADDING'
                - 'ACTIVE'
                - 'DELETING'
                - 'SUSPENDING'
                - 'SUSPENDED'
              description: 'The state of the resource.'
            - name: 'effectiveTime'
              type: Time
              output: true
              description: |
                Accompanies only the transient states, which include `ADDING`,
                `DELETING`, and `SUSPENDING`, to denote the time until which the
                transient state of the resource will be effective. For instance, if the
                state is `ADDING`, this field shows the time when the resource state
                transitions to `ACTIVE`.
  - name: 'uid'
    type: String
    output: true
    description: |
      The Google-generated unique ID for the `Destination` resource.
      This value is unique across all `Destination` resources.
      If a resource is deleted and another with the same name is
      created, the new resource is assigned a different and unique ID.
