# Copyright 2025 Google Inc.
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

---
name: ExascaleDbStorageVault
description: An Exascale Storage Vault Resource
base_url: projects/{{project}}/locations/{{location}}/exascaleDbStorageVaults
immutable: true
self_link: projects/{{project}}/locations/{{location}}/exascaleDbStorageVaults/{{exascale_db_storage_vault_id}}
create_url: projects/{{project}}/locations/{{location}}/exascaleDbStorageVaults?exascaleDbStorageVaultId={{exascale_db_storage_vault_id}}
id_format: projects/{{project}}/locations/{{location}}/exascaleDbStorageVaults/{{exascale_db_storage_vault_id}}
import_format:
  - projects/{{project}}/locations/{{location}}/exascaleDbStorageVaults/{{exascale_db_storage_vault_id}}
examples:
  - name: oracledatabase_exascale_db_storage_vault_basic
    primary_resource_id: "my_storage_vault"
    vars:
      project: "my-project"
      exascale_db_storage_vault_id: "my-instance"
      deletion_protection: true
    ignore_read_extra:
      - "deletion_protection"
    test_vars_overrides:
      "deletion_protection": "false"
      "project": '"oci-terraform-testing-prod"'
      # ofake- prefix is needed to create a dummy resource for testing purposes only
      # See: https://github.com/hashicorp/terraform-provider-google/issues/19983#issuecomment-2516403770
      # As a result these resources are not sweepable
      # See: https://github.com/hashicorp/terraform-provider-google/issues/20599
      exascale_db_storage_vault_id: 'fmt.Sprintf("ofake-tf-test-storage-vault-basic-%s", acctest.RandString(t, 10))'
  - name: oracledatabase_exascale_db_storage_vault_full
    primary_resource_id: "my_storage_vault"
    vars:
      project: "my-project"
      exascale_db_storage_vault_id: "my-instance"
      deletion_protection: true
    ignore_read_extra:
      - "deletion_protection"
    test_vars_overrides:
      "deletion_protection": "false"
      "project": '"oci-terraform-testing-prod"'
      # ofake- prefix is needed to create a dummy resource for testing purposes only
      # See: https://github.com/hashicorp/terraform-provider-google/issues/19983#issuecomment-2516403770
      # As a result these resources are not sweepable
      # See: https://github.com/hashicorp/terraform-provider-google/issues/20599
      exascale_db_storage_vault_id: 'fmt.Sprintf("ofake-tf-test-storage-vault-full-%s", acctest.RandString(t, 10))'
virtual_fields:
  - name: "deletion_protection"
    type: Boolean
    default_value: true
    description: "Whether or not to allow Terraform to destroy the instance. Unless this field is set to false in Terraform state, a terraform destroy or terraform apply that would delete the instance will fail."
autogen_async: true
async:
  operation:
    timeouts:
      insert_minutes: 120
      update_minutes: 60
      delete_minutes: 60
    base_url: "{{op_id}}"
  actions:
    - create
    - delete
    - update
  type: OpAsync
  result:
    resource_inside_response: true
  include_project: false
custom_code:
  pre_delete: 'templates/terraform/pre_delete/oracledatabase_exascale_db_storage_vault.go.tmpl'
autogen_status: RXhhc2NhbGVEYlN0b3JhZ2VWYXVsdA==
parameters:
  - name: location
    type: String
    description: Resource ID segment making up resource `name`. It identifies the resource within its parent collection as described in https://google.aip.dev/122.
    immutable: true
    url_param_only: true
    required: true
  - name: exascaleDbStorageVaultId
    type: String
    description: |-
      The ID of the ExascaleDbStorageVault to create. This value is
      restricted to (^[a-z]([a-z0-9-]{0,61}[a-z0-9])?$) and must be a maximum of
      63 characters in length. The value must start with a letter and end with a
      letter or a number.
    immutable: true
    url_param_only: true
    required: true
properties:
  - name: createTime
    type: String
    description: The date and time when the ExascaleDbStorageVault was created.
    output: true
  - name: displayName
    type: String
    description: |-
      The display name for the ExascaleDbStorageVault. The name does not have to
      be unique within your project. The name must be 1-255 characters long and
      can only contain alphanumeric characters.
    required: true
  - name: entitlementId
    type: String
    description: |-
      The ID of the subscription entitlement associated with the
      ExascaleDbStorageVault.
    output: true
  - name: gcpOracleZone
    type: String
    description: |-
      The GCP Oracle zone where Oracle ExascaleDbStorageVault is hosted.
      Example: us-east4-b-r2.
      If not specified, the system will pick a zone based on availability.
    default_from_api: true
  - name: labels
    type: KeyValueLabels
    description: The labels or tags associated with the ExascaleDbStorageVault.
  - name: name
    type: String
    description: |-
      Identifier. The resource name of the ExascaleDbStorageVault.
      Format:
      projects/{project}/locations/{location}/exascaleDbStorageVaults/{exascale_db_storage_vault}
    output: true
  - name: properties
    type: NestedObject
    description: |-
      The properties of the ExascaleDbStorageVault.
      next ID: 12
    required: true
    properties:
      - name: additionalFlashCachePercent
        type: Integer
        description: |-
          The size of additional flash cache in percentage of high capacity
          database storage.
        default_from_api: true
      - name: attachedShapeAttributes
        type: Array
        description: |-
          The shape attributes of the VM clusters attached to the
          ExascaleDbStorageVault.
        output: true
        item_type:
          type: String
      - name: availableShapeAttributes
        type: Array
        description: |-
          The shape attributes available for the VM clusters to be attached to the
          ExascaleDbStorageVault.
        output: true
        item_type:
          type: String
      - name: exascaleDbStorageDetails
        type: NestedObject
        description: The storage details of the ExascaleDbStorageVault.
        required: true
        properties:
          - name: availableSizeGbs
            type: Integer
            description: |-
              The available storage capacity for the ExascaleDbStorageVault, in gigabytes
              (GB).
            output: true
          - name: totalSizeGbs
            type: Integer
            description: |-
              The total storage allocation for the ExascaleDbStorageVault, in gigabytes
              (GB).
            required: true
      - name: ociUri
        type: String
        description: Deep link to the OCI console to view this resource.
        output: true
      - name: ocid
        type: String
        description: The OCID for the ExascaleDbStorageVault.
        output: true
      - name: state
        type: String
        description: |-
          The state of the ExascaleDbStorageVault.
          Possible values:
          PROVISIONING
          AVAILABLE
          UPDATING
          TERMINATING
          TERMINATED
          FAILED
        output: true
      - name: timeZone
        type: NestedObject
        description: |-
          Represents a time zone from the
          [IANA Time Zone Database](https://www.iana.org/time-zones).
        default_from_api: true
        properties:
          - name: id
            type: String
            description: IANA Time Zone Database time zone. For example "America/New_York".
            default_from_api: true
          - name: version
            type: String
            description: IANA Time Zone Database version number. For example "2019a".
            default_from_api: true
      - name: vmClusterCount
        type: Integer
        description: The number of VM clusters associated with the ExascaleDbStorageVault.
        output: true
      - name: vmClusterIds
        type: Array
        description: The list of VM cluster OCIDs associated with the ExascaleDbStorageVault.
        output: true
        item_type:
          type: String
