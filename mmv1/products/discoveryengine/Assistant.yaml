# Copyright 2025 Google Inc.
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

---
name: 'Assistant'
description: |
  Assistant
references:
  api: 'https://cloud.google.com/generative-ai-app-builder/docs/reference/rpc/google.cloud.discoveryengine.v1#assistantservice'
base_url: 'projects/{{project}}/locations/{{location}}/collections/{{collection_id}}/engines/{{engine_id}}/assistants'
self_link: 'projects/{{project}}/locations/{{location}}/collections/{{collection_id}}/engines/{{engine_id}}/assistants/{{assistant_id}}'
create_url: 'projects/{{project}}/locations/{{location}}/collections/{{collection_id}}/engines/{{engine_id}}/assistants?assistantId={{assistant_id}}'
update_verb: 'PATCH'
update_mask: true
delete_url: 'projects/{{project}}/locations/{{location}}/collections/{{collection_id}}/engines/{{engine_id}}/assistants/{{assistant_id}}'
import_format:
  - 'projects/{{project}}/locations/{{location}}/collections/{{collection_id}}/engines/{{engine_id}}/assistants/{{assistant_id}}'
timeouts:
  insert_minutes: 20
  update_minutes: 20
  delete_minutes: 20
examples:
  - name: 'discoveryengine_assistant_basic'
    primary_resource_id: 'basic'
    vars:
      data_store_id: 'example-data-store-id'
      engine_id: 'example-engine-id'
      assistant_id: 'example-assistant-id'
      template_id: 'example-template-id'
parameters:
  - name: 'location'
    type: String
    description: |
      The geographic location where the data store should reside. The value can
      only be one of "global", "us" and "eu".
    url_param_only: true
    required: true
    immutable: true
  - name: 'collectionId'
    type: String
    description: |
      The unique id of the collection.
    url_param_only: true
    required: true
    immutable: true
  - name: 'engineId'
    type: String
    description: |
      The unique id of the engine.
    url_param_only: true
    required: true
    immutable: true
  - name: 'assistantId'
    type: String
    description: |
      The unique id of the assistant.
    url_param_only: true
    required: true
    immutable: true
properties:
  - name: 'name'
    type: String
    description: |
      Resource name of the assistant.
      Format:
      `projects/{project}/locations/{location}/collections/{collection}/engines/{engine}/assistants/{assistant}`

      It must be a UTF-8 encoded string with a length limit of 1024 characters.
    output: true
  - name: 'displayName'
    type: String
    required: true
    description: |
      The assistant display name.

      It must be a UTF-8 encoded string with a length limit of 128 characters.
  - name: 'description'
    type: String
    description: |
      Description for additional information. Expected to be shown on the
      configuration UI, not to the users of the assistant.
  - name: 'generationConfig'
    type: NestedObject
    description: |
      Configuration for the generation of the assistant response.
    properties:
      - name: 'systemInstruction'
        type: NestedObject
        description: |
          System instruction, also known as the prompt preamble for LLM calls.
          See also https://cloud.google.com/vertex-ai/generative-ai/docs/learn/prompts/system-instructions
        properties:
          - name: 'additionalSystemInstruction'
            type: String
            description: |
              Additional system instruction that will be added to the default system instruction.
      - name: 'defaultLanguage'
        type: String
        description: |
          The default language to use for the generation of the assistant response.
          Use an ISO 639-1 language code such as `en`.
          If not specified, the language will be automatically detected.
  - name: 'customerPolicy'
    type: NestedObject
    description: |
      Customer policy for the assistant.
    properties:
      - name: 'bannedPhrases'
        type: Array
        description: |
          List of banned phrases.
        item_type:
          type: NestedObject
          properties:
            - name: 'phrase'
              type: String
              required: true
              description: |
                The raw string content to be banned.
            - name: 'matchType'
              type: String
              description: |
                Match type for the banned phrase.
                The supported values: 'SIMPLE_STRING_MATCH', 'WORD_BOUNDARY_STRING_MATCH'.
            - name: 'ignoreDiacritics'
              type: Boolean
              description: |
                If true, diacritical marks (e.g., accents, umlauts) are ignored when
                matching banned phrases. For example, "cafe" would match "caf√©".
      - name: 'modelArmorConfig'
        type: NestedObject
        description: |
          Model Armor configuration to be used for sanitizing user prompts and assistant responses.
        properties:
          - name: 'userPromptTemplate'
            type: String
            required: true
            description: |
              The resource name of the Model Armor template for sanitizing user
              prompts. Format:
              `projects/{project}/locations/{location}/templates/{template_id}`

              If not specified, no sanitization will be applied to the user prompt.
          - name: 'responseTemplate'
            type: String
            required: true
            description: |
              The resource name of the Model Armor template for sanitizing assistant
              responses. Format:
              `projects/{project}/locations/{location}/templates/{template_id}`

              If not specified, no sanitization will be applied to the assistant
              response.
          - name: 'failureMode'
            type: String
            description: |
              Defines the failure mode for Model Armor sanitization.
              The supported values: 'FAIL_OPEN', 'FAIL_CLOSED'.
  - name: 'webGroundingType'
    type: String
    description: |
      The type of web grounding to use.
      The supported values: 'WEB_GROUNDING_TYPE_DISABLED', 'WEB_GROUNDING_TYPE_GOOGLE_SEARCH', 'WEB_GROUNDING_TYPE_ENTERPRISE_WEB_SEARCH'.
