# Copyright 2024 Google Inc.
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

---
name: Saas
description: A Saas resource is the top-level representation of a SaaS service managed by a producer. It contains a list of locations where the service is available, which is used by the Rollout system to generate a rollout plan.
base_url: projects/{{project}}/locations/{{location}}/saas
update_mask: true
self_link: projects/{{project}}/locations/{{location}}/saas/{{saas_id}}
create_url: projects/{{project}}/locations/{{location}}/saas?saasId={{saas_id}}
update_verb: PATCH
id_format: projects/{{project}}/locations/{{location}}/saas/{{saas_id}}
import_format:
  - projects/{{project}}/locations/{{location}}/saas/{{saas_id}}
min_version: beta
examples:
  - name: saas_runtime_saas_basic
    primary_resource_id: "example"
    min_version: 'beta'
    vars:
      saas_name: test-saas
    bootstrap_iam:
      - member: "serviceAccount:service-{project_number}@gcp-sa-saasservicemgmt.iam.gserviceaccount.com"
        role: "roles/saasservicemgmt.serviceAgent"
autogen_async: false
autogen_status: U2Fhcw==
parameters:
  - name: location
    type: String
    description: Resource ID segment making up resource `name`. It identifies the resource within its parent collection as described in https://google.aip.dev/122.
    immutable: true
    url_param_only: true
    required: true
  - name: saasId
    type: String
    description: The ID value for the new saas.
    immutable: true
    url_param_only: true
    required: true
properties:
  - name: annotations
    type: KeyValueAnnotations
    description: |-
      Annotations is an unstructured key-value map stored with a resource that
      may be set by external tools to store and retrieve arbitrary metadata.
      They are not queryable and should be preserved when modifying objects.

      More info: https://kubernetes.io/docs/user-guide/annotations
  - name: createTime
    type: String
    description: The timestamp when the resource was created.
    output: true
  - name: etag
    type: String
    description: |-
      An opaque value that uniquely identifies a version or
      generation of a resource. It can be used to confirm that the client
      and server agree on the ordering of a resource being written.
    output: true
  - name: labels
    type: KeyValueLabels
    description: |-
      The labels on the resource, which can be used for categorization.
      similar to Kubernetes resource labels.
  - name: locations
    type: Array
    description: |-
      List of locations that the service is available in. Rollout refers to the
      list to generate a rollout plan.
    item_type:
      type: NestedObject
      properties:
        - name: name
          type: String
          description: Name of location.
  - name: name
    type: String
    description: |-
      Identifier. The resource name (full URI of the resource) following the standard naming
      scheme:

      "projects/{project}/locations/{location}/saas/{saas}"
    output: true
  - name: uid
    type: String
    description: |-
      The unique identifier of the resource. UID is unique in the time
      and space for this resource within the scope of the service. It is
      typically generated by the server on successful creation of a resource
      and must not be changed. UID is used to uniquely identify resources
      with resource name reuses. This should be a UUID4.
    output: true
  - name: updateTime
    type: String
    description: |-
      The timestamp when the resource was last updated. Any
      change to the resource made by users must refresh this value.
      Changes to a resource made by the service should refresh this value.
    output: true
