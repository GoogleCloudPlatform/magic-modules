# Copyright 2020 Google Inc.
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

--- !ruby/object:Api::Product
name: DialogflowCX
display_name: Dialogflow CX
versions:
  - !ruby/object:Api::Product::Version
    name: ga
    base_url: https://dialogflow.googleapis.com/v3/
scopes:
  - https://www.googleapis.com/auth/cloud-platform
apis_required:
  - !ruby/object:Api::Product::ApiReference
    name: Dialogflow API
    url: https://console.cloud.google.com/apis/library/dialogflow.googleapis.com
objects:
  - !ruby/object:Api::Resource
    name: 'Agent'
    base_url: "projects/{{project}}/locations/{{location}}/agents"
    update_verb: :PATCH
    update_mask: true
    description: |
      Agents are best described as Natural Language Understanding (NLU) modules that transform user requests into actionable data. You can include agents in your app, product, or service to determine user intent and respond to the user in a natural way.
    references: !ruby/object:Api::Resource::ReferenceLinks
      guides:
        'Official Documentation':
          'https://cloud.google.com/dialogflow/cx/docs'
      api: 'https://cloud.google.com/dialogflow/cx/docs/reference/rest/v3/projects.locations.agents'
    properties:
      - !ruby/object:Api::Type::String
        name: 'name'
        output: true
        description: |
          The unique identifier of the agent.
      - !ruby/object:Api::Type::String
        name: 'location'
        description: |
          The name of the location this agent is located in.

          ~> **Note:** The first time you are deploying an Agent in your project you must configure location settings.
           This is a one time step but at the moment you can only [configure location settings](https://cloud.google.com/dialogflow/cx/docs/concept/region#location-settings) via the Dialogflow CX console.
           Another options is to use global location so you don't need to manually configure location settings.
        required: true
        input: true
        url_param_only: true
      - !ruby/object:Api::Type::String
        name: 'displayName'
        required: true
        description: |
          The human-readable name of the agent, unique within the location.
      - !ruby/object:Api::Type::String
        name: 'defaultLanguageCode'
        description: |
         The default language of the agent as a language tag. [See Language Support](https://cloud.google.com/dialogflow/cx/docs/reference/language) 
         for a list of the currently supported language codes. This field cannot be updated after creation.
        input: true
        required: true
      - !ruby/object:Api::Type::Array
        name: 'supportedLanguageCodes'
        item_type: Api::Type::String
        description: |
         The list of all languages supported by this agent (except for the default_language_code).
      - !ruby/object:Api::Type::String
        name: 'timeZone'
        description: |
         The time zone of this agent from the [time zone database](https://www.iana.org/time-zones), e.g., America/New_York,
         Europe/Paris.
        required: true
      - !ruby/object:Api::Type::String
        name: 'description'
        description: |
         The description of this agent. The maximum length is 500 characters. If exceeded, the request is rejected.
      - !ruby/object:Api::Type::String
        name: 'avatarUri'
        description: |
         The URI of the agent's avatar. Avatars are used throughout the Dialogflow console and in the self-hosted Web Demo integration.
      - !ruby/object:Api::Type::NestedObject
        name: 'speechToTextSettings'
        description: |
          Settings related to speech recognition.
        properties:
          - !ruby/object:Api::Type::Boolean
            name: 'enableSpeechAdaptation'
            description: |
              Whether to use speech adaptation for speech recognition.
      - !ruby/object:Api::Type::String
        name: 'startFlow'
        output: true
        description: |
         Name of the start flow in this agent. A start flow will be automatically created when the agent is created, and can only be deleted by deleting the agent. Format: projects/<Project ID>/locations/<Location ID>/agents/<Agent ID>/flows/<Flow ID>.
      - !ruby/object:Api::Type::String
        name: 'securitySettings'
        description: |
         Name of the SecuritySettings reference for the agent. Format: projects/<Project ID>/locations/<Location ID>/securitySettings/<Security Settings ID>.
      - !ruby/object:Api::Type::Boolean
        name: 'enableStackdriverLogging'
        description: |
         Determines whether this agent should log conversation queries.
      - !ruby/object:Api::Type::Boolean
        name: 'enableSpellCorrection'
        description: |
         Indicates if automatic spell correction is enabled in detect intent requests.
  - !ruby/object:Api::Resource
    name: 'EntityType'
    base_url: "{{parent}}/entityTypes"
    update_verb: :PATCH
    update_mask: true
    description: |
      Entities are extracted from user input and represent parameters that are meaningful to your application. 
      For example, a date range, a proper name such as a geographic location or landmark, and so on. Entities represent actionable data for your application.
    references: !ruby/object:Api::Resource::ReferenceLinks
      guides:
        'Official Documentation':
          'https://cloud.google.com/dialogflow/cx/docs'
      api: 'https://cloud.google.com/dialogflow/cx/docs/reference/rest/v3/projects.locations.agents.entityTypes'
    parameters:
      - !ruby/object:Api::Type::String
        name: parent
        url_param_only: true
        input: true
        description: |
          The agent to create a entity type for. 
          Format: projects/<Project ID>/locations/<Location ID>/agents/<Agent ID>.
      - !ruby/object:Api::Type::String
        name: 'languageCode'
        description: |
          The language of the following fields in entityType:
          EntityType.entities.value
          EntityType.entities.synonyms
          EntityType.excluded_phrases.value
          If not specified, the agent's default language is used. Many languages are supported. Note: languages must be enabled in the agent before they can be used.
        input: true
        url_param_only: true
    properties:
      - !ruby/object:Api::Type::String
        name: 'name'
        output: true
        description: |
          The unique identifier of the entity type.
          Format: projects/<Project ID>/locations/<Location ID>/agents/<Agent ID>/entityTypes/<Entity Type ID>.
      - !ruby/object:Api::Type::String
        name: 'displayName'
        required: true
        description: |
          The human-readable name of the entity type, unique within the agent.
      - !ruby/object:Api::Type::Enum
        name: 'kind'
        required: true
        description: |
          Indicates whether the entity type can be automatically expanded.
          * KIND_MAP: Map entity types allow mapping of a group of synonyms to a canonical value.
          * KIND_LIST: List entity types contain a set of entries that do not map to canonical values. However, list entity types can contain references to other entity types (with or without aliases).
          * KIND_REGEXP: Regexp entity types allow to specify regular expressions in entries values.
        values:
          - :KIND_MAP
          - :KIND_LIST
          - :KIND_REGEXP
      - !ruby/object:Api::Type::Enum
        name: 'autoExpansionMode'
        description: |
          Represents kinds of entities.
          * AUTO_EXPANSION_MODE_UNSPECIFIED: Auto expansion disabled for the entity.
          * AUTO_EXPANSION_MODE_DEFAULT: Allows an agent to recognize values that have not been explicitly listed in the entity.
        values:
          - :AUTO_EXPANSION_MODE_DEFAULT
          - :AUTO_EXPANSION_MODE_UNSPECIFIED
      - !ruby/object:Api::Type::Array
        name: 'entities'
        required: true
        description: |
          The collection of entity entries associated with the entity type.
        item_type: !ruby/object:Api::Type::NestedObject
          properties:
            - !ruby/object:Api::Type::String
              name: 'value'
              description: |
                The primary value associated with this entity entry. For example, if the entity type is vegetable, the value could be scallions.
                For KIND_MAP entity types: A canonical value to be used in place of synonyms.
                For KIND_LIST entity types: A string that can contain references to other entity types (with or without aliases).
            - !ruby/object:Api::Type::Array
              name: 'synonyms'
              item_type: Api::Type::String
              description: |
                A collection of value synonyms. For example, if the entity type is vegetable, and value is scallions, a synonym could be green onions.
                For KIND_LIST entity types: This collection must contain exactly one synonym equal to value.
      - !ruby/object:Api::Type::Array
        name: 'excludedPhrases'
        description: |
          Collection of exceptional words and phrases that shouldn't be matched. For example, if you have a size entity type with entry giant(an adjective), you might consider adding giants(a noun) as an exclusion. 
          If the kind of entity type is KIND_MAP, then the phrases specified by entities and excluded phrases should be mutually exclusive.
        item_type: !ruby/object:Api::Type::NestedObject
          properties:
            - !ruby/object:Api::Type::String
              name: 'value'
              description: |
                The word or phrase to be excluded.
      - !ruby/object:Api::Type::Boolean
        name: 'enableFuzzyExtraction'
        description: |
          Enables fuzzy entity extraction during classification.
      - !ruby/object:Api::Type::Boolean
        name: 'redact'
        description: |
          Indicates whether parameters of the entity type should be redacted in log. If redaction is enabled, page parameters and intent parameters referring to the entity type will be replaced by parameter name when logging.    