<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Set up your environment # Cloning Terraform providers # If you&rsquo;re generating the Terraform providers (google and google-beta), you&rsquo;ll need to check out the repo(s) you&rsquo;re generating in your GOPATH. For example:
git clone https://github.com/hashicorp/terraform-provider-google.git $GOPATH/src/github.com/hashicorp/terraform-provider-google git clone https://github.com/hashicorp/terraform-provider-google-beta.git $GOPATH/src/github.com/hashicorp/terraform-provider-google-beta Or run the following to check them all out:
./scripts/bootstrap Magic Modules won&rsquo;t work with old versions of the Terraform provider repos. If you&rsquo;re encountering issues with vendoring and paths, make sure both MM and the Terraform provider are running on up to date copies of main."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content="Set up your environment"><meta property="og:description" content="Set up your environment # Cloning Terraform providers # If you&rsquo;re generating the Terraform providers (google and google-beta), you&rsquo;ll need to check out the repo(s) you&rsquo;re generating in your GOPATH. For example:
git clone https://github.com/hashicorp/terraform-provider-google.git $GOPATH/src/github.com/hashicorp/terraform-provider-google git clone https://github.com/hashicorp/terraform-provider-google-beta.git $GOPATH/src/github.com/hashicorp/terraform-provider-google-beta Or run the following to check them all out:
./scripts/bootstrap Magic Modules won&rsquo;t work with old versions of the Terraform provider repos. If you&rsquo;re encountering issues with vendoring and paths, make sure both MM and the Terraform provider are running on up to date copies of main."><meta property="og:type" content="article"><meta property="og:url" content="https://googlecloudplatform.github.io/magic-modules/docs/getting-started/setup/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2023-03-01T08:23:38-08:00"><title>Set up your environment | Magic Modules</title><link rel=manifest href=/magic-modules/manifest.json><link rel=icon href=/magic-modules/favicon.png type=image/x-icon><link rel=stylesheet href=/magic-modules/book.min.c58292d36b18b675680ab9baea2029204537b839ea72f258746ec0f32ce8d6c8.css integrity="sha256-xYKS02sYtnVoCrm66iApIEU3uDnqcvJYdG7A8yzo1sg=" crossorigin=anonymous><script defer src=/magic-modules/flexsearch.min.js></script>
<script defer src=/magic-modules/en.search.min.2f653af129452131d2b57b9c0e9fa9ec37004674da72f2dff61bdc033552be6e.js integrity="sha256-L2U68SlFITHStXucDp+p7DcARnTacvLf9hvcAzVSvm4=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/magic-modules/><img src=/magic-modules/magic-modules.svg alt=Logo><span>Magic Modules</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><span>Getting Started</span><ul><li><a href=/magic-modules/docs/getting-started/setup/ class=active>Set up your environment</a></li><li><a href=/magic-modules/docs/getting-started/generate-providers/>Generate the providers</a></li><li><a href=/magic-modules/docs/getting-started/run-provider-tests/>Run provider tests</a></li><li><a href=/magic-modules/docs/getting-started/use-built-provider/>Use built provider</a></li><li><a href=/magic-modules/docs/getting-started/contributing/>Contributing</a></li><li><a href=/magic-modules/docs/getting-started/provider-documentation/>Provider documentation</a></li></ul></li><li><a href=/magic-modules/docs/how-to/>How To</a><ul><li><a href=/magic-modules/docs/how-to/types-of-resources/>Types of resources</a></li><li><a href=/magic-modules/docs/how-to/add-mmv1-resource/>Add an MMv1 resource</a></li><li><a href=/magic-modules/docs/how-to/add-mmv1-iam/>Add MMv1 IAM resources</a></li><li><a href=/magic-modules/docs/how-to/add-mmv1-test/>Add an MMv1 test</a></li><li><a href=/magic-modules/docs/how-to/mmv1-resource-documentation/>Add and update MMv1 resource documentation</a></li><li><a href=/magic-modules/docs/how-to/update-handwritten-resource/>Update a handwritten resource</a></li><li><a href=/magic-modules/docs/how-to/add-handwritten-test/>Add a handwritten test</a></li><li><a href=/magic-modules/docs/how-to/add-handwritten-datasource/>Add a handwritten datasource</a></li><li><a href=/magic-modules/docs/how-to/add-handwritten-iam/>Add handwritten IAM resources</a></li><li><a href=/magic-modules/docs/how-to/update-handwritten-documentation/>Update handwritten provider documentation</a></li><li><a href=/magic-modules/docs/how-to/add-handwritten-datasource-documentation/>Add documentation for a handwritten data source</a></li></ul></li><li><a href=/magic-modules/docs/best-practices/>Best practices</a><ul></ul></li><li><span>Reference</span><ul><li><a href=https://github.com/GoogleCloudPlatform/magic-modules/blob/main/mmv1/api/resource.rb target=_blank rel=noopener>api.yaml resource ↗</a></li><li><a href=https://github.com/GoogleCloudPlatform/magic-modules/blob/main/mmv1/overrides/terraform/resource_override.rb target=_blank rel=noopener>terraform.yaml resource ↗</a></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/magic-modules/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Set up your environment</strong>
<label for=toc-control><img src=/magic-modules/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#cloning-terraform-providers>Cloning Terraform providers</a></li><li><a href=#setting-up-a-container-based-environment>Setting up a container-based environment</a></li><li><a href=#preparing-your-environment-manually>Preparing your environment manually</a></li><li><a href=#test-your-setup>Test your setup</a></li></ul></nav></aside></header><article class=markdown><h1 id=set-up-your-environment>Set up your environment
<a class=anchor href=#set-up-your-environment>#</a></h1><h2 id=cloning-terraform-providers>Cloning Terraform providers
<a class=anchor href=#cloning-terraform-providers>#</a></h2><p>If you&rsquo;re generating the Terraform providers (<code>google</code> and <code>google-beta</code>),
you&rsquo;ll need to check out the repo(s) you&rsquo;re generating in your GOPATH. For
example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git clone https://github.com/hashicorp/terraform-provider-google.git $GOPATH/src/github.com/hashicorp/terraform-provider-google
</span></span><span style=display:flex><span>git clone https://github.com/hashicorp/terraform-provider-google-beta.git $GOPATH/src/github.com/hashicorp/terraform-provider-google-beta
</span></span></code></pre></div><p>Or run the following to check them all out:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>./scripts/bootstrap
</span></span></code></pre></div><p>Magic Modules won&rsquo;t work with old versions of the Terraform provider repos. If
you&rsquo;re encountering issues with vendoring and paths, make sure both MM and the
Terraform provider are running on up to date copies of <code>main</code>.</p><h2 id=setting-up-a-container-based-environment>Setting up a container-based environment
<a class=anchor href=#setting-up-a-container-based-environment>#</a></h2><p><em>NOTE</em> this approach is in beta and still collecting feedback. Please file an issue if you encounter challenges, and try pulling the latest container (see command below) first to see if any recent changes may fix you.</p><p>You do not need to run these instructions if you are setting up your environment manually.</p><p>For ease of contribution, we provide containers with the required dependencies for building magic-modules, as well as the option to build them yourself.</p><p>You can work with containers with either <a href=https://podman.io/>Podman</a> or <a href=https://docker.io/>Docker</a>.</p><p><a href=https://github.com/GoogleCloudPlatform/magic-modules/blob/main/scripts/make-in-container.sh>scripts/make-in-container.sh</a> includes all the
instructions to build and run containers by hand. Refer to the script for
individual steps, but for most users you only have to run the script directly, as a replacement for make.</p><p>Here is an example of how to build Terraform (after <a href=#cloning-terraform-providers>cloning the provider</a>):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>./scripts/make-in-container.sh <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  terraform VERSION<span style=color:#f92672>=</span>ga <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  OUTPUT_PATH<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$GOPATH<span style=color:#e6db74>/src/github.com/hashicorp/terraform-provider-google&#34;</span>
</span></span></code></pre></div><p>Generally, you can replace any reference to <code>make</code> in this guide with <code>scripts/make-in-container.sh</code>.</p><h2 id=preparing-your-environment-manually>Preparing your environment manually
<a class=anchor href=#preparing-your-environment-manually>#</a></h2><p><em>NOTE</em>: you don&rsquo;t need to run these instructions if you are using a container-based environment.</p><p>You can also build magic-modules
within your local development environment.</p><p>To get started, you&rsquo;ll need:</p><ul><li>Go<ul><li>If you&rsquo;re using a Mac with Homebrew installed, you can follow these
instructions to set up Go: <a href="https://www.youtube.com/watch?v=VQVyvulNnzs">YouTube video</a>.</li><li>If you&rsquo;re using Cloud Shell, Go is already installed.</li><li>Currently it&rsquo;s recommended to use Go 1.18, Go 1.19 changed the gofmt rules which causes some gofmt issue and our CIs are all on 1.18.X</li></ul></li><li>Ruby 3.1.0<ul><li>You can use <a href=https://github.com/rbenv/rbenv><code>rbenv</code></a> to manage your Ruby version(s).</li><li>To install <code>rbenv</code>:<ul><li>Homebrew: run <code>brew install rbenv ruby-build</code></li><li>Debian, Ubuntu, and their derivatives: run <code>sudo apt install rbenv</code></li></ul></li><li>Then run <code>rbenv install 3.1.0</code>.</li></ul></li><li><a href=https://github.com/bundler/bundler><code>Bundler</code></a><ul><li>This can be installed with <code>gem install bundler</code></li></ul></li><li>Gems for magic-modules<ul><li>This can be installed with <code>cd mmv1 && bundler install</code></li></ul></li><li>Goimports<ul><li>go install golang.org/x/tools/cmd/goimports / go install golang.org/x/tools/cmd/goimports@latest</li></ul></li><li>Terraform<ul><li><a href=https://learn.hashicorp.com/tutorials/terraform/install-cli>Install Terraform</a></li></ul></li><li>If you are getting &ldquo;Too many open files&rdquo; ulimit needs to be raised.<ul><li>Mac OSX: <code>ulimit -n 8192</code></li></ul></li></ul><p>Now, you can verify you&rsquo;re ready with:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>make doctor
</span></span></code></pre></div><pre tabindex=0><code>Check for rbenv in path...
   found!
Checking ruby version...
3.1.0 (set by [PATH]/magic-modules/mmv1/.ruby-version)
Check for bundler in path...
   found!
Check for go in path...
   found!
Check for goimports in path...
   found!
Check for git in path...
   found!
</code></pre><h2 id=test-your-setup>Test your setup
<a class=anchor href=#test-your-setup>#</a></h2><p>Try <a href=/magic-modules/docs/getting-started/generate-providers/>generating the providers</a>. If your environment is set up correctly, it should succeed with no errors!</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/GoogleCloudPlatform/magic-modules/commit/151459d30cd31def1cce43dc8eaa5b680536f2c5 title='Last modified by Stephen Lewis (Burrows) | March 1, 2023' target=_blank rel=noopener><img src=/magic-modules/svg/calendar.svg class=book-icon alt=Calendar>
<span>March 1, 2023</span></a></div><div><a class="flex align-center" href=https://github.com/GoogleCloudPlatform/magic-modules/edit/main/docs/content/docs/getting-started/setup.md target=_blank rel=noopener><img src=/magic-modules/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#cloning-terraform-providers>Cloning Terraform providers</a></li><li><a href=#setting-up-a-container-based-environment>Setting up a container-based environment</a></li><li><a href=#preparing-your-environment-manually>Preparing your environment manually</a></li><li><a href=#test-your-setup>Test your setup</a></li></ul></nav></div></aside></main></body></html>