<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Generate the provider # You can compile the Terraform provider you&rsquo;re working on using make or make provider in the magic-modules directory. Below you&rsquo;ll find a command reference, sample commands, and instructions on how to clean up the repository.
make provider reference # make or make provider will build the terraform provider. The following are variables set either as environment or inline when calling make. They will inform the generator where and how to generate."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content="Generate the providers"><meta property="og:description" content="Generate the provider # You can compile the Terraform provider you&rsquo;re working on using make or make provider in the magic-modules directory. Below you&rsquo;ll find a command reference, sample commands, and instructions on how to clean up the repository.
make provider reference # make or make provider will build the terraform provider. The following are variables set either as environment or inline when calling make. They will inform the generator where and how to generate."><meta property="og:type" content="article"><meta property="og:url" content="https://googlecloudplatform.github.io/magic-modules/docs/getting-started/generate-providers/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2023-01-11T11:00:54-08:00"><title>Generate the providers | Magic Modules</title><link rel=manifest href=/magic-modules/manifest.json><link rel=icon href=/magic-modules/favicon.png type=image/x-icon><link rel=stylesheet href=/magic-modules/book.min.c58292d36b18b675680ab9baea2029204537b839ea72f258746ec0f32ce8d6c8.css integrity="sha256-xYKS02sYtnVoCrm66iApIEU3uDnqcvJYdG7A8yzo1sg=" crossorigin=anonymous><script defer src=/magic-modules/flexsearch.min.js></script>
<script defer src=/magic-modules/en.search.min.cd0d9f57b331161cd211830d1345b605db628c874ec40b5bf0beea62deab0f1f.js integrity="sha256-zQ2fV7MxFhzSEYMNE0W2BdtijIdOxAtb8L7qYt6rDx8=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/magic-modules/><img src=/magic-modules/magic-modules.svg alt=Logo><span>Magic Modules</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><span>Getting Started</span><ul><li><a href=/magic-modules/docs/getting-started/setup/>Set up your environment</a></li><li><a href=/magic-modules/docs/getting-started/generate-providers/ class=active>Generate the providers</a></li><li><a href=/magic-modules/docs/getting-started/run-provider-tests/>Run provider tests</a></li><li><a href=/magic-modules/docs/getting-started/use-built-provider/>Use built provider</a></li><li><a href=/magic-modules/docs/getting-started/contributing/>Contributing</a></li><li><a href=/magic-modules/docs/getting-started/provider-documentation/>Provider documentation</a></li></ul></li><li><a href=/magic-modules/docs/how-to/>How To</a><ul><li><a href=/magic-modules/docs/how-to/types-of-resources/>Types of resources</a></li><li><a href=/magic-modules/docs/how-to/add-mmv1-resource/>Add an MMv1 resource</a></li><li><a href=/magic-modules/docs/how-to/add-mmv1-iam/>Add MMv1 IAM resources</a></li><li><a href=/magic-modules/docs/how-to/add-mmv1-test/>Add an MMv1 test</a></li><li><a href=/magic-modules/docs/how-to/mmv1-resource-documentation/>Add and update MMv1 resource documentation</a></li><li><a href=/magic-modules/docs/how-to/update-handwritten-resource/>Update a handwritten resource</a></li><li><a href=/magic-modules/docs/how-to/add-handwritten-test/>Add a handwritten test</a></li><li><a href=/magic-modules/docs/how-to/add-handwritten-datasource/>Add a handwritten datasource</a></li><li><a href=/magic-modules/docs/how-to/add-handwritten-iam/>Add handwritten IAM resources</a></li><li><a href=/magic-modules/docs/how-to/update-handwritten-documentation/>Update handwritten provider documentation</a></li><li><a href=/magic-modules/docs/how-to/add-handwritten-datasource-documentation/>Add documentation for a handwritten data source</a></li></ul></li><li><span>Reference</span><ul><li><a href=https://github.com/GoogleCloudPlatform/magic-modules/blob/main/mmv1/api/resource.rb target=_blank rel=noopener>api.yaml resource ↗</a></li><li><a href=https://github.com/GoogleCloudPlatform/magic-modules/blob/main/mmv1/overrides/terraform/resource_override.rb target=_blank rel=noopener>terraform.yaml resource ↗</a></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/magic-modules/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Generate the providers</strong>
<label for=toc-control><img src=/magic-modules/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#make-provider-reference><code>make provider</code> reference</a></li><li><a href=#sample-commands>Sample commands</a></li><li><a href=#cleaning-up-old-files>Cleaning up old files</a></li></ul></nav></aside></header><article class=markdown><h1 id=generate-the-provider>Generate the provider
<a class=anchor href=#generate-the-provider>#</a></h1><p>You can compile the Terraform provider you&rsquo;re working on using <code>make</code> or
<code>make provider</code> in the magic-modules directory. Below you&rsquo;ll find a command reference,
sample commands, and instructions on how to clean up the repository.</p><h2 id=make-provider-reference><code>make provider</code> reference
<a class=anchor href=#make-provider-reference>#</a></h2><p><code>make</code> or <code>make provider</code> will build the terraform provider. The following are variables
set either as environment or inline when calling <code>make</code>. They will inform the generator where
and how to generate.</p><p>Note: Generation is done by running definitions through templates, then unioning these generated files with the
actual provider downstream. Thus please ensure the provider you are generating into and magic-modules are in-sync
and/or up to date.</p><style type=text/css>.build-table th span.reduce-impact{font-weight:400}</style><table class=build-table><thead><tr><th colspan=2>magic-modules - build variables</th></tr></thead><tbody><tr><th>OUTPUT_PATH <span class=reduce-impact>(required)</span></th><td>The location of the provider you are unioning generation into.</td></tr><tr><th>VERSION <span class=reduce-impact>(required)</span></th><td>The version of the provider you are building into.<br>Valid values are <code>ga</code> and <code>beta</code>.</td></tr><tr><th>ENGINE <span class=reduce-impact>(optional)</span></td><td>Modifies make provider to build either tpgtools or mmv1 valid values are <code>mmv1</code> or <code>tpgtools</code>. Note that running make provider with ENGINE set to <code>tpgtools</code> will build any prerequisite mmv1 files required for tpgtools.</td></tr><tr><th>PRODUCT <span class=reduce-impact>(optional)</span></td><td>Specifies the product to build. Equivalent to the folder name within <code>/mmv1/products</code> or <code>/tpgtools/api</code>. Useful to scope the build to your changes. Note: mmv1 files in <code>mmv1/third_party/terraform</code> on run of make provider are always built. So if youve only modified files in this directory you can set the PRODUCT to a non-existant one to skip the generation of non-handwritten, code.</td></tr><tr><th>RESOURCE <span class=reduce-impact>(optional)</span></th><td>Specifies the resource to build. Equivalent to the product name within the <code>api.yaml</code> file for <code>mmv1</code> or the terraform resource name for <code>tpgtools</code> resources. If filtering for mmv1 <code>PRODUCT</code> must be defined.</td></tr></tbody></table><h2 id=sample-commands>Sample commands
<a class=anchor href=#sample-commands>#</a></h2><p>Run the following commands from the root directory of the repository.
OUTPUT_PATH should be set to the location of your provider repository, which
is recommended to be inside your GOPATH.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd magic-modules
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>make provider VERSION<span style=color:#f92672>=</span>ga OUTPUT_PATH<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$GOPATH<span style=color:#e6db74>/src/github.com/hashicorp/terraform-provider-google&#34;</span>
</span></span><span style=display:flex><span>make provider VERSION<span style=color:#f92672>=</span>beta OUTPUT_PATH<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$GOPATH<span style=color:#e6db74>/src/github.com/hashicorp/terraform-provider-google-beta&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Only generate a specific product (plus all common files)</span>
</span></span><span style=display:flex><span>make provider VERSION<span style=color:#f92672>=</span>ga OUTPUT_PATH<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$GOPATH<span style=color:#e6db74>/src/github.com/hashicorp/terraform-provider-google&#34;</span> PRODUCT<span style=color:#f92672>=</span>pubsub
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Only generate only a specific resources for a product</span>
</span></span><span style=display:flex><span>make provider VERSION<span style=color:#f92672>=</span>ga OUTPUT_PATH<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$GOPATH<span style=color:#e6db74>/src/github.com/hashicorp/terraform-provider-google&#34;</span> PRODUCT<span style=color:#f92672>=</span>pubsub RESOURCE<span style=color:#f92672>=</span>Topic
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Only generate common files, including all third_party code</span>
</span></span><span style=display:flex><span>make provider VERSION<span style=color:#f92672>=</span>ga OUTPUT_PATH<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$GOPATH<span style=color:#e6db74>/src/github.com/hashicorp/terraform-provider-google&#34;</span> PRODUCT<span style=color:#f92672>=</span>foo
</span></span></code></pre></div><h2 id=cleaning-up-old-files>Cleaning up old files
<a class=anchor href=#cleaning-up-old-files>#</a></h2><p>Magic Modules will only generate on top of whatever is in the downstream repository. This means that, from time
to time, you may end up with stale files or changes in your downstream that cause compilation or tests to fail.</p><p>You can clean up by running the following commands in your downstream repository:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git checkout -- .
</span></span><span style=display:flex><span>git clean -f google/ google-beta/ website/
</span></span></code></pre></div></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/GoogleCloudPlatform/magic-modules/commit/ff600a13ff2d3c40e19a0ce33e37617ef97ed4e1 title='Last modified by Scott Suarez | January 11, 2023' target=_blank rel=noopener><img src=/magic-modules/svg/calendar.svg class=book-icon alt=Calendar>
<span>January 11, 2023</span></a></div><div><a class="flex align-center" href=https://github.com/GoogleCloudPlatform/magic-modules/edit/main/docs/content/docs/getting-started/generate-providers.md target=_blank rel=noopener><img src=/magic-modules/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#make-provider-reference><code>make provider</code> reference</a></li><li><a href=#sample-commands>Sample commands</a></li><li><a href=#cleaning-up-old-files>Cleaning up old files</a></li></ul></nav></div></aside></main></body></html>