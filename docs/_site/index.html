<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Magic Modules | Information about contributing to Magic Modules and using it to generate downstream code.</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Magic Modules" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Information about contributing to Magic Modules and using it to generate downstream code." />
<meta property="og:description" content="Information about contributing to Magic Modules and using it to generate downstream code." />
<link rel="canonical" href="http://localhost:4000/magic-modules/" />
<meta property="og:url" content="http://localhost:4000/magic-modules/" />
<meta property="og:site_name" content="Magic Modules" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Magic Modules" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebSite","description":"Information about contributing to Magic Modules and using it to generate downstream code.","headline":"Magic Modules","name":"Magic Modules","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/magic-modules/assets/magic-modules.svg"}},"url":"http://localhost:4000/magic-modules/"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/magic-modules/assets/css/style.css?v=3e83c39f101edcfa2ca496417df50f00561c7222">
    <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/magic-modules/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1><a href="http://localhost:4000/magic-modules/">Magic Modules</a></h1>

        
          <img src="/magic-modules/assets/magic-modules.svg" alt="Logo" />
        

        <p>Information about contributing to Magic Modules and using it to generate downstream code.</p>


        <ul>
          <li><a href="/magic-modules/">Home</a></li>
          <li><a href="/magic-modules/mmv1/">MMv1 resources</a></li>
          <li><a href="/magic-modules/handwritten/">Handwritten resources</a></li>
        </ul>
      </header>
      <section>

      <h1 id="magic-modules">Magic Modules</h1>

<p>Magic Modules is a code generator and CI system that’s used to develop the Terraform providers
for Google Platform, <a href="https://github.com/hashicorp/terraform-provider-google"><code class="language-plaintext highlighter-rouge">google</code></a> (or TPG) and
<a href="https://github.com/hashicorp/terraform-provider-google-beta"><code class="language-plaintext highlighter-rouge">google-beta</code></a> (or TPGB).</p>

<p>Magic Modules allows contributors to make changes against a single codebase and develop both
provider versions simultaneously. After sending a pull request against this repository, the
<code class="language-plaintext highlighter-rouge">modular-magician</code> robot user will manage (most of) the heavy lifting from generating a
complete output, running presubmit tests, and updating the providers following your
change.</p>

<hr />

<ul>
  <li><a href="#magic-modules">Magic Modules</a>
    <ul>
      <li><a href="#getting-started-with-magic-modules">Getting Started with Magic Modules</a>
        <ul>
          <li><a href="#cloning-terraform-providers">Cloning Terraform providers</a></li>
          <li><a href="#setting-up-a-container-based-environment">Setting up a container-based environment</a></li>
          <li><a href="#preparing-your-environment-manually">Preparing your environment manually</a></li>
          <li><a href="#generating-the-terraform-providers">Generating the Terraform Providers</a></li>
          <li><a href="#testing">Testing</a>
            <ul>
              <li><a href="#using-released-terraform-binary-with-local-provider-binary">Using released terraform binary with local provider binary</a></li>
            </ul>
          </li>
          <li><a href="#submitting-a-pr">Submitting a PR</a></li>
        </ul>
      </li>
      <li><a href="#contributing">Contributing</a>
        <ul>
          <li><a href="#general-contributing-steps">General contributing steps</a></li>
          <li><a href="#detailed-contributing-guide">Detailed contributing guide</a></li>
        </ul>
      </li>
      <li><a href="#glossary">Glossary</a></li>
      <li><a href="#other-resources">Other Resources</a></li>
    </ul>
  </li>
</ul>

<hr />

<h2 id="getting-started-with-magic-modules">Getting Started with Magic Modules</h2>

<h3 id="cloning-terraform-providers">Cloning Terraform providers</h3>

<p>If you’re generating the Terraform providers (<code class="language-plaintext highlighter-rouge">google</code> and <code class="language-plaintext highlighter-rouge">google-beta</code>),
you’ll need to check out the repo(s) you’re generating in your GOPATH. For
example:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/hashicorp/terraform-provider-google.git <span class="nv">$GOPATH</span>/src/github.com/hashicorp/terraform-provider-google
git clone https://github.com/hashicorp/terraform-provider-google-beta.git <span class="nv">$GOPATH</span>/src/github.com/hashicorp/terraform-provider-google-beta
</code></pre></div></div>

<p>Or run the following to check them all out:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./tools/bootstrap
</code></pre></div></div>

<p>Magic Modules won’t work with old versions of the Terraform provider repos. If
you’re encountering issues with vendoring and paths, make sure both MM and the
Terraform provider are running on up to date copies of <code class="language-plaintext highlighter-rouge">main</code>.</p>

<h3 id="setting-up-a-container-based-environment">Setting up a container-based environment</h3>

<p><em>NOTE</em> this approach is in beta and still collecting feedback. Please file an issue if you encounter challenges, and try pulling the latest container (see command below) first to see if any recent changes may fix you.</p>

<p>You do not need to run these instructions if you are setting up your environment manually.</p>

<p>For ease of contribution, we provide containers with the required dependencies for building magic-modules, as well as the option to build them yourself.</p>

<p>You can work with containers with either <a href="https://podman.io/">Podman</a> or <a href="https://docker.io/">Docker</a>.</p>

<p><a href="scripts/make-in-container.sh">scripts/make-in-container.sh</a> includes all the
instructions to build and run containers by hand. Refer to the script for
individual steps, but for most users you only have to run the script directly, as a replacement for make.</p>

<p>Here is an example of how to build Terraform (after <a href="#cloning-terraform-providers">cloning the provider</a>):</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./scripts/make-in-container.sh <span class="se">\</span>
  terraform <span class="nv">VERSION</span><span class="o">=</span>ga <span class="se">\</span>
  <span class="nv">OUTPUT_PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$GOPATH</span><span class="s2">/src/github.com/hashicorp/terraform-provider-google"</span>
</code></pre></div></div>

<p>Generally, you can replace any reference to <code class="language-plaintext highlighter-rouge">make</code> in this guide with <code class="language-plaintext highlighter-rouge">scripts/make-in-container.sh</code>.</p>

<h3 id="preparing-your-environment-manually">Preparing your environment manually</h3>

<p><em>NOTE</em>: you don’t need to run these instructions if you are using a container-based environment.</p>

<p>You can also build magic-modules
within your local development environment.</p>

<p>To get started, you’ll need:</p>

<ul>
  <li>Go
    <ul>
      <li>If you’re using a Mac with Homebrew installed, you can follow these
instructions to set up Go: <a href="https://www.youtube.com/watch?v=VQVyvulNnzs">YouTube video</a>.</li>
      <li>If you’re using Cloud Shell, Go is already installed.</li>
    </ul>
  </li>
  <li>Ruby 2.6.0
    <ul>
      <li>You can use <a href="https://github.com/rbenv/rbenv"><code class="language-plaintext highlighter-rouge">rbenv</code></a> to manage your Ruby version(s).</li>
      <li>To install <code class="language-plaintext highlighter-rouge">rbenv</code>:
        <ul>
          <li>Homebrew: run <code class="language-plaintext highlighter-rouge">brew install rbenv ruby-build</code></li>
          <li>Debian, Ubuntu, and their derivatives: run <code class="language-plaintext highlighter-rouge">sudo apt install rbenv</code></li>
        </ul>
      </li>
      <li>Then run <code class="language-plaintext highlighter-rouge">rbenv install 2.6.0</code>.
        <ul>
          <li>For M1 Mac users, run <code class="language-plaintext highlighter-rouge">RUBY_CFLAGS="-Wno-error=implicit-function-declaration" rbenv install 2.6.0</code></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="https://github.com/bundler/bundler"><code class="language-plaintext highlighter-rouge">Bundler</code></a>
    <ul>
      <li>This can be installed with <code class="language-plaintext highlighter-rouge">gem install bundler</code></li>
    </ul>
  </li>
  <li>Gems for magic-modules
    <ul>
      <li>This can be installed with <code class="language-plaintext highlighter-rouge">cd mmv1 &amp;&amp; bundler install</code></li>
    </ul>
  </li>
  <li>Goimports
    <ul>
      <li>go install golang.org/x/tools/cmd/goimports / go install golang.org/x/tools/cmd/goimports@latest</li>
    </ul>
  </li>
  <li>Terraform
    <ul>
      <li><a href="https://learn.hashicorp.com/tutorials/terraform/install-cli">Install Terraform</a></li>
    </ul>
  </li>
  <li>If you are getting “Too many open files” ulimit needs to be raised.
    <ul>
      <li>Mac OSX: <code class="language-plaintext highlighter-rouge">ulimit -n 1000</code></li>
    </ul>
  </li>
</ul>

<p>Now, you can verify you’re ready with:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./tools/doctor
</code></pre></div></div>

<details><summary>Expected output:</summary>

```
Check for rbenv in path...
   found!
Checking ruby version...
2.6.0 (set by [PATH]/magic-modules/mmv1/.ruby-version)
Check for bundler in path...
   found!
Check for go in path...
   found!
Check for goimports in path...
   found!
Check for git in path...
   found!
```
</details>

<hr />

<h3 id="generating-the-terraform-providers">Generating the Terraform Providers</h3>

<p>Before making any changes, you can compile the Terraform provider you’re working
on by running the following command. If Magic Modules has been installed
correctly, you’ll get no errors.</p>

<p>The following commands should be run from the root directory of the repository.
OUTPUT_PATH should be set to the location of your provider repository, which is
recommended to be inside your GOPATH.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>magic-modules

make terraform <span class="nv">VERSION</span><span class="o">=</span>ga <span class="nv">OUTPUT_PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$GOPATH</span><span class="s2">/src/github.com/hashicorp/terraform-provider-google"</span>
make terraform <span class="nv">VERSION</span><span class="o">=</span>beta <span class="nv">OUTPUT_PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$GOPATH</span><span class="s2">/src/github.com/hashicorp/terraform-provider-google-beta"</span>

<span class="c"># Only generate a specific product (plus all common files)</span>
make terraform <span class="nv">VERSION</span><span class="o">=</span>ga <span class="nv">OUTPUT_PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$GOPATH</span><span class="s2">/src/github.com/hashicorp/terraform-provider-google"</span> <span class="nv">PRODUCT</span><span class="o">=</span>pubsub

<span class="c"># Only generate only a specific resources for a product</span>
make terraform <span class="nv">VERSION</span><span class="o">=</span>ga <span class="nv">OUTPUT_PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$GOPATH</span><span class="s2">/src/github.com/hashicorp/terraform-provider-google"</span> <span class="nv">PRODUCT</span><span class="o">=</span>pubsub <span class="nv">RESOURCE</span><span class="o">=</span>Topic
</code></pre></div></div>
<p>The <code class="language-plaintext highlighter-rouge">PRODUCT</code> variable values correspond to folder names in <code class="language-plaintext highlighter-rouge">mmv1/products</code> for generated resources. The <code class="language-plaintext highlighter-rouge">RESOURCE</code> variable value needs to match the name of the resource inside the <code class="language-plaintext highlighter-rouge">api.yaml</code> file for that product.</p>

<p>Handwritten files in <code class="language-plaintext highlighter-rouge">mmv1/third_party</code> are always compiled. If you are only working on common files or third_party code, you can pass a non-existent <code class="language-plaintext highlighter-rouge">PRODUCT</code>
to reduce the generation time.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Only generate common files, including all third_party code</span>
make terraform <span class="nv">VERSION</span><span class="o">=</span>ga <span class="nv">OUTPUT_PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$GOPATH</span><span class="s2">/src/github.com/hashicorp/terraform-provider-google"</span> <span class="nv">PRODUCT</span><span class="o">=</span>foo
</code></pre></div></div>

<p>It’s worth noting that Magic Modules will only generate new files when run
locally. The “Magician”- the Magic Modules CI system- handles deletion of old
files when creating PRs.</p>

<hr />

<h3 id="testing">Testing</h3>

<p>Once you’ve made changes to resource definition, you can run Magic Modules
to generate changes to your provider; see
<a href="#generating-the-terraform-providers">“Generating the Terraform Providers”</a>
above if you need a refresher. Once it’s generated, you should run the
tests to ensure your change work for the providers.</p>

<p>Tests generally assume the following environment variables must be set in order to run tests:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GOOGLE_PROJECT
GOOGLE_CREDENTIALS|GOOGLE_CLOUD_KEYFILE_JSON|GCLOUD_KEYFILE_JSON|GOOGLE_USE_DEFAULT_CREDENTIALS
GOOGLE_REGION
GOOGLE_ZONE
</code></pre></div></div>

<p>Note that the credentials you provide must be granted wide permissions on the specified project. These tests provision real resources, and require permission in order to do so. Most developers on the team grant their test service account <code class="language-plaintext highlighter-rouge">roles/editor</code> or <code class="language-plaintext highlighter-rouge">roles/owner</code> on their project. Additionally, to ensure that your tests are performed in a region and zone with wide support for GCP features, <code class="language-plaintext highlighter-rouge">GOOGLE_REGION</code> should be set to <code class="language-plaintext highlighter-rouge">us-central1</code> and <code class="language-plaintext highlighter-rouge">GOOGLE_ZONE</code> to <code class="language-plaintext highlighter-rouge">us-central1-a</code>.</p>

<p>Additional variable may be required for other tests, and should get flagged when running them by Go skipping the test and flagging in the output it was skipped, with a skip message explaining why. The most typical extra values required are those required for project creation:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GOOGLE_ORG
GOOGLE_BILLING_ACCOUNT
</code></pre></div></div>

<p>You can run tests against the provider you generated in the <code class="language-plaintext highlighter-rouge">OUTPUT_PATH</code> location. When running tests, specify which to run using <code class="language-plaintext highlighter-rouge">TESTARGS</code>, such as:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># for ga provider</span>
<span class="nb">cd</span> <span class="nv">$GOPATH</span>/src/github.com/hashicorp/terraform-provider-google
<span class="nv">TF_LOG</span><span class="o">=</span>TRACE make testacc <span class="nv">TEST</span><span class="o">=</span>./google <span class="nv">TESTARGS</span><span class="o">=</span><span class="s1">'-run=TestAccContainerNodePool_basic'</span> <span class="o">&gt;</span> output.log

<span class="c"># for beta provider</span>
<span class="nb">cd</span> <span class="nv">$GOPATH</span>/src/github.com/hashicorp/terraform-provider-google-beta
<span class="nv">TF_LOG</span><span class="o">=</span>TRACE make testacc <span class="nv">TEST</span><span class="o">=</span>./google-beta <span class="nv">TESTARGS</span><span class="o">=</span><span class="s1">'-run=TestAccContainerNodePool_basic'</span> <span class="o">&gt;</span> output.log
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">TESTARGS</code> variable is regexp-like, so multiple tests can be run in parallel by specifying a common substring of those tests (for example, <code class="language-plaintext highlighter-rouge">TestAccContainerNodePool</code> to run all node pool tests). There are 2000+ tests, and running all of them takes over 9 hours and requires a lot of GCP quota.</p>

<p>Note: <code class="language-plaintext highlighter-rouge">TF_LOG=TRACE</code> is optional; it <a href="https://www.terraform.io/docs/internals/debugging.html">enables verbose logging</a> during tests, including all API request/response cycles. <code class="language-plaintext highlighter-rouge">&gt; output.log</code> redirects the test output to a file for analysis, which is useful because <code class="language-plaintext highlighter-rouge">TRACE</code> logging can be extremely verbose.</p>

<p>Tests will use whatever version of the <code class="language-plaintext highlighter-rouge">terraform</code> binary is found on your path. To test with multiple versions of <code class="language-plaintext highlighter-rouge">terraform</code> core, you must run the tests multiple times with different versions. You can use <a href="https://github.com/tfutils/tfenv"><code class="language-plaintext highlighter-rouge">tfenv</code></a> to manage your system <code class="language-plaintext highlighter-rouge">terraform</code> versions.</p>

<h4 id="using-released-terraform-binary-with-local-provider-binary">Using released terraform binary with local provider binary</h4>

<p>After the provider code is generated into the location at <code class="language-plaintext highlighter-rouge">OUTPUT_PATH</code>, you need to build the code in your generated provider
to compile the provider binary:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> <span class="nv">$GOPATH</span>/src/github.com/hashicorp/terraform-provider-google
make build
</code></pre></div></div>

<p>Setup:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir</span> <span class="nt">-p</span> ~/.terraform.d/plugins/registry.terraform.io/hashicorp/google/5.0.0/darwin_arm64
<span class="nb">mkdir</span> <span class="nt">-p</span> ~/.terraform.d/plugins/registry.terraform.io/hashicorp/google-beta/5.0.0/darwin_arm64
<span class="nb">ln</span> <span class="nt">-s</span> <span class="nv">$GOPATH</span>/bin/terraform-provider-google ~/.terraform.d/plugins/registry.terraform.io/hashicorp/google/5.0.0/darwin_arm64/terraform-provider-google_v5.0.0
<span class="nb">ln</span> <span class="nt">-s</span> <span class="nv">$GOPATH</span>/bin/terraform-provider-google-beta ~/.terraform.d/plugins/registry.terraform.io/hashicorp/google-beta/5.0.0/darwin_arm64/terraform-provider-google-beta_v5.0.0
</code></pre></div></div>

<p>NOTE: Substitute your machine architecture for <code class="language-plaintext highlighter-rouge">darwin_arm64</code>, i.e. <code class="language-plaintext highlighter-rouge">darwin_amd64</code> or <code class="language-plaintext highlighter-rouge">linux_amd64</code></p>

<p>Once this setup is complete, terraform will automatically use the binaries generated by the <code class="language-plaintext highlighter-rouge">make build</code> commands in the <code class="language-plaintext highlighter-rouge">terraform-provider-google</code> and <code class="language-plaintext highlighter-rouge">terraform-provider-google-beta</code> repositories instead of downloading the latest versions. To undo this, you can run:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">rm</span> <span class="nt">-rf</span> ~/.terraform.d/plugins/registry.terraform.io/hashicorp/
</code></pre></div></div>

<p>For more information, check out Hashicorp’s documentation on the <a href="https://www.terraform.io/upgrade-guides/0-13.html#new-filesystem-layout-for-local-copies-of-providers">0.13+ filesystem layout</a>.</p>

<p>If multiple versions are available in a plugin directory (for example after <code class="language-plaintext highlighter-rouge">terraform providers mirror</code> is used), Terraform will pick the most up-to-date provider version within version constraints. As such, we recommend using a version that is several major versions ahead for your local copy of the provider, such as <code class="language-plaintext highlighter-rouge">5.0.0</code>.</p>

<hr />

<h3 id="submitting-a-pr">Submitting a PR</h3>

<p>Before creating a commit, if you’ve modified any .rb files, make sure you run
<code class="language-plaintext highlighter-rouge">rake test</code>! That will run rubocop to ensure that the code you’ve written will
pass Travis.</p>

<p>Once you’ve created your commit(s), you can submit the code normally as a PR in
the GitHub UI. The PR template includes some instructions to make sure we
generate good PR messages for the tools’ repo histories.</p>

<p>Once your PR is submitted, one of the Magic Modules maintainers will review it.
They’ll look over the code before running the “Magician”, the Magic Modules CI
system that generates PRs against each tool. Each review pass, your reviewer
will run the Magician again to update the PRs against the tools.</p>

<p>If there are multiple tools affected, that first reviewer will be the “primary”
reviewer, and for each other affected tool a maintainer for that specific tool
will make a pass. The primary reviewer will make it clear which other
maintainers need to review, and prompt them to review your code; you will
communicate primarily with the first reviewer.</p>

<p>Even when multiple tools are affected, this will generally be a quick look by
that maintainer with no changes needing to be made.</p>

<p>Once you’ve gotten approvals from the primary reviewer and the reviewers for
any affected tools, the primary reviewer will merge your changes.</p>

<hr />

<h2 id="contributing">Contributing</h2>

<h3 id="general-contributing-steps">General contributing steps</h3>

<ol>
  <li>Fork <code class="language-plaintext highlighter-rouge">Magic Modules</code> repository into your GitHub account if you haven’t done before.</li>
  <li>Check the <a href="https://github.com/hashicorp/terraform-provider-google/issues">issue tracker</a> to see whether your feature has already been requested.
    <ul>
      <li>if there’s an issue and it’s already has a dedicated assignee, it indicates that someone may have already started to work on a solution.</li>
      <li>otherwise, you’re welcome to work on the issue.</li>
    </ul>
  </li>
  <li>Check whether the resource you would like to work on already exists in the providers (<a href="https://github.com/hashicorp/terraform-provider-google"><code class="language-plaintext highlighter-rouge">google</code></a> / <a href="https://github.com/hashicorp/terraform-provider-google-beta"><code class="language-plaintext highlighter-rouge">google-beta</code></a> or <a href="https://registry.terraform.io/providers/hashicorp/google/latest/docs">check the website</a>).
    <ul>
      <li>If it exists, check the header of the downstream file to identify the type of tools used to generate the resource. For some resources, the code file, the test file and the documentation file may not be generated via the same tools.
        <ul>
          <li>Generated resources like <a href="https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/compute_address"><code class="language-plaintext highlighter-rouge">google_compute_address</code></a> can be identified by looking in their <a href="https://github.com/hashicorp/terraform-provider-google/blob/main/google/resource_compute_address.go"><code class="language-plaintext highlighter-rouge">Go source</code></a> for an <code class="language-plaintext highlighter-rouge">AUTO GENERATED CODE</code> header as well as a <code class="language-plaintext highlighter-rouge">Type</code>. “Generated resources” typically refers to just the <code class="language-plaintext highlighter-rouge">MMv1</code> type, and <code class="language-plaintext highlighter-rouge">DCL</code> type resources are considered “DCL-based”. (Currently DCL-related contribution are not supported)</li>
          <li>Handwritten resources like <a href="https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/container_cluster"><code class="language-plaintext highlighter-rouge">google_container_cluster</code></a> can be identified if they have source code present under the <a href="./mmv1/third_party/terraform/resources"><code class="language-plaintext highlighter-rouge">mmv1/third_party/terraform/resources</code></a> folder or by the absence of the <code class="language-plaintext highlighter-rouge">AUTO GENERATED CODE header</code> in their <a href="https://github.com/hashicorp/terraform-provider-google/blob/main/google/resource_container_cluster.go"><code class="language-plaintext highlighter-rouge">Go source</code></a>.</li>
        </ul>
      </li>
      <li>If not, decide which tool you would like to use to implement the resource.
        <ul>
          <li>MMv1 is strongly preferred over handwriting the resource unless the resource can not be generated.</li>
          <li>Currently, only handwritten datasources are supported.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Make the actual code change.
    <ul>
      <li>The <a href="#detailed-contributing-guide">Contribution Guide</a> below will guide you to the detailed instructions on how to make your change, based on the type of the change + the tool used to generate the code.</li>
    </ul>
  </li>
  <li>Build the providers that includes your change. Check <a href="#generating-the-terraform-providers">Generating the Terraform Providers</a> section for details on how to generate the providers locally.</li>
  <li>Test the feature against the providers you generated in the last step locally. Check <a href="#testing">Testing Guidance</a> for details on how to run provider test locally. (Testing the PR locally and pushing the commit to the PR only after the tests pass locally may significantly reduce review cycles)</li>
  <li>Push your changes to your <code class="language-plaintext highlighter-rouge">magic-modules</code> repo fork and send a pull request from that branch to the main branch on <code class="language-plaintext highlighter-rouge">magic-modules</code>. A reviewer will be assigned automatically to your PR. Check <a href="#submitting-a-PR">Submitting a PR</a> section for details on how to submit a PR.</li>
  <li>Wait until the the modules magician to generate downstream diff (which should takes about 15 mins after creating the PR) to make sure all changes are generated correctly in downstream repos.</li>
  <li>Wait for the VCR test results.
    <details><summary>Get to know general workflow for VCR tests</summary>

   1. You submit your change.
   1. The recorded tests are ran against your changes by the `modular-magician`. Tests will fail if:
      1. Your PR has changed the HTTP request values sent by the provider
      1. Your PR does not change the HTTP request values, but fails on the values returned in an old recording
      1. The recordings are out of sync with the merge-base of your PR, and an unrelated contributor's change has caused a false positive
   1. The `modular-magician` will leave a message indicating the number of passing and failing VCR tests. If there is a failure, the `modular-magician` user will leave a message indicating the "`Triggering VCR tests in RECORDING mode for the following tests that failed during VCR:`" marking which tests failed.
      1. If a test does not appear related, it probably isn't!
   1. The `modular-magician` will kick off a second test run targeting only the failed tests, this time hitting the live GCP APIs. If there are tests that fail at this point, a message stating `Tests failed during RECORDING mode:` will be left indicating the tests.
      1. If a test that appears to be related to your change has failed here, it's likely your change has introduced an issue. You can view the debug logs for the test by clicking the "view" link beside the test case to attempt to debug what's going wrong.
      1. If a test appears to be completely unrelated has failed, it's possible that a GCP API has changed in a way that broke the provider or our environment capped on a quota.
</details>

    <p>Where possible, take a look at the logs and see if you can figure out what needs to be fixed related to your change.
The false positive rate on these tests is extremely high between changes in the API, Cloud Build bugs, and eventual consistency issues in test recordings so we don’t expect contributors to wholly interpret the results- that’s the responsibility of your reviewer.</p>
  </li>
  <li>If your assigned reviewers does not reply/ review within a week, gently ping them on github.</li>
  <li>After your PR is merged, it will be released to customers in around a week or two.</li>
</ol>

<hr />

<h3 id="detailed-contributing-guide">Detailed contributing guide</h3>

<table>
  <thead>
    <tr>
      <th>Task</th>
      <th>Section</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Resource</td>
      <td><a href="./handwritten/#resource">handwritten</a> / <a href="./mmv1/#resource">mmv1</a></td>
    </tr>
    <tr>
      <td>Datasource</td>
      <td><a href="./handwritten/#datasource">handwritten</a> / (only handwritten datasources are supported)</td>
    </tr>
    <tr>
      <td>IAM resource</td>
      <td><a href="./handwritten/#iam-resource">handwritten</a> / <a href="./mmv1/#iam-resource">mmv1</a></td>
    </tr>
    <tr>
      <td>Testing</td>
      <td><a href="./handwritten/#testing">handwritten</a> / <a href="./mmv1/#testing">mmv1</a></td>
    </tr>
    <tr>
      <td>Documentation</td>
      <td><a href="./handwritten/#documentation">handwritten</a> / <a href="./mmv1/#documentation">mmv1</a></td>
    </tr>
    <tr>
      <td>Beta feature</td>
      <td><a href="./handwritten/#beta-feature">handwritten</a> / <a href="./mmv1/#beta-feature">mmv1</a></td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="glossary">Glossary</h2>

<p>The maintainers of the repository will tend to use specific jargon to describe
concepts related to Magic Modules; here’s a quick reference of what some of
those terms are.</p>

<table>
  <thead>
    <tr>
      <th>Term</th>
      <th>Definition</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>tool</td>
      <td>One of the OSS DevOps projects Magic Modules generates GCP support in</td>
    </tr>
    <tr>
      <td>provider</td>
      <td>Synonym for tool as referred to inside the codebase</td>
    </tr>
    <tr>
      <td>downstream(s)</td>
      <td>A PR created by the Magician against a tool</td>
    </tr>
    <tr>
      <td>upstream</td>
      <td>A PR created against Magic Modules or the Magic Modules repo</td>
    </tr>
    <tr>
      <td>The Magician</td>
      <td>The Magic Modules CI system that drives the GitHub robot <code class="language-plaintext highlighter-rouge">modular-magician</code></td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="other-resources">Other Resources</h2>

<ul>
  <li><a href="https://www.terraform.io/plugin">Extending Terraform</a>
    <ul>
      <li><a href="https://www.terraform.io/plugin/how-terraform-works">How Terraform Works</a></li>
      <li><a href="https://learn.hashicorp.com/collections/terraform/providers?utm_source=WEBSITE&amp;utm_medium=WEB_IO&amp;utm_offer=ARTICLE_PAGE&amp;utm_content=DOCS">Writing Custom Providers / Calling APIs with Terraform Providers</a></li>
    </ul>
  </li>
  <li><a href="https://www.terraform.io/docs/glossary">Terraform Glossary</a></li>
</ul>


      </section>
      <footer>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="/magic-modules/assets/js/scale.fix.js"></script>
  </body>
</html>