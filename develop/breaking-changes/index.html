<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Types of breaking changes # A &ldquo;breaking change&rdquo; is any change that requires an end user to modify a previously-valid configuration after a provider upgrade. In this context, a &ldquo;valid configuration&rdquo; is one that:
Is considered syntactically correct by terraform validate Does not return an error during terraform apply Creates, updates, deletes, or does not modify resources Only manages resources that have not been altered with other tools, such as gcloud or Cloud Console."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content="Types of breaking changes"><meta property="og:description" content="Types of breaking changes # A &ldquo;breaking change&rdquo; is any change that requires an end user to modify a previously-valid configuration after a provider upgrade. In this context, a &ldquo;valid configuration&rdquo; is one that:
Is considered syntactically correct by terraform validate Does not return an error during terraform apply Creates, updates, deletes, or does not modify resources Only manages resources that have not been altered with other tools, such as gcloud or Cloud Console."><meta property="og:type" content="article"><meta property="og:url" content="https://googlecloudplatform.github.io/magic-modules/develop/breaking-changes/"><meta property="article:section" content="develop"><meta property="article:modified_time" content="2023-08-18T11:13:02-07:00"><title>Types of breaking changes | Magic Modules</title><link rel=manifest href=/magic-modules/manifest.json><link rel=icon href=/magic-modules/favicon.png type=image/x-icon><link rel=stylesheet href=/magic-modules/book.min.33a48f5432973b8ff9a82679d9e45d67f2c15d4399bd2829269455cfe390b5e8.css integrity="sha256-M6SPVDKXO4/5qCZ52eRdZ/LBXUOZvSgpJpRVz+OQteg=" crossorigin=anonymous><script defer src=/magic-modules/flexsearch.min.js></script>
<script defer src=/magic-modules/en.search.min.771ffa3a545c91c29f129a3dd31907538c9d90d02c1d004feecfbe92e6de5c49.js integrity="sha256-dx/6OlRckcKfEpo90xkHU4ydkNAsHQBP7s++kubeXEk=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/magic-modules/><img src=/magic-modules/magic-modules.svg alt=Logo><span>Magic Modules</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/magic-modules/>Overview</a></li></ul><ul><li><span>Get started</span><ul><li><a href=/magic-modules/get-started/generate-providers/>Generate the providers</a></li><li><a href=/magic-modules/get-started/how-magic-modules-works/>How Magic Modules works</a></li><li><a href=/magic-modules/get-started/contribution-process/>Contribution process</a></li><li><a href=/magic-modules/get-started/provider-documentation/>Provider documentation</a></li></ul></li><li><span>Develop</span><ul><li><a href=/magic-modules/develop/resource/>Add or modify a resource</a></li><li><a href=/magic-modules/develop/test/>Add resource tests</a></li><li><a href=/magic-modules/develop/add-handwritten-datasource/>Add a datasource</a></li><li><a href=/magic-modules/develop/add-handwritten-datasource-documentation/>Add datasource documentation</a></li><li><a href=/magic-modules/develop/promote-to-ga/>Promote to GA</a></li><li><a href=/magic-modules/develop/run-tests/>Run tests</a></li><li><a href=/magic-modules/develop/make-a-breaking-change/>Make a breaking change</a></li><li><a href=/magic-modules/develop/breaking-changes/ class=active>Types of breaking changes</a></li></ul></li><li><a href=/magic-modules/best-practices/>Best practices</a><ul></ul></li><li><span>Contribute</span><ul><li><a href=/magic-modules/contribute/release-notes/>Write release notes</a></li><li><a href=/magic-modules/contribute/review-pr/>Review a PR</a></li></ul></li><li><span>Reference</span><ul><li><a href=/magic-modules/reference/make-commands/>make commands</a></li><li><a href=https://github.com/GoogleCloudPlatform/magic-modules/blob/main/mmv1/api/resource.rb target=_blank rel=noopener>Resource YAML reference ↗</a></li><li><a href=https://github.com/GoogleCloudPlatform/magic-modules/blob/main/mmv1/api/type.rb target=_blank rel=noopener>Field YAML reference ↗</a></li><li><a href=https://github.com/GoogleCloudPlatform/magic-modules/blob/main/mmv1/api/resource/iam_policy.rb target=_blank rel=noopener>IAM policy YAML reference ↗</a></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/magic-modules/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Types of breaking changes</strong>
<label for=toc-control><img src=/magic-modules/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#provider-level-breaking-changes>Provider-level breaking changes</a></li><li><a href=#resource-level-breaking-changes>Resource-level breaking changes</a></li><li><a href=#field-level-breaking-changes>Field-level breaking changes</a><ul><li><a href=#making-validation-more-strict>Making validation more strict</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=types-of-breaking-changes>Types of breaking changes
<a class=anchor href=#types-of-breaking-changes>#</a></h1><p>A &ldquo;breaking change&rdquo; is any change that requires an end user to modify a
previously-valid configuration after a provider upgrade. In this context,
a &ldquo;valid configuration&rdquo; is one that:</p><ul><li>Is considered syntactically correct by <code>terraform validate</code></li><li>Does not return an error during <code>terraform apply</code></li><li>Creates, updates, deletes, or does not modify resources</li><li>Only manages resources that have not been altered with other tools,
such as <code>gcloud</code> or Cloud Console.</li></ul><p>This document lists many types of breaking changes but may not be entirely
comprehensive. Some types of changes that would normally be &ldquo;breaking&rdquo; may
have specific mitigating circumstances that make them non-breaking.</p><p>For more information, see
<a href=https://googlecloudplatform.github.io/magic-modules/develop/make-a-breaking-change/>Make a breaking change</a>.</p><h2 id=provider-level-breaking-changes>Provider-level breaking changes
<a class=anchor href=#provider-level-breaking-changes>#</a></h2><ul><li><a name=provider-config-fundamental></a>Changing fundamental provider behavior such as:<ul><li>authentication</li><li>environment variable usage</li><li>restricting retry behavior</li></ul></li></ul><h2 id=resource-level-breaking-changes>Resource-level breaking changes
<a class=anchor href=#resource-level-breaking-changes>#</a></h2><ul><li><a name=resource-map-resource-removal-or-rename></a>Removing or renaming a resource
or datasource</li><li><a name=resource-id></a> Changing resource ID format<ul><li>Terraform uses resource ID to read resource state from the API. Modification of
the ID format will break the ability to parse the IDs from any deployments.</li></ul></li><li><a name=resource-import-format></a> Removing or altering resource import ID formats<ul><li>Automation written by end users may rely on specific import formats.</li></ul></li><li>Major changes to default resource behavior<ul><li>For example, changing the default implementation of resource deletion</li></ul></li></ul><h2 id=field-level-breaking-changes>Field-level breaking changes
<a class=anchor href=#field-level-breaking-changes>#</a></h2><ul><li><a name=resource-schema-field-removal-or-rename></a>Removing or renaming a field</li><li><a name=field-changing-type></a> Changing field data type<ul><li>For example, changing a String to an Integer</li></ul></li><li><a name=field-optional-to-required></a> Making an optional field required or adding a new required field</li><li><a name=field-becoming-computed></a> Making a settable field read-only<ul><li>For MMv1 resources, adding <code>output: true</code> to an existing field.</li><li>For handwritten resources, adding <code>Computed: true</code> to a field that does not have <code>Optional: true</code> set.</li></ul></li><li><a name=field-oc-to-c></a> Removing support for API-side defaults<ul><li>For MMv1 resources, removing <code>default_from_api: true</code>.</li><li>For handwritten resources, altering a field schema with <code>Computed: true</code> + <code>Optional: true</code>
to only have <code>Optional: true</code>.</li></ul></li><li><a name=field-changing-default-value></a> Adding or changing a default value<ul><li><p>Default values in Terraform are used to replace null values in configuration at
plan/apply time and <strong>do not</strong> respect previously-configured values by the user.
Even in major releases, these changes are often undesirable, as their impact is extremely broad.</p><p>When a default is changed, every user that has not specified an explicit value in their
configuration will see Terraform propose changing the value of the field <strong>including</strong>
if the change will destroy and recreate the resource due to changing an immutable value.
Default changes in the provider are comparable in impact to default changes in an API,
and modifying examples and modules may achieve the intended effect with a smaller blast radius.</p></li></ul></li><li><a name=field-changing-data-format></a> Modifying how field data is stored in state<ul><li>For example, changing the case of a value returned by the API in a flattener or decorder</li></ul></li><li>Removing diff suppression from a field.<ul><li>For MMv1 resources, removing <code>diff_suppress_func</code> from a field.</li><li>For handwritten resources, removing <code>DiffSuppressFunc</code> from a field.</li></ul></li><li>Removing update support from a field.</li></ul><h3 id=making-validation-more-strict>Making validation more strict
<a class=anchor href=#making-validation-more-strict>#</a></h3><ul><li><a name=field-growing-min></a> Increasing the minimum number of items in an array<ul><li>For MMv1 resources, increasing <code>min_size</code> on an Array field.</li><li>For handwritten resources, increasing <code>MinItems</code> on an Array field.</li></ul></li><li><a name=field-shrinking-max></a> Decreasing the maximum number of items in an array<ul><li>For MMv1 resources, decreasing <code>max_size</code> on an Array field.</li><li>For handwritten resources, decreasing <code>MaxItems</code> on an Array field.</li></ul></li><li>Adding validation to a field that previously had no validation<ul><li>For MMv1 resources, adding <code>validation</code> to a field.</li><li>For handwritten resources, adding <code>ValidateFunc</code> to a field.</li></ul></li></ul></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/GoogleCloudPlatform/magic-modules/commit/5c5992da09007ebb5f947d71db94c291d9c4652a title='Last modified by Stephen Lewis (Burrows) | August 18, 2023' target=_blank rel=noopener><img src=/magic-modules/svg/calendar.svg class=book-icon alt=Calendar>
<span>August 18, 2023</span></a></div><div><a class="flex align-center" href="https://github.com/hashicorp/terraform-provider-google/issues/new?assignees=&labels=technical-debt,documentation&projects=&title=MM%20docsite%20issue%20in%20content/develop%2fbreaking-changes.md&template=11_developer_productivity.md" target=_blank rel=noopener><img src=/magic-modules/report.svg class=book-icon alt=Edit>
<span>Report documentation issue</span></a></div><div><a class="flex align-center" href=https://github.com/GoogleCloudPlatform/magic-modules/edit/main/docs/content/develop/breaking-changes.md target=_blank rel=noopener><img src=/magic-modules/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#provider-level-breaking-changes>Provider-level breaking changes</a></li><li><a href=#resource-level-breaking-changes>Resource-level breaking changes</a></li><li><a href=#field-level-breaking-changes>Field-level breaking changes</a><ul><li><a href=#making-validation-more-strict>Making validation more strict</a></li></ul></li></ul></nav></div></aside></main></body></html>