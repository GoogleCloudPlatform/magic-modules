<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Add or modify a resource # This page describes how to add a new resource to the google or google-beta Terraform provider using MMv1 and/or handwritten code.
For more information about types of resources and the generation process overall, see How Magic Modules works.
Before you begin # Complete the Generate the providers quickstart to set up your environment and your Google Cloud project. Ensure that your magic-modules, terraform-provider-google, and terraform-provider-google-beta repositories are up to date."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content="Add or modify a resource"><meta property="og:description" content="Add or modify a resource # This page describes how to add a new resource to the google or google-beta Terraform provider using MMv1 and/or handwritten code.
For more information about types of resources and the generation process overall, see How Magic Modules works.
Before you begin # Complete the Generate the providers quickstart to set up your environment and your Google Cloud project. Ensure that your magic-modules, terraform-provider-google, and terraform-provider-google-beta repositories are up to date."><meta property="og:type" content="article"><meta property="og:url" content="https://googlecloudplatform.github.io/magic-modules/develop/resource/"><meta property="article:section" content="develop"><meta property="article:modified_time" content="2024-05-15T15:32:13-07:00"><title>Add or modify a resource | Magic Modules</title><link rel=manifest href=/magic-modules/manifest.json><link rel=icon href=/magic-modules/favicon.png type=image/x-icon><link rel=stylesheet href=/magic-modules/book.min.33a48f5432973b8ff9a82679d9e45d67f2c15d4399bd2829269455cfe390b5e8.css integrity="sha256-M6SPVDKXO4/5qCZ52eRdZ/LBXUOZvSgpJpRVz+OQteg=" crossorigin=anonymous><script defer src=/magic-modules/flexsearch.min.js></script>
<script defer src=/magic-modules/en.search.min.0f5abebea7e0cb821afa4dd8a42c30ed905606d53566265ff978a772a5633c95.js integrity="sha256-D1q+vqfgy4Ia+k3YpCww7ZBWBtU1ZiZf+XincqVjPJU=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/magic-modules/><img src=/magic-modules/magic-modules.svg alt=Logo><span>Magic Modules</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/magic-modules/>Overview</a></li></ul><ul><li><span>Get started</span><ul><li><a href=/magic-modules/get-started/generate-providers/>Generate the providers</a></li><li><a href=/magic-modules/get-started/how-magic-modules-works/>How Magic Modules works</a></li><li><a href=/magic-modules/get-started/contribution-process/>Contribution process</a></li></ul></li><li><span>Develop</span><ul><li><a href=/magic-modules/develop/resource/ class=active>Add or modify a resource</a></li><li><a href=/magic-modules/develop/field-reference/>MMv1 field reference</a></li><li><a href=/magic-modules/develop/custom-code/>Add custom resource code</a></li><li><a href=/magic-modules/develop/add-handwritten-datasource/>Add a datasource</a></li><li><a href=/magic-modules/develop/promote-to-ga/>Promote to GA</a></li><li><a href=/magic-modules/develop/permadiff/>Fix a permadiff</a></li><li><input type=checkbox id=section-9ccce47fb686ac21da7c5aafec70c7aa class=toggle>
<label for=section-9ccce47fb686ac21da7c5aafec70c7aa class="flex justify-between"><a role=button>Test</a></label><ul><li><a href=/magic-modules/develop/test/test/>Add resource tests</a></li><li><a href=/magic-modules/develop/test/run-tests/>Run tests</a></li></ul></li><li><input type=checkbox id=section-74c6da531f3d2c4b4f43bdae497559e2 class=toggle>
<label for=section-74c6da531f3d2c4b4f43bdae497559e2 class="flex justify-between"><a role=button>Breaking changes</a></label><ul><li><a href=/magic-modules/develop/breaking-changes/breaking-changes/>Types of breaking changes</a></li><li><a href=/magic-modules/develop/breaking-changes/make-a-breaking-change/>Make a breaking change</a></li></ul></li><li><a href=/magic-modules/develop/handwritten-docs-style-guide/>Handwritten docs style guide</a></li></ul></li><li><a href=/magic-modules/best-practices/>Best practices</a><ul></ul></li><li><span>Contribute</span><ul><li><a href=/magic-modules/contribute/create-pr/>Create a pull request</a></li><li><a href=/magic-modules/contribute/release-notes/>Write release notes</a></li><li><a href=/magic-modules/contribute/review-pr/>Review a pull request</a></li></ul></li><li><span>Reference</span><ul><li><a href=/magic-modules/reference/make-commands/>make commands</a></li><li><a href=https://github.com/GoogleCloudPlatform/magic-modules/blob/main/mmv1/api/resource.rb target=_blank rel=noopener>Resource YAML reference ↗</a></li><li><a href=https://github.com/GoogleCloudPlatform/magic-modules/blob/main/mmv1/api/resource/iam_policy.rb target=_blank rel=noopener>IAM policy YAML reference ↗</a></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/magic-modules/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Add or modify a resource</strong>
<label for=toc-control><img src=/magic-modules/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#before-you-begin>Before you begin</a></li><li><a href=#add-a-resource>Add a resource</a></li><li><a href=#add-fields>Add fields</a></li><li><a href=#add-iam-support>Add IAM support</a></li><li><a href=#add-documentation>Add documentation</a></li><li><a href=#whats-next>What&rsquo;s next?</a></li></ul></nav></aside></header><article class=markdown><h1 id=add-or-modify-a-resource>Add or modify a resource
<a class=anchor href=#add-or-modify-a-resource>#</a></h1><p>This page describes how to add a new resource to the <code>google</code> or <code>google-beta</code> Terraform provider using MMv1 and/or handwritten code.</p><p>For more information about types of resources and the generation process overall, see <a href=https://googlecloudplatform.github.io/magic-modules/get-started/how-magic-modules-works/>How Magic Modules works</a>.</p><h2 id=before-you-begin>Before you begin
<a class=anchor href=#before-you-begin>#</a></h2><ol><li>Complete the <a href=https://googlecloudplatform.github.io/magic-modules/get-started/generate-providers/>Generate the providers</a> quickstart to set up your environment and your Google Cloud project.</li><li>Ensure that your <code>magic-modules</code>, <code>terraform-provider-google</code>, and <code>terraform-provider-google-beta</code> repositories are up to date.<pre tabindex=0><code>cd ~/magic-modules
git checkout main &amp;&amp; git clean -f . &amp;&amp; git checkout -- . &amp;&amp; git pull
cd $GOPATH/src/github.com/hashicorp/terraform-provider-google
git checkout main &amp;&amp; git clean -f . &amp;&amp; git checkout -- . &amp;&amp; git pull
cd $GOPATH/src/github.com/hashicorp/terraform-provider-google-beta
git checkout main &amp;&amp; git clean -f . &amp;&amp; git checkout -- . &amp;&amp; git pull
</code></pre></li></ol><h2 id=add-a-resource>Add a resource
<a class=anchor href=#add-a-resource>#</a></h2><div class=book-tabs><input type=radio class=toggle name=tabs-resource id=tabs-resource-0 checked>
<label for=tabs-resource-0>MMv1</label><div class="book-tabs-content markdown-inner"><ol><li><p>Using an editor of your choice, in the appropriate <a href=https://googlecloudplatform.github.io/magic-modules/get-started/how-magic-modules-works/#mmv1>product folder</a>, create a file called <code>RESOURCE_NAME.yaml</code>. Replace <code>RESOURCE_NAME</code> with the name of the API resource you are adding support for. For example, a configuration file for <a href=https://cloud.google.com/apigee/docs/reference/apis/apigee/rest/v1/organizations.instances.natAddresses>NatAddress</a> would be called <code>NatAddress.yaml</code>.</p></li><li><p>Copy the following template into the new file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># Copyright 2024 Google Inc.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Licensed under the Apache License, Version 2.0 (the &#34;License&#34;);</span>
</span></span><span style=display:flex><span><span style=color:#75715e># you may not use this file except in compliance with the License.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># You may obtain a copy of the License at</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#     http://www.apache.org/licenses/LICENSE-2.0</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Unless required by applicable law or agreed to in writing, software</span>
</span></span><span style=display:flex><span><span style=color:#75715e># distributed under the License is distributed on an &#34;AS IS&#34; BASIS,</span>
</span></span><span style=display:flex><span><span style=color:#75715e># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># See the License for the specific language governing permissions and</span>
</span></span><span style=display:flex><span><span style=color:#75715e># limitations under the License.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>--- !<span style=color:#ae81ff>ruby/object:Api::Resource</span>
</span></span><span style=display:flex><span><span style=color:#75715e># API resource name</span>
</span></span><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#e6db74>&#39;ResourceName&#39;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Resource description for the provider documentation.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>description</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  RESOURCE_DESCRIPTION</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>references</span>: !<span style=color:#ae81ff>ruby/object:Api::Resource::ReferenceLinks</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>guides</span>:
</span></span><span style=display:flex><span>   <span style=color:#75715e># Link to quickstart in the API&#39;s Guides section. For example:</span>
</span></span><span style=display:flex><span>   <span style=color:#75715e># &#39;Create and connect to a database&#39;: &#39;https://cloud.google.com/alloydb/docs/quickstart/create-and-connect&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#39;QUICKSTART_TITLE&#39;</span>: <span style=color:#e6db74>&#39;QUICKSTART_URL&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Link to the REST API reference for the resource. For example,</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># https://cloud.google.com/alloydb/docs/reference/rest/v1/projects.locations.backups</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>api</span>: <span style=color:#e6db74>&#39;API_REFERENCE_URL&#39;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Marks the resource as beta-only. Ensure a beta version block is present in</span>
</span></span><span style=display:flex><span><span style=color:#75715e># provider.yaml.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># min_version: beta</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Inserts styled markdown into the header of the resource&#39;s page in the</span>
</span></span><span style=display:flex><span><span style=color:#75715e># provider documentation.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># docs: !ruby/object:Provider::Terraform::Docs</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#   warning: |</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#     MULTILINE_WARNING_MARKDOWN</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#   note: |</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#     MULTILINE_NOTE_MARKDOWN</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># URL for the resource&#39;s standard List method. https://google.aip.dev/132</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Terraform field names enclosed in double curly braces are replaced with</span>
</span></span><span style=display:flex><span><span style=color:#75715e># the field values from the resource at runtime.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>base_url</span>: <span style=color:#e6db74>&#39;projects/{{project}}/locations/{{location}}/resourcenames&#39;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># URL for the resource&#39;s standard Get method. https://google.aip.dev/131</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Terraform field names enclosed in double curly braces are replaced with</span>
</span></span><span style=display:flex><span><span style=color:#75715e># the field values from the resource at runtime.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>self_link</span>: <span style=color:#e6db74>&#39;projects/{{project}}/locations/{{location}}/resourcenames/{{name}}&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># If true, the resource and all its fields are considered immutable - that is,</span>
</span></span><span style=display:flex><span><span style=color:#75715e># only creatable, not updatable. Individual fields can override this if they</span>
</span></span><span style=display:flex><span><span style=color:#75715e># have a custom update method in the API.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># immutable: true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Overrides one or more timeouts, in minutes. All timeouts default to 20.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># timeouts: !ruby/object:Api::Timeouts</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#   insert_minutes: 20 </span>
</span></span><span style=display:flex><span><span style=color:#75715e>#   update_minutes: 20 </span>
</span></span><span style=display:flex><span><span style=color:#75715e>#   delete_minutes: 20 </span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># URL for the resource&#39;s standard Create method, including query parameters.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># https://google.aip.dev/133</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Terraform field names enclosed in double curly braces are replaced with</span>
</span></span><span style=display:flex><span><span style=color:#75715e># the field values from the resource at runtime.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>create_url</span>: <span style=color:#e6db74>&#39;projects/{{project}}/locations/{{location}}/resourcenames?resourceId={{name}}&#39;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Overrides the HTTP verb used to create a new resource.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Allowed values: :POST, :PUT, :PATCH. Default: :POST</span>
</span></span><span style=display:flex><span><span style=color:#75715e># create_verb: :POST</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Overrides the URL for the resource&#39;s standard Update method. (If unset, the</span>
</span></span><span style=display:flex><span><span style=color:#75715e># self_link URL is used by default.) https://google.aip.dev/134</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Terraform field names enclosed in double curly braces are replaced with</span>
</span></span><span style=display:flex><span><span style=color:#75715e># the field values from the resource at runtime.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># update_url: &#39;projects/{{project}}/locations/{{location}}/resourcenames/{{name}}&#39;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># The HTTP verb used to update a resource. Allowed values: :POST, :PUT, :PATCH. Default: :PUT.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>update_verb</span>: :<span style=color:#ae81ff>PATCH</span>
</span></span><span style=display:flex><span><span style=color:#75715e># If true, the resource sets an `updateMask` query parameter listing modified</span>
</span></span><span style=display:flex><span><span style=color:#75715e># fields when updating the resource. If false, it does not.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>update_mask</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Overrides the URL for the resource&#39;s standard Delete method. (If unset, the</span>
</span></span><span style=display:flex><span><span style=color:#75715e># self_link URL is used by default.) https://google.aip.dev/135</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Terraform field names enclosed in double curly braces are replaced with</span>
</span></span><span style=display:flex><span><span style=color:#75715e># the field values from the resource at runtime.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># delete_url: &#39;projects/{{project}}/locations/{{location}}/resourcenames/{{name}}&#39;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Overrides the HTTP verb used to delete a resource.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Allowed values: :POST, :PUT, :PATCH, :DELETE. Default: :DELETE</span>
</span></span><span style=display:flex><span><span style=color:#75715e># delete_verb: :DELETE</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># If true, code for handling long-running operations is generated along with</span>
</span></span><span style=display:flex><span><span style=color:#75715e># the resource. If false, that code is not generated.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>autogen_async</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Sets parameters for handling operations returned by the API.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>async</span>: !<span style=color:#ae81ff>ruby/object:Api::OpAsync</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Overrides which API calls return operations. Default: [&#39;create&#39;,</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># &#39;update&#39;, &#39;delete&#39;]</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># actions: [&#39;create&#39;, &#39;update&#39;, &#39;delete&#39;]</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>operation</span>: !<span style=color:#ae81ff>ruby/object:Api::OpAsync::Operation</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>base_url</span>: <span style=color:#e6db74>&#39;{{op_id}}&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># If true, the provider sets the resource&#39;s Terraform ID after the resource is created,</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># taking into account values that are set by the API at create time. This is only possible</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># when the completed operation&#39;s JSON includes the created resource in the &#34;response&#34; field.</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># If false (or unset), the provider sets the resource&#39;s Terraform ID before the resource is</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># created, based only on the resource configuration.</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># result: !ruby/object:Api::OpAsync::Result</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>#   resource_inside_response: true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># All resources (of all kinds) that share a mutex value block rather than</span>
</span></span><span style=display:flex><span><span style=color:#75715e># executing concurrent API requests.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Terraform field names enclosed in double curly braces are replaced with</span>
</span></span><span style=display:flex><span><span style=color:#75715e># the field values from the resource at runtime.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># mutex: RESOURCE_NAME/{{name}}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>parameters</span>:
</span></span><span style=display:flex><span>  - !<span style=color:#ae81ff>ruby/object:Api::Type::String</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#39;location&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>required</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>immutable</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>url_param_only</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>description</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      LOCATION_DESCRIPTION</span>      
</span></span><span style=display:flex><span>  - !<span style=color:#ae81ff>ruby/object:Api::Type::String</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#39;name&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>required</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>immutable</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>url_param_only</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>description</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      NAME_DESCRIPTION</span>      
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>properties</span>:
</span></span><span style=display:flex><span>  <span style=color:#75715e># Fields go here</span>
</span></span></code></pre></div></li><li><p>Modify the template as needed to match the API resource&rsquo;s documented behavior.</p></li><li><p>Delete all remaining comments in the resource configuration (including attribute descriptions) that were copied from the above template.</p></li></ol><blockquote><p><strong>Note:</strong> The template includes the most commonly-used fields. For a comprehensive reference, see <a href=https://googlecloudplatform.github.io/magic-modules/reference/resource-reference/>ResourceName.yaml reference ↗</a>.</p></blockquote></div><input type=radio class=toggle name=tabs-resource id=tabs-resource-1>
<label for=tabs-resource-1>Handwritten</label><div class="book-tabs-content markdown-inner"><blockquote><p><strong>Warning:</strong> Handwritten resources are more difficult to develop and maintain. New handwritten resources will only be accepted if implementing the resource in MMv1 would require entirely overriding two or more CRUD methods.</p></blockquote><ol><li>Add the resource in MMv1.</li><li><a href=https://googlecloudplatform.github.io/magic-modules/get-started/generate-providers/>Generate the beta provider</a></li><li>From the beta provider, copy the files generated for the resource to the following locations:<ul><li>Resource: Copy to the appropriate service folder inside <a href=https://github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/third_party/terraform/services><code>magic-modules/mmv1/third_party/terraform/services</code></a></li><li>Documentation: <a href=https://github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/third_party/terraform/website/docs/r><code>magic-modules/mmv1/third_party/terraform/website/docs/r</code></a></li><li>Tests: Copy to the appropriate service folder inside <a href=https://github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/third_party/terraform/services><code>magic-modules/mmv1/third_party/terraform/services</code></a>, and remove <code>_generated</code> from the filename</li><li>Sweepers: <a href=https://github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/third_party/terraform/utils><code>magic-modules/mmv1/third_party/terraform/utils</code></a></li></ul></li><li>Modify the Go code as needed.<ul><li>Replace all occurrences of <code>github.com/hashicorp/terraform-provider-google-beta/google-beta</code> with <code>github.com/hashicorp/terraform-provider-google/google</code></li><li>Remove the <code>Example</code> suffix from all test function names.</li><li>Remove the comments at the top of the file.</li><li>If beta-only fields are being tested, do the following:<ul><li>Change the file suffix to <code>.go.erb</code></li><li>Add <code>&lt;% autogen_exception -%></code> to the top of the file</li><li>Wrap each beta-only test in a separate version guard: <code>&lt;% unless version == 'ga' -%>...&lt;% else -%>...&lt;% end -%></code></li></ul></li></ul></li><li>Register the resource <code>handwrittenResources</code> in <a href=https://github.com/GoogleCloudPlatform/magic-modules/blob/main/mmv1/third_party/terraform/provider/provider_mmv1_resources.go.erb><code>magic-modules/mmv1/third_party/terraform/provider/provider_mmv1_resources.go.erb</code></a><ul><li>Add a version guard for any beta-only resources.</li></ul></li><li>Optional: Complete other handwritten tasks that require the MMv1 configuration file.<ul><li><a href=https://googlecloudplatform.github.io/magic-modules/develop/test/test/>Add resource tests</a></li><li><a href=#add-iam-support>Add IAM support</a></li></ul></li><li>Delete the MMv1 configuration file.</li></ol></div></div><h2 id=add-fields>Add fields
<a class=anchor href=#add-fields>#</a></h2><p>In general, Terraform resources should implement all configurable fields and all read-only fields.
Even fields that seem like they would not be useful in Terraform (like update time or etag) often
end up being requested by users, so it&rsquo;s usually easier to just add them all at once. However,
optional or read-only fields can be omitted when adding a resource if they would require significant
additional work to implement.</p><div class=book-tabs><input type=radio class=toggle name=tabs-fields id=tabs-fields-0 checked>
<label for=tabs-fields-0>MMv1</label><div class="book-tabs-content markdown-inner"><ol><li>For each API field, copy the following template into the resource&rsquo;s <code>properties</code> attribute. Be sure to indent appropriately.</li></ol><div class=book-tabs><input type=radio class=toggle name="tabs-MMv1 types" id="tabs-MMv1 types-0" checked>
<label for="tabs-MMv1 types-0">Simple</label><div class="book-tabs-content markdown-inner"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- !<span style=color:#ae81ff>ruby/object:Api::Type::String</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#39;API_FIELD_NAME&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    MULTILINE_FIELD_DESCRIPTION</span>    
</span></span><span style=display:flex><span>  <span style=color:#f92672>min_version</span>: <span style=color:#ae81ff>beta</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>immutable</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>required</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>output</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>conflicts</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>field_one</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>nested_object.0.nested_field</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>exactly_one_of</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>field_one</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>nested_object.0.nested_field</span>
</span></span></code></pre></div><p>Replace <code>String</code> in the field type with one of the following options:</p><ul><li><code>String</code></li><li><code>Integer</code></li><li><code>Boolean</code></li><li><code>Double</code></li><li><code>KeyValuePairs</code> (string -> string map)</li><li><code>KeyValueLabels</code> (for standard resource &rsquo;labels&rsquo; field)</li><li><code>KeyValueAnnotations</code> (for standard resource &lsquo;annotations&rsquo; field)</li></ul></div><input type=radio class=toggle name="tabs-MMv1 types" id="tabs-MMv1 types-1">
<label for="tabs-MMv1 types-1">Enum</label><div class="book-tabs-content markdown-inner"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- !<span style=color:#ae81ff>ruby/object:Api::Type::Enum</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#39;API_FIELD_NAME&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    MULTILINE_FIELD_DESCRIPTION</span>    
</span></span><span style=display:flex><span>  <span style=color:#f92672>min_version</span>: <span style=color:#ae81ff>beta</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>immutable</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>required</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>output</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>conflicts</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>field_one</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>nested_object.0.nested_field</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>exactly_one_of</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>field_one</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>nested_object.0.nested_field</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>values</span>:
</span></span><span style=display:flex><span>    - :<span style=color:#ae81ff>VALUE_ONE</span>
</span></span><span style=display:flex><span>    - :<span style=color:#ae81ff>VALUE_TWO</span>
</span></span></code></pre></div></div><input type=radio class=toggle name="tabs-MMv1 types" id="tabs-MMv1 types-2">
<label for="tabs-MMv1 types-2">ResourceRef</label><div class="book-tabs-content markdown-inner"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- !<span style=color:#ae81ff>ruby/object:Api::Type::ResourceRef</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#39;API_FIELD_NAME&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    MULTILINE_FIELD_DESCRIPTION</span>    
</span></span><span style=display:flex><span>  <span style=color:#f92672>min_version</span>: <span style=color:#ae81ff>beta</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>immutable</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>required</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>output</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>conflicts</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>field_one</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>nested_object.0.nested_field</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>exactly_one_of</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>field_one</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>nested_object.0.nested_field</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>resource</span>: <span style=color:#e6db74>&#39;ResourceName&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>imports</span>: <span style=color:#e6db74>&#39;name&#39;</span>
</span></span></code></pre></div></div><input type=radio class=toggle name="tabs-MMv1 types" id="tabs-MMv1 types-3">
<label for="tabs-MMv1 types-3">Array</label><div class="book-tabs-content markdown-inner"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- !<span style=color:#ae81ff>ruby/object:Api::Type::Array</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#39;API_FIELD_NAME&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    MULTILINE_FIELD_DESCRIPTION</span>    
</span></span><span style=display:flex><span>  <span style=color:#f92672>min_version</span>: <span style=color:#ae81ff>beta</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>immutable</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>required</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>output</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>conflicts</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>field_one</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>nested_object.0.nested_field</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>exactly_one_of</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>field_one</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>nested_object.0.nested_field</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Array of primitives</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>item_type</span>: <span style=color:#ae81ff>Api::Type::String</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Array of nested objects</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>item_type</span>: !<span style=color:#ae81ff>ruby/object:Api::Type::NestedObject</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>properties</span>:
</span></span><span style=display:flex><span>      - !<span style=color:#ae81ff>ruby/object:Api::Type::String</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#39;FIELD_NAME&#39;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>description</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          MULTI_LINE_FIELD_DESCRIPTION</span>          
</span></span></code></pre></div></div><input type=radio class=toggle name="tabs-MMv1 types" id="tabs-MMv1 types-4">
<label for="tabs-MMv1 types-4">NestedObject</label><div class="book-tabs-content markdown-inner"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- !<span style=color:#ae81ff>ruby/object:Api::Type::Array</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#39;API_FIELD_NAME&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    MULTILINE_FIELD_DESCRIPTION</span>    
</span></span><span style=display:flex><span>  <span style=color:#f92672>min_version</span>: <span style=color:#ae81ff>beta</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>immutable</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>required</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>output</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>conflicts</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>field_one</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>nested_object.0.nested_field</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>exactly_one_of</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>field_one</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>nested_object.0.nested_field</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>properties</span>:
</span></span><span style=display:flex><span>    - !<span style=color:#ae81ff>ruby/object:Api::Type::String</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#39;FIELD_NAME&#39;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>description</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        MULTI_LINE_FIELD_DESCRIPTION</span>        
</span></span></code></pre></div></div><input type=radio class=toggle name="tabs-MMv1 types" id="tabs-MMv1 types-5">
<label for="tabs-MMv1 types-5">Map</label><div class="book-tabs-content markdown-inner"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>  - !<span style=color:#ae81ff>ruby/object:Api::Type::Map</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#39;API_FIELD_NAME&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>description</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      MULTILINE_FIELD_DESCRIPTION</span>      
</span></span><span style=display:flex><span>    <span style=color:#f92672>key_name</span>: <span style=color:#ae81ff>KEY_NAME</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>key_description</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      MULTILINE_KEY_FIELD_DESCRIPTION</span>      
</span></span><span style=display:flex><span>    <span style=color:#f92672>value_type</span>: !<span style=color:#ae81ff>ruby/object:Api::Type::NestedObject</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>properties</span>:
</span></span><span style=display:flex><span>        - !<span style=color:#ae81ff>ruby/object:Api::Type::String</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#39;FIELD_NAME&#39;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>description</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            MULTI_LINE_FIELD_DESCRIPTION</span>            
</span></span></code></pre></div><p>This type is only used for string -> complex type mappings, use &ldquo;KeyValuePairs&rdquo; for simple mappings. Complex maps can&rsquo;t be represented natively in Terraform, and this type is transformed into an associative array (TypeSet) with the key merged into the object alongside other top-level fields.</p><p>For <code>key_name</code> and <code>key_description</code>, provide a domain-appropriate name and description. For example, a map that references a specific type of resource would generally use the singular resource kind as the key name (such as &ldquo;topic&rdquo; for PubSub Topic) and a descriptor of the expected format depending on the context (such as resourceId vs full resource name).</p></div></div><ol start=2><li>Modify the field configuration according to the API documentation and behavior.</li></ol><blockquote><p><strong>Note:</strong> The templates in this section only include the most commonly-used fields. For a comprehensive reference, see <a href=https://googlecloudplatform.github.io/magic-modules/develop/field-reference/>MMv1 field reference</a>. For information about modifying the values sent and received for a field, see <a href=https://googlecloudplatform.github.io/magic-modules/develop/custom-code/#modify-the-api-request-or-response>Modify the API request or response</a>.</p></blockquote></div><input type=radio class=toggle name=tabs-fields id=tabs-fields-1>
<label for=tabs-fields-1>Handwritten</label><div class="book-tabs-content markdown-inner"><ol><li>Add the field to the handwritten resource&rsquo;s schema.<ul><li>The new field(s) should mirror the API&rsquo;s structure to ease predictability and maintenance. However, if there is an existing related / similar field in the resource that uses a different convention, follow that convention instead.</li><li>Enum fields in the API should be represented as <code>TypeString</code> in Terraform for forwards-compatibility. Link to the API documentation of allowed values in the field description.</li><li>Terraform field names should always use <a href=https://en.wikipedia.org/wiki/Snake_case>snake case ↗</a>.</li><li>See <a href=https://developer.hashicorp.com/terraform/plugin/sdkv2/schemas/schema-types>Schema Types ↗</a> and <a href=https://developer.hashicorp.com/terraform/plugin/sdkv2/schemas/schema-behaviors>Schema Behaviors ↗</a> for more information about field schemas.</li></ul></li><li>Add handling for the new field in the resource&rsquo;s Create method and Update methods.<ul><li>&ldquo;Expanders&rdquo; convert Terraform resource data to API request data.</li><li>For top level fields, add an expander. If the field is set or has changed, call the expander and add the resulting value to the API request.</li><li>For other fields, add logic to the parent field&rsquo;s expander to add the field to the API request. Use a nested expander for complex logic.</li></ul></li><li>Add handling for the new field in the resource&rsquo;s Read method.<ul><li>&ldquo;Flatteners&rdquo; convert API response data to Terraform resource data.</li><li>For top level fields, add a flattener. Call <code>d.Set()</code> on the flattened API response value to store it in Terraform state.</li><li>For other fields, add logic to the parent field&rsquo;s flattener to convert the value from the API response to the Terraform state value. Use a nested flattener for complex logic.</li></ul></li><li>If any of the added Go code (including any imports) is beta-only, change the file suffix to <code>.go.erb</code> and wrap the beta-only code in a version guard: <code>&lt;% unless version == 'ga' -%>...&lt;% else -%>...&lt;% end -%></code>.<ul><li>Add a new guard rather than adding the field to an existing guard; it is easier to read.</li></ul></li></ol></div></div><h2 id=add-iam-support>Add IAM support
<a class=anchor href=#add-iam-support>#</a></h2><p>This section covers how to add IAM resources in Terraform if they are supported by a particular API resource (indicated by <code>setIamPolicy</code> and <code>getIamPolicy</code> methods in the API documentation for the resource).</p><div class=book-tabs><input type=radio class=toggle name=tabs-IAM id=tabs-IAM-0 checked>
<label for=tabs-IAM-0>MMv1</label><div class="book-tabs-content markdown-inner"><p>IAM support for MMv1-generated resources is configured within the <code>ResourceName.yaml</code> file, and will create the <code>google_product_resource_iam_policy</code>, <code>google_product_resource_iam_binding</code>, <code>google_product_resource_iam_member</code> resource, website, and test files for that resource target when an <code>iam_policy</code> block is present.</p><ol><li>Add the following top-level block to <code>ResourceName.yaml</code> directly above <code>parameters</code>.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>iam_policy</span>: !<span style=color:#ae81ff>ruby/object:Api::Resource::IamPolicy</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Name of the field on the terraform IAM resources which references</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># the parent resource. Update to match the parent resource&#39;s name.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>parent_resource_attribute</span>: <span style=color:#e6db74>&#39;resource_name&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Character preceding setIamPolicy in the full URL for the API method.</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Usually `:`</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>method_name_separator</span>: <span style=color:#e6db74>&#39;:&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># HTTP method for getIamPolicy. Usually :POST.</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Allowed values: :GET, :POST. Default: :GET</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>fetch_iam_policy_verb</span>: :<span style=color:#ae81ff>POST</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Overrides the HTTP method for setIamPolicy.</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Allowed values: :POST, :PUT. Default: :POST</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># set_iam_policy_verb: :POST</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Must match the parent resource&#39;s `import_format` (or `self_link` if</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># `import_format` is unset), but with the `parent_resource_attribute`</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># value substituted for the final field.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>import_format</span>: [
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;projects/{{project}}/locations/{{location}}/resourcenames/{{resource_name}}&#39;</span>
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>  <span style=color:#75715e># Valid IAM role that can be set by generated tests. Default: &#39;roles/viewer&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># allowed_iam_role: &#39;roles/viewer&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># If IAM conditions are supported, set this attribute to indicate how the</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># conditions should be passed to the API. Allowed values: :QUERY_PARAM,</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># :REQUEST_BODY, :QUERY_PARAM_NESTED. Note: :QUERY_PARAM_NESTED should</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># only be used if the query param field contains a `.`</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># iam_conditions_request_type: :REQUEST_BODY</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Marks IAM support as beta-only</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># min_version: beta</span>
</span></span></code></pre></div><ol start=2><li>Modify the template as needed to match the API resource&rsquo;s documented behavior. These are the most commonly-used fields. For a comprehensive reference, see <a href=https://googlecloudplatform.github.io/magic-modules/reference/iam-policy-reference/>IAM policy YAML reference ↗</a>.</li><li>Delete all remaining comments in the IAM configuration (including attribute descriptions) that were copied from the above template.</li></ol></div><input type=radio class=toggle name=tabs-IAM id=tabs-IAM-1>
<label for=tabs-IAM-1>Handwritten</label><div class="book-tabs-content markdown-inner"><blockquote><p><strong>Warning:</strong> IAM support for handwritten resources should be implemented using MMv1. New handwritten IAM resources will only be accepted if they cannot be implemented using MMv1.</p></blockquote><h3 id=add-support-in-mmv1>Add support in MMv1
<a class=anchor href=#add-support-in-mmv1>#</a></h3><ol><li>Follow the MMv1 directions in <a href=#add-the-resource>Add the resource</a> to create a skeleton ResourceName.yaml file for the handwritten resource, but set only the following top-level fields:<ul><li><code>name</code></li><li><code>description</code> (required but unused)</li><li><code>base_url</code> (set to URL of IAM parent resource)</li><li><code>self_link</code> (set to same value as <code>base_url</code>)</li><li><code>id_format</code> (set to same value as <code>base_url</code>)</li><li><code>import_format</code> (including <code>base_url</code> value)</li><li><code>exclude_resource</code> (set to <code>true</code>)</li><li><code>properties</code></li></ul></li><li>Follow the MMv1 directions in <a href=#add-fields>Add fields</a> to add only the fields used by base_url.</li><li>Follow the MMv1 directions in this section to add IAM support.</li></ol><h3 id=convert-to-handwritten-not-usually-necessary>Convert to handwritten (not usually necessary)
<a class=anchor href=#convert-to-handwritten-not-usually-necessary>#</a></h3><ol><li><a href=https://googlecloudplatform.github.io/magic-modules/get-started/generate-providers/>Generate the beta provider</a></li><li>From the beta provider, copy the files generated for the IAM resources to the following locations:<ul><li>Resource: Copy to the appropriate service folder inside <a href=https://github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/third_party/terraform/services><code>magic-modules/mmv1/third_party/terraform/services</code></a></li><li>Documentation: <a href=https://github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/third_party/terraform/website/docs/r><code>magic-modules/mmv1/third_party/terraform/website/docs/r</code></a></li><li>Tests: In the appropriate service folder inside <a href=https://github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/third_party/terraform/services><code>magic-modules/mmv1/third_party/terraform/services</code></a></li></ul></li><li>Modify the Go code as needed.<ul><li>Replace all occurrences of <code>github.com/hashicorp/terraform-provider-google-beta/google-beta</code> with <code>github.com/hashicorp/terraform-provider-google/google</code></li><li>Remove the comments at the top of the file.</li><li>If any of the added Go code is beta-only:<ul><li>Change the file suffix to <code>.go.erb</code></li><li>Add <code>&lt;% autogen_exception -%></code> to the top of the file</li><li>Wrap each beta-only code block (including any imports) in a separate version guard: <code>&lt;% unless version == 'ga' -%>...&lt;% else -%>...&lt;% end -%></code></li></ul></li></ul></li><li>Register the binding, member, and policy resources <code>handwrittenIAMResources</code> in <a href=https://github.com/GoogleCloudPlatform/magic-modules/blob/main/mmv1/third_party/terraform/provider/provider_mmv1_resources.go.erb><code>magic-modules/mmv1/third_party/terraform/provider/provider_mmv1_resources.go.erb</code></a><ul><li>Add a version guard for any beta-only resources.</li></ul></li></ol></div></div><h2 id=add-documentation>Add documentation
<a class=anchor href=#add-documentation>#</a></h2><div class=book-tabs><input type=radio class=toggle name=tabs-docs id=tabs-docs-0 checked>
<label for=tabs-docs-0>MMv1</label><div class="book-tabs-content markdown-inner"><p>Documentation is autogenerated based on the resource and field configurations. To preview the documentation:</p><ol><li><a href=https://googlecloudplatform.github.io/magic-modules/get-started/generate-providers/>Generate the providers</a></li><li>Copy and paste the generated documentation into the Hashicorp Registry&rsquo;s <a href=https://registry.terraform.io/tools/doc-preview>Doc Preview Tool</a> to see how it is rendered.</li></ol></div><input type=radio class=toggle name=tabs-docs id=tabs-docs-1>
<label for=tabs-docs-1>Handwritten</label><div class="book-tabs-content markdown-inner"><h3 id=add-or-modify-documentation-files>Add or modify documentation files
<a class=anchor href=#add-or-modify-documentation-files>#</a></h3><ol><li>Open the resource documentation in <a href=https://github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/third_party/terraform/website/docs/r><code>magic-modules/third_party/terraform/website/docs/r/</code></a> using an editor of your choice.<ul><li>The name of the file is the name of the resource without a <code>google_</code> prefix. For example, for <code>google_compute_instance</code>, the file is called <code>compute_instance.html.markdown</code></li></ul></li><li>Modify the documentation as needed according to <a href=https://googlecloudplatform.github.io/magic-modules/develop/handwritten-docs-style-guide/>Handwritten documentation style guide</a>.</li><li><a href=https://googlecloudplatform.github.io/magic-modules/get-started/generate-providers/>Generate the providers</a></li><li>Copy and paste the generated documentation into the Hashicorp Registry&rsquo;s <a href=https://registry.terraform.io/tools/doc-preview>Doc Preview Tool</a> to see how it is rendered.</li></ol></div></div><h2 id=whats-next>What&rsquo;s next?
<a class=anchor href=#whats-next>#</a></h2><ul><li><a href=https://googlecloudplatform.github.io/magic-modules/develop/custom-code/>Add custom resource code</a></li><li><a href=https://googlecloudplatform.github.io/magic-modules/develop/test/test/>Add tests</a></li><li><a href=https://googlecloudplatform.github.io/magic-modules/develop/test/run-tests/>Run tests</a></li></ul></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/GoogleCloudPlatform/magic-modules/commit/4857d21014a6d0fe2f5b62329ec3651dd47c15b0 title='Last modified by Riley Karson | May 15, 2024' target=_blank rel=noopener><img src=/magic-modules/svg/calendar.svg class=book-icon alt=Calendar>
<span>May 15, 2024</span></a></div><div><a class="flex align-center" href="https://github.com/hashicorp/terraform-provider-google/issues/new?assignees=&labels=technical-debt,documentation&projects=&title=MM%20docsite%20issue%20in%20content/develop%2fresource.md&template=11_developer_productivity.md" target=_blank rel=noopener><img src=/magic-modules/report.svg class=book-icon alt=Edit>
<span>Report documentation issue</span></a></div><div><a class="flex align-center" href=https://github.com/GoogleCloudPlatform/magic-modules/edit/main/docs/content/develop/resource.md target=_blank rel=noopener><img src=/magic-modules/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#before-you-begin>Before you begin</a></li><li><a href=#add-a-resource>Add a resource</a></li><li><a href=#add-fields>Add fields</a></li><li><a href=#add-iam-support>Add IAM support</a></li><li><a href=#add-documentation>Add documentation</a></li><li><a href=#whats-next>What&rsquo;s next?</a></li></ul></nav></div></aside></main></body></html>