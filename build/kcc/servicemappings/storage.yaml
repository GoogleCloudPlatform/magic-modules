apiVersion: core.cnrm.cloud.google.com/v1alpha1
kind: ServiceMapping
metadata:
  name: storage.cnrm.cloud.google.com
  namespace: cnrm-system
spec:
  name: Storage
  version: v1alpha1
  resources:
    - name: google_storage_object_access_control
      kind: StorageObjectAccessControl
      idTemplate: "{{bucket}}/{{object}}/{{entity}}"
      metadataMapping:
        name: name
      resourceReferences:
        - key: bucketRef
          tfField: bucket
          kind: StorageBucket
          required: true
    - name: google_storage_default_object_access_control
      kind: StorageDefaultObjectAccessControl
      idTemplate: "{{bucket}}/{{entity}}"
      metadataMapping:
        name: name
      resourceReferences:
        - key: bucketRef
          tfField: bucket
          kind: StorageBucket
          required: true
