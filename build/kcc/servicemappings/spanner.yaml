apiVersion: core.cnrm.cloud.google.com/v1alpha1
kind: ServiceMapping
metadata:
  name: spanner.cnrm.cloud.google.com
  namespace: cnrm-system
spec:
  name: Spanner
  version: v1alpha1
  resources:
    - name: google_spanner_instance
      kind: SpannerInstance
      metadataMapping:
        name: name
        labels: labels
      idTemplate: "projects/{{project}}/instances/{{name}}"
      resourceReferences:
        - key: configRef
          tfField: config
          kind: SpannerInstanceConfig
          required: true
    - name: google_spanner_database
      kind: SpannerDatabase
      metadataMapping:
        name: name
      idTemplate: "projects/{{project}}/instances/{{instance}}/databases/{{name}}"
