apiVersion: core.cnrm.cloud.google.com/v1alpha1
kind: ServiceMapping
metadata:
  name: pubsub.cnrm.cloud.google.com
  namespace: cnrm-system
spec:
  name: Pubsub
  version: v1alpha1
  resources:
    - name: google_pubsub_topic
      kind: PubsubTopic
      iamPolicyName: google_pubsub_topic_iam_policy
      metadataMapping:
        name: name
        labels: labels
      idTemplate: "projects/{{project}}/topics/{{name}}"
    - name: google_pubsub_subscription
      kind: PubsubSubscription
      metadataMapping:
        name: name
        labels: labels
      idTemplate: "projects/{{project}}/subscriptions/{{name}}"
      resourceReferences:
        - key: topicRef
          tfField: topic
          kind: PubsubTopic
          required: true
