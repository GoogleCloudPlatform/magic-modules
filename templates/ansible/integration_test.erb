---
<%= lines(autogen_notice :yaml) -%>
<%  yaml, random_vars = build_test_yaml_from_example(object.inttests[0]) -%>
- name: Prepare random number
  set_fact:
<%  random_vars.reject{|v| v.variable_name == 'resource_group'}.each do |rnd| -%>
    <%= rnd.variable_name -%>: "<%= rnd.variable_value -%>"
<%  end -%>
  run_once: yes

<%= lines(yaml) -%>

- name: Assert the resource was created
  assert:
    that:
      - output.changed

<%  same_yaml, _ = build_test_yaml_from_example(object.inttests[0], false, 'idempotent') -%>
<%= lines(same_yaml) -%>

- name: Assert the resource was created
  assert:
    that:
      - not output.changed