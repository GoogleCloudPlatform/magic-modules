<% folder = grab_attributes['folder'] -%>
describe.one do
  google_resourcemanager_folders(parent: <%= doc_generation ? "'organizations/12345'" : "\"organizations/\#{organization['id']}\"" -%>).names.each do |name|
    # names come back in the format 'folders/1234', we only want the number
    describe google_resourcemanager_folder(name: name.split('/').last) do
      it { should exist }
      its('display_name') { should eq <%= doc_generation ? "'#{folder['display_name']}'" : "folder['display_name']" -%> }
    end
  end
end

describe google_resourcemanager_folder(name: '1234') do
  it { should_not exist }
end