resource "google_secret_manager_secret" "secret-basic" {
  provider = google-beta

  secret_id = "<%= ctx[:vars]['secret_id'] %>"
  
  labels = {
    label = "my-label"
  }

  replication {
    automatic = true
  }
}


resource "google_secret_manager_secret_version" "<%= ctx[:primary_resource_id] %>" {
  provider = google-beta

  secret = google_secret_manager_secret.secret-basic.name

  secret_data = "<%= ctx[:vars]['data'] %>"
}
