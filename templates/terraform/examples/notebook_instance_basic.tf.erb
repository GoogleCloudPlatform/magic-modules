resource "google_notebooks_instance" "<%= ctx[:primary_resource_id] %>" {
  provider = google-beta
  name = "<%= ctx[:vars]["instance_name"] %>"
  location = "us-west1-a"

  vm_image {
    project      = "deeplearning-platform-release"
    image_family = "tf2-latest-cpu"
  }
  
  accelerator_config {
    type = "NVIDIA_TESLA_T4"
    core_count = 1
  }
  install_gpu_driver = true

  node_count = 1
}