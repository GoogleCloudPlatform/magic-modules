<%
    temp_var = input_statement
    unless api_path == ""
      sdk_type = sdk_type_defs[api_path]
      temp_var = sdk_type.go_variable_name || sdk_type.go_field_name.camelcase(:lower)
-%>
if <%= temp_var -%> := <%= input_statement -%>.<%= sdk_type.go_field_name -%>; <%= temp_var -%> != nil {
<%
    end

    direct_children = Hash.new
    object.properties.each do |prop|
      prop.azure_sdk_references.select{|ref| sdk_type_defs.has_key?(ref)}.each do |child_api_path|
        if api_path == ""
          sub_paths = child_api_path.split("/")
          direct_children[child_api_path] = prop if sub_paths.length == 1
        elsif child_api_path.start_with?(api_path + "/") && 
          sub_paths = child_api_path[api_path.length..-1].split("/")
        end
        if !sub_paths.nil? && sub_paths.length > 1 && sub_paths[0] == ""
          sub_api_path = api_path + "/" + sub_paths[1]
          direct_children[sub_api_path] = (direct_children[sub_api_path] || nil) if sub_paths.length > 2
          direct_children[child_api_path] = prop if sub_paths.length == 2
        end
      end
    end

    direct_children.each do |child_api_path, prop|
-%>
<%=   lines(build_sdk_object_to_property(temp_var, child_api_path, prop, sdk_type_defs, object)) -%>
<%  end -%>
<%= "}" unless api_path == "" -%>