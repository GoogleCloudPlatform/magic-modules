<%
    sdk_marshal.properties.each do |prop|
      ref = get_applicable_reference(prop.azure_sdk_references, sdk_marshal.operation.request)
      next unless ref.start_with?(sdk_marshal.parent_reference)
      relative_refs = ref[sdk_marshal.parent_reference.length..-1].split('/')
      next if relative_refs.length == 0

      var = python_variable_name(prop, sdk_marshal.operation)
      sdk_type = sdk_marshal.operation.request[ref]
      need_normalize = (relative_refs.length > 1)
      if relative_refs.length == 1
        need_normalize = true if sdk_type.python_field_name != var
        need_normalize = true if is_location? prop
        need_normalize = true if prop.is_a? Api::Type::Enum
      end
      next unless need_normalize || prop.is_a?(Api::Type::Composite)

      if need_normalize
        indent = 4
        norm_desc = Provider::Azure::Ansible::SDK::PropertyNormalizeDescriptor.new prop, sdk_marshal.input, sdk_marshal.output, var, sdk_marshal.parent_reference, relative_refs, sdk_marshal.operation
-%>
<%      if is_location? prop -%>
resource_group = self.get_resource_group(self.resource_group)
if <%= sdk_marshal.input -%>.get('<%= var -%>') is None:
<%      elsif !always_has_value? prop -%>
if <%= sdk_marshal.input -%>.get('<%= var -%>') is not None:
<%      else -%>
<%        indent = 0 -%>
<%      end -%>
<%= lines(build_property_normalization(norm_desc, false, indent)) -%>
<%
      end

      if prop.is_a? Api::Type::NestedObject
        child_sdk_path = sdk_marshal.parent_reference + relative_refs.join('/') + '/'
        child_sdk_marshal = Provider::Azure::Ansible::SDK::MarshalDescriptor.new prop.properties, sdk_marshal.operation, 'input', '|', child_sdk_path
        build_property_to_sdk_object child_sdk_marshal
      end
    end
-%>