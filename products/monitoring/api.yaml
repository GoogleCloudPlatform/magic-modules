# Copyright 2018 Google Inc.
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
--- !ruby/object:Api::Product
name: Monitoring
display_name: Stackdriver Monitoring
versions:
  - !ruby/object:Api::Product::Version
    name: ga
    base_url: https://monitoring.googleapis.com/v3/
  - !ruby/object:Api::Product::Version
    name: beta
    base_url: https://monitoring.googleapis.com/v3/
scopes:
  - https://www.googleapis.com/auth/cloud-platform
apis_required:
  - !ruby/object:Api::Product::ApiReference
    name: Stackdriver Monitoring API
    url: https://console.cloud.google.com/apis/library/monitoring.googleapis.com/
objects:
  - !ruby/object:Api::Resource
    name: 'AlertPolicy'
    base_url: projects/{{project}}/alertPolicies
    self_link: "{{name}}"
    update_verb: :PATCH
    update_mask: true
    description: |
      A description of the conditions under which some aspect of your system is
      considered to be "unhealthy" and the ways to notify people or services
      about this state.
    references: !ruby/object:Api::Resource::ReferenceLinks
      guides:
        'Official Documentation':
          'https://cloud.google.com/monitoring/alerts/'
      api: 'https://cloud.google.com/monitoring/api/ref_v3/rest/v3/projects.alertPolicies'
    properties:
      - !ruby/object:Api::Type::String
        name: name
        description: |
          The unique resource name for this policy.
          Its syntax is: projects/[PROJECT_ID]/alertPolicies/[ALERT_POLICY_ID]
        output: true
      - !ruby/object:Api::Type::String
        name: 'displayName'
        description: |
         A short name or phrase used to identify the policy in
         dashboards, notifications, and incidents. To avoid confusion, don't use
         the same display name for multiple policies in the same project. The
         name is limited to 512 Unicode characters.
        required: true
      - !ruby/object:Api::Type::Enum
        name: combiner
        description: |
          How to combine the results of multiple conditions to
          determine if an incident should be opened.
        values:
          - :AND
          - :OR
          - :AND_WITH_MATCHING_RESOURCE
        required: true
      - !ruby/object:Api::Type::NestedObject
        name: creationRecord
        description: |
          A read-only record of the creation of the alerting policy.
          If provided in a call to create or update, this field will
          be ignored.
        output: true
        properties:
         - !ruby/object:Api::Type::String
           name: mutateTime
           output: true
           description: |
             When the change occurred.
         - !ruby/object:Api::Type::String
           output: true
           name: mutatedBy
           description: |
             The email address of the user making the change.
      - !ruby/object:Api::Type::Boolean
        name: enabled
        default_value: true
        send_empty_value: true
        description: |
          Whether or not the policy is enabled. The default is true.
      - !ruby/object:Api::Type::Array
        name: 'conditions'
        description: |
          A list of conditions for the policy. The conditions are combined by
          AND or OR according to the combiner field. If the combined conditions
          evaluate to true, then an incident is created. A policy can have from
          one to six conditions.
        item_type: !ruby/object:Api::Type::NestedObject
          properties:
           - !ruby/object:Api::Type::NestedObject
             name: conditionAbsent
             description: |
               A condition that checks that a time series
               continues to receive new data points.
             properties:
              - !ruby/object:Api::Type::Array
                name: aggregations
                description: |
                  Specifies the alignment of data points in
                  individual time series as well as how to
                  combine the retrieved time series together
                  (such as when aggregating multiple streams
                  on each resource to a single stream for each
                  resource or when aggregating streams across
                  all members of a group of resources).
                  Multiple aggregations are applied in the
                  order specified.
                item_type: !ruby/object:Api::Type::NestedObject
                  properties:
                   - !ruby/object:Api::Type::Enum
                     name: perSeriesAligner
                     description: |
                       The approach to be used to align
                       individual time series. Not all
                       alignment functions may be applied
                       to all time series, depending on
                       the metric type and value type of
                       the original time series.
                       Alignment may change the metric
                       type or the value type of the time
                       series.Time series data must be
                       aligned in order to perform cross-
                       time series reduction. If
                       crossSeriesReducer is specified,
                       then perSeriesAligner must be
                       specified and not equal ALIGN_NONE
                       and alignmentPeriod must be
                       specified; otherwise, an error is
                       returned.
                     values:
                       - :ALIGN_NONE
                       - :ALIGN_DELTA
                       - :ALIGN_RATE
                       - :ALIGN_INTERPOLATE
                       - :ALIGN_NEXT_OLDER
                       - :ALIGN_MIN
                       - :ALIGN_MAX
                       - :ALIGN_MEAN
                       - :ALIGN_COUNT
                       - :ALIGN_SUM
                       - :ALIGN_STDDEV
                       - :ALIGN_COUNT_TRUE
                       - :ALIGN_COUNT_FALSE
                       - :ALIGN_FRACTION_TRUE
                       - :ALIGN_PERCENTILE_99
                       - :ALIGN_PERCENTILE_95
                       - :ALIGN_PERCENTILE_50
                       - :ALIGN_PERCENTILE_05
                       - :ALIGN_PERCENT_CHANGE
                   - !ruby/object:Api::Type::Array
                     name: groupByFields
                     description: |
                       The set of fields to preserve when
                       crossSeriesReducer is specified.
                       The groupByFields determine how
                       the time series are partitioned
                       into subsets prior to applying the
                       aggregation function. Each subset
                       contains time series that have the
                       same value for each of the
                       grouping fields. Each individual
                       time series is a member of exactly
                       one subset. The crossSeriesReducer
                       is applied to each subset of time
                       series. It is not possible to
                       reduce across different resource
                       types, so this field implicitly
                       contains resource.type. Fields not
                       specified in groupByFields are
                       aggregated away. If groupByFields
                       is not specified and all the time
                       series have the same resource
                       type, then the time series are
                       aggregated into a single output
                       time series. If crossSeriesReducer
                       is not defined, this field is
                       ignored.
                     item_type: Api::Type::String
                   - !ruby/object:Api::Type::String
                     name: alignmentPeriod
                     description: |
                       The alignment period for per-time
                       series alignment. If present,
                       alignmentPeriod must be at least
                       60 seconds. After per-time series
                       alignment, each time series will
                       contain data points only on the
                       period boundaries. If
                       perSeriesAligner is not specified
                       or equals ALIGN_NONE, then this
                       field is ignored. If
                       perSeriesAligner is specified and
                       does not equal ALIGN_NONE, then
                       this field must be defined;
                       otherwise an error is returned.
                   - !ruby/object:Api::Type::Enum
                     name: crossSeriesReducer
                     description: |
                       The approach to be used to combine
                       time series. Not all reducer
                       functions may be applied to all
                       time series, depending on the
                       metric type and the value type of
                       the original time series.
                       Reduction may change the metric
                       type of value type of the time
                       series.Time series data must be
                       aligned in order to perform cross-
                       time series reduction. If
                       crossSeriesReducer is specified,
                       then perSeriesAligner must be
                       specified and not equal ALIGN_NONE
                       and alignmentPeriod must be
                       specified; otherwise, an error is
                       returned.
                     values:
                       - :REDUCE_NONE
                       - :REDUCE_MEAN
                       - :REDUCE_MIN
                       - :REDUCE_MAX
                       - :REDUCE_SUM
                       - :REDUCE_STDDEV
                       - :REDUCE_COUNT
                       - :REDUCE_COUNT_TRUE
                       - :REDUCE_COUNT_FALSE
                       - :REDUCE_FRACTION_TRUE
                       - :REDUCE_PERCENTILE_99
                       - :REDUCE_PERCENTILE_95
                       - :REDUCE_PERCENTILE_50
                       - :REDUCE_PERCENTILE_05
              - !ruby/object:Api::Type::NestedObject
                name: trigger
                description: |
                  The number/percent of time series for which
                  the comparison must hold in order for the
                  condition to trigger. If unspecified, then
                  the condition will trigger if the comparison
                  is true for any of the time series that have
                  been identified by filter and aggregations.
                properties:
                 - !ruby/object:Api::Type::Double
                   name: percent
                   description: |
                     The percentage of time series that
                     must fail the predicate for the
                     condition to be triggered.
                 - !ruby/object:Api::Type::Integer
                   name: count
                   description: |
                     The absolute number of time series
                     that must fail the predicate for the
                     condition to be triggered.
              - !ruby/object:Api::Type::String
                name: duration
                description: |
                  The amount of time that a time series must
                  fail to report new data to be considered
                  failing. Currently, only values that are a
                  multiple of a minute--e.g. 60s, 120s, or 300s
                  --are supported.
                required: true
              - !ruby/object:Api::Type::String
                name: filter
                description: |
                  A filter that identifies which time series
                  should be compared with the threshold.The
                  filter is similar to the one that is
                  specified in the
                  MetricService.ListTimeSeries request (that
                  call is useful to verify the time series
                  that will be retrieved / processed) and must
                  specify the metric type and optionally may
                  contain restrictions on resource type,
                  resource labels, and metric labels. This
                  field may not exceed 2048 Unicode characters
                  in length.
           - !ruby/object:Api::Type::String
             name: name
             description: |
               The unique resource name for this condition.
               Its syntax is:
               projects/[PROJECT_ID]/alertPolicies/[POLICY_ID]/conditions/[CONDITION_ID]
               [CONDITION_ID] is assigned by Stackdriver Monitoring when
               the condition is created as part of a new or updated alerting
               policy.
             output: true
           - !ruby/object:Api::Type::NestedObject
             name: conditionThreshold
             description: |
               A condition that compares a time series against a
               threshold.
             properties:
              - !ruby/object:Api::Type::Double
                name: thresholdValue
                description: |
                  A value against which to compare the time
                  series.
              - !ruby/object:Api::Type::String
                name: denominatorFilter
                description: |
                  A filter that identifies a time series that
                  should be used as the denominator of a ratio
                  that will be compared with the threshold. If
                  a denominator_filter is specified, the time
                  series specified by the filter field will be
                  used as the numerator.The filter is similar
                  to the one that is specified in the
                  MetricService.ListTimeSeries request (that
                  call is useful to verify the time series
                  that will be retrieved / processed) and must
                  specify the metric type and optionally may
                  contain restrictions on resource type,
                  resource labels, and metric labels. This
                  field may not exceed 2048 Unicode characters
                  in length.
              - !ruby/object:Api::Type::Array
                name: denominatorAggregations
                description: |
                  Specifies the alignment of data points in
                  individual time series selected by
                  denominatorFilter as well as how to combine
                  the retrieved time series together (such as
                  when aggregating multiple streams on each
                  resource to a single stream for each
                  resource or when aggregating streams across
                  all members of a group of resources).When
                  computing ratios, the aggregations and
                  denominator_aggregations fields must use the
                  same alignment period and produce time
                  series that have the same periodicity and
                  labels.This field is similar to the one in
                  the MetricService.ListTimeSeries request. It
                  is advisable to use the ListTimeSeries
                  method when debugging this field.
                item_type: !ruby/object:Api::Type::NestedObject
                  properties:
                   - !ruby/object:Api::Type::Enum
                     name: perSeriesAligner
                     description: |
                       The approach to be used to align
                       individual time series. Not all
                       alignment functions may be applied
                       to all time series, depending on
                       the metric type and value type of
                       the original time series.
                       Alignment may change the metric
                       type or the value type of the time
                       series.Time series data must be
                       aligned in order to perform cross-
                       time series reduction. If
                       crossSeriesReducer is specified,
                       then perSeriesAligner must be
                       specified and not equal ALIGN_NONE
                       and alignmentPeriod must be
                       specified; otherwise, an error is
                       returned.
                     values:
                       - :ALIGN_NONE
                       - :ALIGN_DELTA
                       - :ALIGN_RATE
                       - :ALIGN_INTERPOLATE
                       - :ALIGN_NEXT_OLDER
                       - :ALIGN_MIN
                       - :ALIGN_MAX
                       - :ALIGN_MEAN
                       - :ALIGN_COUNT
                       - :ALIGN_SUM
                       - :ALIGN_STDDEV
                       - :ALIGN_COUNT_TRUE
                       - :ALIGN_COUNT_FALSE
                       - :ALIGN_FRACTION_TRUE
                       - :ALIGN_PERCENTILE_99
                       - :ALIGN_PERCENTILE_95
                       - :ALIGN_PERCENTILE_50
                       - :ALIGN_PERCENTILE_05
                       - :ALIGN_PERCENT_CHANGE
                   - !ruby/object:Api::Type::Array
                     name: groupByFields
                     description: |
                       The set of fields to preserve when
                       crossSeriesReducer is specified.
                       The groupByFields determine how
                       the time series are partitioned
                       into subsets prior to applying the
                       aggregation function. Each subset
                       contains time series that have the
                       same value for each of the
                       grouping fields. Each individual
                       time series is a member of exactly
                       one subset. The crossSeriesReducer
                       is applied to each subset of time
                       series. It is not possible to
                       reduce across different resource
                       types, so this field implicitly
                       contains resource.type. Fields not
                       specified in groupByFields are
                       aggregated away. If groupByFields
                       is not specified and all the time
                       series have the same resource
                       type, then the time series are
                       aggregated into a single output
                       time series. If crossSeriesReducer
                       is not defined, this field is
                       ignored.
                     item_type: Api::Type::String
                   - !ruby/object:Api::Type::String
                     name: alignmentPeriod
                     description: |
                       The alignment period for per-time
                       series alignment. If present,
                       alignmentPeriod must be at least
                       60 seconds. After per-time series
                       alignment, each time series will
                       contain data points only on the
                       period boundaries. If
                       perSeriesAligner is not specified
                       or equals ALIGN_NONE, then this
                       field is ignored. If
                       perSeriesAligner is specified and
                       does not equal ALIGN_NONE, then
                       this field must be defined;
                       otherwise an error is returned.
                   - !ruby/object:Api::Type::Enum
                     name: crossSeriesReducer
                     description: |
                       The approach to be used to combine
                       time series. Not all reducer
                       functions may be applied to all
                       time series, depending on the
                       metric type and the value type of
                       the original time series.
                       Reduction may change the metric
                       type of value type of the time
                       series.Time series data must be
                       aligned in order to perform cross-
                       time series reduction. If
                       crossSeriesReducer is specified,
                       then perSeriesAligner must be
                       specified and not equal ALIGN_NONE
                       and alignmentPeriod must be
                       specified; otherwise, an error is
                       returned.
                     values:
                       - :REDUCE_NONE
                       - :REDUCE_MEAN
                       - :REDUCE_MIN
                       - :REDUCE_MAX
                       - :REDUCE_SUM
                       - :REDUCE_STDDEV
                       - :REDUCE_COUNT
                       - :REDUCE_COUNT_TRUE
                       - :REDUCE_COUNT_FALSE
                       - :REDUCE_FRACTION_TRUE
                       - :REDUCE_PERCENTILE_99
                       - :REDUCE_PERCENTILE_95
                       - :REDUCE_PERCENTILE_50
                       - :REDUCE_PERCENTILE_05
              - !ruby/object:Api::Type::String
                name: duration
                required: true
                description: |
                  The amount of time that a time series must
                  violate the threshold to be considered
                  failing. Currently, only values that are a
                  multiple of a minute--e.g., 0, 60, 120, or
                  300 seconds--are supported. If an invalid
                  value is given, an error will be returned.
                  When choosing a duration, it is useful to
                  keep in mind the frequency of the underlying
                  time series data (which may also be affected
                  by any alignments specified in the
                  aggregations field); a good duration is long
                  enough so that a single outlier does not
                  generate spurious alerts, but short enough
                  that unhealthy states are detected and
                  alerted on quickly.
              - !ruby/object:Api::Type::Enum
                name: comparison
                description: |
                  The comparison to apply between the time
                  series (indicated by filter and aggregation)
                  and the threshold (indicated by
                  threshold_value). The comparison is applied
                  on each time series, with the time series on
                  the left-hand side and the threshold on the
                  right-hand side. Only COMPARISON_LT and
                  COMPARISON_GT are supported currently.
                values:
                  - :COMPARISON_GT
                  - :COMPARISON_GE
                  - :COMPARISON_LT
                  - :COMPARISON_LE
                  - :COMPARISON_EQ
                  - :COMPARISON_NE
                required: true
              - !ruby/object:Api::Type::NestedObject
                name: trigger
                description: |
                  The number/percent of time series for which
                  the comparison must hold in order for the
                  condition to trigger. If unspecified, then
                  the condition will trigger if the comparison
                  is true for any of the time series that have
                  been identified by filter and aggregations,
                  or by the ratio, if denominator_filter and
                  denominator_aggregations are specified.
                properties:
                 - !ruby/object:Api::Type::Double
                   name: percent
                   description: |
                     The percentage of time series that
                     must fail the predicate for the
                     condition to be triggered.
                 - !ruby/object:Api::Type::Integer
                   name: count
                   description: |
                     The absolute number of time series
                     that must fail the predicate for the
                     condition to be triggered.
              - !ruby/object:Api::Type::Array
                name: aggregations
                description: |
                  Specifies the alignment of data points in
                  individual time series as well as how to
                  combine the retrieved time series together
                  (such as when aggregating multiple streams
                  on each resource to a single stream for each
                  resource or when aggregating streams across
                  all members of a group of resources).
                  Multiple aggregations are applied in the
                  order specified.This field is similar to the
                  one in the MetricService.ListTimeSeries
                  request. It is advisable to use the
                  ListTimeSeries method when debugging this
                  field.
                item_type: !ruby/object:Api::Type::NestedObject
                  properties:
                   - !ruby/object:Api::Type::Enum
                     name: perSeriesAligner
                     description: |
                       The approach to be used to align
                       individual time series. Not all
                       alignment functions may be applied
                       to all time series, depending on
                       the metric type and value type of
                       the original time series.
                       Alignment may change the metric
                       type or the value type of the time
                       series.Time series data must be
                       aligned in order to perform cross-
                       time series reduction. If
                       crossSeriesReducer is specified,
                       then perSeriesAligner must be
                       specified and not equal ALIGN_NONE
                       and alignmentPeriod must be
                       specified; otherwise, an error is
                       returned.
                     values:
                       - :ALIGN_NONE
                       - :ALIGN_DELTA
                       - :ALIGN_RATE
                       - :ALIGN_INTERPOLATE
                       - :ALIGN_NEXT_OLDER
                       - :ALIGN_MIN
                       - :ALIGN_MAX
                       - :ALIGN_MEAN
                       - :ALIGN_COUNT
                       - :ALIGN_SUM
                       - :ALIGN_STDDEV
                       - :ALIGN_COUNT_TRUE
                       - :ALIGN_COUNT_FALSE
                       - :ALIGN_FRACTION_TRUE
                       - :ALIGN_PERCENTILE_99
                       - :ALIGN_PERCENTILE_95
                       - :ALIGN_PERCENTILE_50
                       - :ALIGN_PERCENTILE_05
                       - :ALIGN_PERCENT_CHANGE
                   - !ruby/object:Api::Type::Array
                     name: groupByFields
                     description: |
                       The set of fields to preserve when
                       crossSeriesReducer is specified.
                       The groupByFields determine how
                       the time series are partitioned
                       into subsets prior to applying the
                       aggregation function. Each subset
                       contains time series that have the
                       same value for each of the
                       grouping fields. Each individual
                       time series is a member of exactly
                       one subset. The crossSeriesReducer
                       is applied to each subset of time
                       series. It is not possible to
                       reduce across different resource
                       types, so this field implicitly
                       contains resource.type. Fields not
                       specified in groupByFields are
                       aggregated away. If groupByFields
                       is not specified and all the time
                       series have the same resource
                       type, then the time series are
                       aggregated into a single output
                       time series. If crossSeriesReducer
                       is not defined, this field is
                       ignored.
                     item_type: Api::Type::String
                   - !ruby/object:Api::Type::String
                     name: alignmentPeriod
                     description: |
                       The alignment period for per-time
                       series alignment. If present,
                       alignmentPeriod must be at least
                       60 seconds. After per-time series
                       alignment, each time series will
                       contain data points only on the
                       period boundaries. If
                       perSeriesAligner is not specified
                       or equals ALIGN_NONE, then this
                       field is ignored. If
                       perSeriesAligner is specified and
                       does not equal ALIGN_NONE, then
                       this field must be defined;
                       otherwise an error is returned.
                   - !ruby/object:Api::Type::Enum
                     name: crossSeriesReducer
                     description: |
                       The approach to be used to combine
                       time series. Not all reducer
                       functions may be applied to all
                       time series, depending on the
                       metric type and the value type of
                       the original time series.
                       Reduction may change the metric
                       type of value type of the time
                       series.Time series data must be
                       aligned in order to perform cross-
                       time series reduction. If
                       crossSeriesReducer is specified,
                       then perSeriesAligner must be
                       specified and not equal ALIGN_NONE
                       and alignmentPeriod must be
                       specified; otherwise, an error is
                       returned.
                     values:
                       - :REDUCE_NONE
                       - :REDUCE_MEAN
                       - :REDUCE_MIN
                       - :REDUCE_MAX
                       - :REDUCE_SUM
                       - :REDUCE_STDDEV
                       - :REDUCE_COUNT
                       - :REDUCE_COUNT_TRUE
                       - :REDUCE_COUNT_FALSE
                       - :REDUCE_FRACTION_TRUE
                       - :REDUCE_PERCENTILE_99
                       - :REDUCE_PERCENTILE_95
                       - :REDUCE_PERCENTILE_50
                       - :REDUCE_PERCENTILE_05
              - !ruby/object:Api::Type::String
                name: filter
                description: |
                  A filter that identifies which time series
                  should be compared with the threshold.The
                  filter is similar to the one that is
                  specified in the
                  MetricService.ListTimeSeries request (that
                  call is useful to verify the time series
                  that will be retrieved / processed) and must
                  specify the metric type and optionally may
                  contain restrictions on resource type,
                  resource labels, and metric labels. This
                  field may not exceed 2048 Unicode characters
                  in length.
           - !ruby/object:Api::Type::String
             name: displayName
             required: true
             description: |
               A short name or phrase used to identify the
               condition in dashboards, notifications, and
               incidents. To avoid confusion, don't use the same
               display name for multiple conditions in the same
               policy.
        required: true
      - !ruby/object:Api::Type::Array
        name: 'notificationChannels'
        # TODO chrisst - turn this into a resource ref
        description: |
          Identifies the notification channels to which notifications should be
          sent when incidents are opened or closed or when new violations occur
          on an already opened incident. Each element of this array corresponds
          to the name field in each of the NotificationChannel objects that are
          returned from the notificationChannels.list method. The syntax of the
          entries in this field is
          `projects/[PROJECT_ID]/notificationChannels/[CHANNEL_ID]`
        item_type: Api::Type::String
      - !ruby/object:Api::Type::KeyValuePairs
        name: userLabels
        description: |
          This field is intended to be used for organizing and identifying the AlertPolicy
          objects.The field can contain up to 64 entries. Each key and value is limited
          to 63 Unicode characters or 128 bytes, whichever is smaller. Labels and values
          can contain only lowercase letters, numerals, underscores, and dashes. Keys
          must begin with a letter.
      - !ruby/object:Api::Type::NestedObject
        name: documentation
        description: |
          A short name or phrase used to identify the policy in dashboards,
          notifications, and incidents. To avoid confusion, don't use the same
          display name for multiple policies in the same project. The name is
          limited to 512 Unicode characters.
        properties:
          - !ruby/object:Api::Type::String
           name: content
           at_least_one_of:
            - documentation.0.content
            - documentation.0.mime_type
           description: |
            The text of the documentation, interpreted according to mimeType.
            The content may not exceed 8,192 Unicode characters and may not
            exceed more than 10,240 bytes when encoded in UTF-8 format,
            whichever is smaller.
          - !ruby/object:Api::Type::String
            name: mimeType
            at_least_one_of:
              - documentation.0.content
              - documentation.0.mime_type
            default_value: text/markdown
            description: |
              The format of the content field. Presently, only the value
              "text/markdown" is supported.


  - !ruby/object:Api::Resource
    name: 'Group'
    base_url: projects/{{project}}/groups
    self_link: "{{name}}"
    update_verb: :PUT
    description: |
      The description of a dynamic collection of monitored resources. Each group
      has a filter that is matched against monitored resources and their
      associated metadata. If a group's filter matches an available monitored
      resource, then that resource is a member of that group.
    references: !ruby/object:Api::Resource::ReferenceLinks
      guides:
        'Official Documentation':
          'https://cloud.google.com/monitoring/groups/'
      api: 'https://cloud.google.com/monitoring/api/ref_v3/rest/v3/projects.groups'
    properties:
      - !ruby/object:Api::Type::String
        name: parentName
        # TODO chrisst - turn into self-reference if possible.
        description: |
          The name of the group's parent, if it has one. The format is
          "projects/{project_id_or_number}/groups/{group_id}". For
          groups with no parent, parentName is the empty string, "".
      - !ruby/object:Api::Type::String
        name: name
        description: |
          A unique identifier for this group. The format is
          "projects/{project_id_or_number}/groups/{group_id}".
        output: true
      - !ruby/object:Api::Type::Boolean
        name: isCluster
        description: |
          If true, the members of this group are considered to be a
          cluster. The system can perform additional analysis on
          groups that are clusters.
      - !ruby/object:Api::Type::String
        name: displayName
        required: true
        description: |
          A user-assigned name for this group, used only for display
          purposes.
      - !ruby/object:Api::Type::String
        name: filter
        required: true
        description: |
          The filter used to determine which monitored resources
          belong to this group.


  - !ruby/object:Api::Resource
    name: NotificationChannel
    base_url: projects/{{project}}/notificationChannels
    self_link: "{{name}}"
    update_verb: :PATCH
    description: |
      A NotificationChannel is a medium through which an alert is delivered
      when a policy violation is detected. Examples of channels include email, SMS,
      and third-party messaging applications. Fields containing sensitive information
      like authentication tokens or contact info are only partially populated on retrieval.

      Notification Channels are designed to be flexible and are made up of a supported `type`
      and labels to configure that channel. Each `type` has specific labels that need to be
      present for that channel to be correctly configured. The labels that are required to be
      present for one channel `type` are often different than those required for another.
      Due to these loose constraints it's often best to set up a channel through the UI
      and import to Terraform when setting up a brand new channel type to determine which
      labels are required.

      A list of supported channels per project the `list` endpoint can be
      accessed programmatically or through the api explorer at  https://cloud.google.com/monitoring/api/ref_v3/rest/v3/projects.notificationChannelDescriptors/list .
      This provides the channel type and all of the required labels that must be passed.
    references: !ruby/object:Api::Resource::ReferenceLinks
      guides:
        'Notification Options': 'https://cloud.google.com/monitoring/support/notification-options'
        'Monitoring API Documentation': 'https://cloud.google.com/monitoring/api/v3/'
      api: 'https://cloud.google.com/monitoring/api/ref_v3/rest/v3/projects.notificationChannels'
    properties:
    - !ruby/object:Api::Type::KeyValuePairs
      name: labels
      description: Configuration fields that define the channel and its behavior. The
        permissible and required labels are specified in the NotificationChannelDescriptor.labels
        of the NotificationChannelDescriptor corresponding to the type field.
    - !ruby/object:Api::Type::NestedObject
      name: sensitiveLabels
      # This is a helper object for Terraform only
      exclude: true
      url_param_only: true
      description: |
        Terraform only field
      properties:
        - !ruby/object:Api::Type::String
          name: authToken
          exactly_one_of:
            - sensitive_labels.0.auth_token
            - sensitive_labels.0.password
            - sensitive_labels.0.service_key
          description: |
            An authorization token for a notification channel. Channel types that support this field include: slack
        - !ruby/object:Api::Type::String
          name: password
          exactly_one_of:
            - sensitive_labels.0.auth_token
            - sensitive_labels.0.password
            - sensitive_labels.0.service_key
          description: |
            An password for a notification channel. Channel types that support this field include: webhook_basicauth
        - !ruby/object:Api::Type::String
          name: serviceKey
          exactly_one_of:
            - sensitive_labels.0.auth_token
            - sensitive_labels.0.password
            - sensitive_labels.0.service_key
          description: |
            An servicekey token for a notification channel. Channel types that support this field include: pagerduty
    - !ruby/object:Api::Type::String
      name: name
      description: |
        The full REST resource name for this channel. The syntax is:
        projects/[PROJECT_ID]/notificationChannels/[CHANNEL_ID]
        The [CHANNEL_ID] is automatically assigned by the server on creation.
      output: true
    - !ruby/object:Api::Type::Enum
      name: verificationStatus
      description: Indicates whether this channel has been verified or not. On a ListNotificationChannels
        or GetNotificationChannel operation, this field is expected to be populated.If
        the value is UNVERIFIED, then it indicates that the channel is non-functioning
        (it both requires verification and lacks verification); otherwise, it is assumed
        that the channel works.If the channel is neither VERIFIED nor UNVERIFIED, it
        implies that the channel is of a type that does not require verification or
        that this specific channel has been exempted from verification because it was
        created prior to verification being required for channels of this type.This
        field cannot be modified using a standard UpdateNotificationChannel operation.
        To change the value of this field, you must call VerifyNotificationChannel.
      output: true
      values:
      - :VERIFICATION_STATUS_UNSPECIFIED
      - :UNVERIFIED
      - :VERIFIED
    - !ruby/object:Api::Type::String
      name: type
      required: true
      description: The type of the notification channel. This field matches the value
        of the NotificationChannelDescriptor.type field. See
        https://cloud.google.com/monitoring/api/ref_v3/rest/v3/projects.notificationChannelDescriptors/list
        to get the list of valid values such as "email", "slack", etc...
    - !ruby/object:Api::Type::KeyValuePairs
      name: userLabels
      description: User-supplied key/value data that does not need to conform to the
        corresponding NotificationChannelDescriptor's schema, unlike the labels field.
        This field is intended to be used for organizing and identifying the NotificationChannel
        objects.The field can contain up to 64 entries. Each key and value is limited
        to 63 Unicode characters or 128 bytes, whichever is smaller. Labels and values
        can contain only lowercase letters, numerals, underscores, and dashes. Keys
        must begin with a letter.
    - !ruby/object:Api::Type::String
      name: description
      description: An optional human-readable description of this notification channel.
        This description may provide additional details, beyond the display name, for
        the channel. This may not exceed 1024 Unicode characters.
    - !ruby/object:Api::Type::String
      name: displayName
      required: true
      description: An optional human-readable name for this notification channel. It
        is recommended that you specify a non-empty and unique name in order to make
        it easier to identify the channels in your project, though this is not enforced.
        The display name is limited to 512 Unicode characters.
    - !ruby/object:Api::Type::Boolean
      name: enabled
      default_value: true
      send_empty_value: true
      description: Whether notifications are forwarded to the described channel. This
        makes it possible to disable delivery of notifications to a particular channel
        without removing the channel from all alerting policies that reference the channel.
        This is a more convenient approach when the change is temporary and you want
        to receive notifications from the same set of alerting policies on the channel
        at some point in the future.

  - !ruby/object:Api::Resource
    name: Service
    base_url: projects/{{project}}/services
    create_url: projects/{{project}}/services?serviceId={{service_id}}
    self_link: "{{name}}"
    min_version: beta
    update_verb: :PATCH
    description: |
      The root resource under which operational aspects of a service are
      accessible, where a service is some discrete, autonomous, and
      network-accessible unit, designed to solve an individual concern.
    references: !ruby/object:Api::Resource::ReferenceLinks
      guides:
        'Service Monitoring': 'https://cloud.google.com/monitoring/service-monitoring'
        'Monitoring API Documentation': 'https://cloud.google.com/monitoring/api/v3/'
      api: 'https://cloud.google.com/monitoring/api/ref_v3/rest/v3/services'
    properties:
    - !ruby/object:Api::Type::String
      name: serviceId
      description: |
        An service ID to use.
      url_param_only: true
      input: true
    - !ruby/object:Api::Type::String
      name: name
      description: |
        The full resource name for this service. The syntax is:
        projects/[PROJECT_ID]/services/[SERVICE_ID].
      output: true
    - !ruby/object:Api::Type::String
      name: displayName
      description: |
        Name used for UI elements listing this Service.
    - !ruby/object:Api::Type::NestedObject
      name: telemetry
      description: |
        Configuration for how to query telemetry on a Service.
      properties:
        - !ruby/object:Api::Type::String
          name: resourceName
          description: |
            The full name of the resource that defines this service.
            Formatted as described in
            https://cloud.google.com/apis/design/resource_names.

  - !ruby/object:Api::Resource
    name: UptimeCheckConfig
    update_verb: :PATCH
    update_mask: true
    references: !ruby/object:Api::Resource::ReferenceLinks
      guides:
        'Official Documentation':
          'https://cloud.google.com/monitoring/uptime-checks/'
      api: 'https://cloud.google.com/monitoring/api/ref_v3/rest/v3/projects.uptimeCheckConfigs'
    base_url: projects/{{project}}/uptimeCheckConfigs
    self_link: "{{name}}"
    description: This message configures which resources and services to monitor for
      availability.
    properties:
    - !ruby/object:Api::Type::String
      name: name
      output: true
      description: A unique resource name for this UptimeCheckConfig. The format is projects/[PROJECT_ID]/uptimeCheckConfigs/[UPTIME_CHECK_ID].
    - !ruby/object:Api::Type::String
      name: id
      description: The id of the uptime check
      output: true
    - !ruby/object:Api::Type::String
      name: displayName
      required: true
      description: A human-friendly name for the uptime check configuration. The display
        name should be unique within a Stackdriver Workspace in order to make it easier
        to identify; however, uniqueness is not enforced.
    - !ruby/object:Api::Type::String
      name: period
      default_value: "300s"
      input: true
      description: How often, in seconds, the uptime check is performed. Currently,
        the only supported values are 60s (1 minute), 300s (5 minutes), 600s (10 minutes),
        and 900s (15 minutes). Optional, defaults to 300s.
    - !ruby/object:Api::Type::String
      name: timeout
      required: true
      description: The maximum amount of time to wait for the request to complete (must
        be between 1 and 60 seconds).
        Accepted formats https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#google.protobuf.Duration
    - !ruby/object:Api::Type::Array
      name: contentMatchers
      description: The expected content on the page the check is run against. Currently,
        only the first entry in the list is supported, and other entries will be ignored.
        The server will look for an exact match of the string in the page response's
        content. This field is optional and should only be specified if a content match
        is required.
      item_type: !ruby/object:Api::Type::NestedObject
        properties:
        - !ruby/object:Api::Type::String
          name: content
          description: String or regex content to match (max 1024 bytes)
          required: true
    - !ruby/object:Api::Type::Array
      name: selectedRegions
      description: The list of regions from which the check will be run. Some regions
        contain one location, and others contain more than one. If this field is specified,
        enough regions to include a minimum of 3 locations must be provided, or an error
        message is returned. Not specifying this field will result in uptime checks
        running from all regions.
      item_type: Api::Type::String
    - !ruby/object:Api::Type::NestedObject
      name: httpCheck
      description: Contains information needed to make an HTTP or HTTPS check.
      exactly_one_of:
        - http_check
        - tcp_check
      properties:
      - !ruby/object:Api::Type::NestedObject
        name: authInfo
        at_least_one_of:
          - http_check.0.auth_info
          - http_check.0.port
          - http_check.0.headers
          - http_check.0.path
          - http_check.0.use_ssl
          - http_check.0.mask_headers
        description: The authentication information. Optional when creating an HTTP
          check; defaults to empty.
        properties:
        - !ruby/object:Api::Type::String
          name: password
          required: true
          description: The password to authenticate.
        - !ruby/object:Api::Type::String
          name: username
          required: true
          description: The username to authenticate.
      - !ruby/object:Api::Type::Integer
        name: port
        at_least_one_of:
          - http_check.0.auth_info
          - http_check.0.port
          - http_check.0.headers
          - http_check.0.path
          - http_check.0.use_ssl
          - http_check.0.mask_headers
        description: The port to the page to run the check against. Will be combined
          with host (specified within the MonitoredResource) and path to construct the
          full URL. Optional (defaults to 80 without SSL, or 443 with SSL).
      - !ruby/object:Api::Type::KeyValuePairs
        name: headers
        at_least_one_of:
          - http_check.0.auth_info
          - http_check.0.port
          - http_check.0.headers
          - http_check.0.path
          - http_check.0.use_ssl
          - http_check.0.mask_headers
        description: The list of headers to send as part of the uptime check request.
          If two headers have the same key and different values, they should be entered
          as a single header, with the value being a comma-separated list of all the
          desired values as described at https://www.w3.org/Protocols/rfc2616/rfc2616.txt
          (page 31). Entering two separate headers with the same key in a Create call
          will cause the first to be overwritten by the second. The maximum number of
          headers allowed is 100.
      - !ruby/object:Api::Type::String
        name: path
        at_least_one_of:
          - http_check.0.auth_info
          - http_check.0.port
          - http_check.0.headers
          - http_check.0.path
          - http_check.0.use_ssl
          - http_check.0.mask_headers
        default_value: "/"
        description: The path to the page to run the check against. Will be combined
          with the host (specified within the MonitoredResource) and port to construct
          the full URL. Optional (defaults to "/").
      - !ruby/object:Api::Type::Boolean
        name: useSsl
        at_least_one_of:
          - http_check.0.auth_info
          - http_check.0.port
          - http_check.0.headers
          - http_check.0.path
          - http_check.0.use_ssl
          - http_check.0.mask_headers
        description: If true, use HTTPS instead of HTTP to run the check.
      - !ruby/object:Api::Type::Boolean
        name: validateSsl
        description: Boolean specifying whether to include SSL certificate validation
          as a part of the Uptime check. Only applies to checks where monitoredResource
          is set to uptime_url. If useSsl is false, setting validateSsl to true has no effect.
      - !ruby/object:Api::Type::Boolean
        name: maskHeaders
        at_least_one_of:
          - http_check.0.auth_info
          - http_check.0.port
          - http_check.0.headers
          - http_check.0.path
          - http_check.0.use_ssl
          - http_check.0.mask_headers
        description: Boolean specifying whether to encrypt the header information.
          Encryption should be specified for any headers related to authentication that
          you do not wish to be seen when retrieving the configuration. The server will
          be responsible for encrypting the headers. On Get/List calls, if mask_headers
          is set to True then the headers will be obscured with ******.
    - !ruby/object:Api::Type::NestedObject
      name: tcpCheck
      description: Contains information needed to make a TCP check.
      exactly_one_of:
        - http_check
        - tcp_check
      properties:
      - !ruby/object:Api::Type::Integer
        name: port
        required: true
        description: The port to the page to run the check against. Will be combined
          with host (specified within the MonitoredResource) to construct the full URL.
    - !ruby/object:Api::Type::NestedObject
      name: resourceGroup
      input: true
      description: The group resource associated with the configuration.
      exactly_one_of:
        - monitored_resource
        - resource_group
      properties:
      - !ruby/object:Api::Type::Enum
        name: resourceType
        input: true
        at_least_one_of:
          - resource_group.0.resource_type
          - resource_group.0.group_id
        description: The resource type of the group members.
        values:
        - :RESOURCE_TYPE_UNSPECIFIED
        - :INSTANCE
        - :AWS_ELB_LOAD_BALANCER
      - !ruby/object:Api::Type::ResourceRef
        name: groupId
        input: true
        at_least_one_of:
          - resource_group.0.resource_type
          - resource_group.0.group_id
        resource: Group
        imports: name
        description: The group of resources being monitored. Should be the `name` of a group
    - !ruby/object:Api::Type::NestedObject
      name: monitoredResource
      input: true
      description: 'The monitored resource (https://cloud.google.com/monitoring/api/resources)
        associated with the configuration. The following monitored resource types are
        supported for uptime checks:  uptime_url  gce_instance  gae_app  aws_ec2_instance  aws_elb_load_balancer'
      exactly_one_of:
        - monitored_resource
        - resource_group
      properties:
      - !ruby/object:Api::Type::String
        name: type
        input: true
        required: true
        description: The monitored resource type. This field must match the type field of a MonitoredResourceDescriptor
          (https://cloud.google.com/monitoring/api/ref_v3/rest/v3/projects.monitoredResourceDescriptors#MonitoredResourceDescriptor)
          object. For example, the type of a Compute Engine VM instance is gce_instance. For a list of types, see
          Monitoring resource types (https://cloud.google.com/monitoring/api/resources)
          and Logging resource types (https://cloud.google.com/logging/docs/api/v2/resource-list).
      - !ruby/object:Api::Type::KeyValuePairs
        name: labels
        input: true
        required: true
        description: Values for all of the labels listed in the associated
          monitored resource descriptor. For example, Compute Engine VM instances use
          the labels "project_id", "instance_id", and "zone".