--- !ruby/object:Provider::Ansible::Example
task: !ruby/object:Provider::Ansible::Task
  name: gcp_compute_health_check
  code: |
      name: <%= ctx[:name] %>
      type: TCP
      tcp_health_check:
        port_name: service-health
        request: ping
        response: pong
      healthy_threshold: 10
      timeout_sec: 2
      unhealthy_threshold: 5
      project: <%= ctx[:project] %>
      auth_kind: <%= ctx[:auth_kind] %>
      service_account_file: <%= ctx[:service_account_file] %>
verifier: !ruby/object:Provider::Ansible::Verifier
  command: |
    gcloud compute health-checks describe
      --project="{{gcp_project}}"
      "{{ resource_name }}"
  failure: !ruby/object:Provider::Ansible::ComputeFailureCondition
    region: global
    type: healthChecks
