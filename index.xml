<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Overview on Magic Modules</title><link>https://googlecloudplatform.github.io/magic-modules/</link><description>Recent content in Overview on Magic Modules</description><generator>Hugo</generator><language>en-us</language><atom:link href="https://googlecloudplatform.github.io/magic-modules/index.xml" rel="self" type="application/rss+xml"/><item><title>Add documentation</title><link>https://googlecloudplatform.github.io/magic-modules/document/add-documentation/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://googlecloudplatform.github.io/magic-modules/document/add-documentation/</guid><description>&lt;h1 id="add-documentation">
 Add documentation
 &lt;a class="anchor" href="#add-documentation">#&lt;/a>
&lt;/h1>
&lt;p>Documentation is autogenerated based on the resource and field configurations. This page describes how to add documentation to resources and fields.&lt;/p>
&lt;p>For more information about types of resources and the generation process overall, see &lt;a href="https://googlecloudplatform.github.io/magic-modules/">How Magic Modules works&lt;/a>.&lt;/p>
&lt;h2 id="before-you-begin">
 Before you begin
 &lt;a class="anchor" href="#before-you-begin">#&lt;/a>
&lt;/h2>
&lt;ol>
&lt;li>Complete the steps in &lt;a href="https://googlecloudplatform.github.io/magic-modules/develop/set-up-dev-environment/">Set up your development environment&lt;/a> to set up your environment and your Google Cloud project.&lt;/li>
&lt;li>Ensure that your &lt;code>magic-modules&lt;/code>, &lt;code>terraform-provider-google&lt;/code>, and &lt;code>terraform-provider-google-beta&lt;/code> repositories are up to date.
&lt;pre tabindex="0">&lt;code>cd ~/magic-modules
git checkout main &amp;amp;&amp;amp; git clean -f . &amp;amp;&amp;amp; git checkout -- . &amp;amp;&amp;amp; git pull
cd $GOPATH/src/github.com/hashicorp/terraform-provider-google
git checkout main &amp;amp;&amp;amp; git clean -f . &amp;amp;&amp;amp; git checkout -- . &amp;amp;&amp;amp; git pull
cd $GOPATH/src/github.com/hashicorp/terraform-provider-google-beta
git checkout main &amp;amp;&amp;amp; git clean -f . &amp;amp;&amp;amp; git checkout -- . &amp;amp;&amp;amp; git pull
&lt;/code>&lt;/pre>&lt;/li>
&lt;/ol>
&lt;h2 id="add-documentation-1">
 Add documentation
 &lt;a class="anchor" href="#add-documentation-1">#&lt;/a>
&lt;/h2>




&lt;div class="book-tabs">&lt;input type="radio" class="toggle" name="tabs-docs" id="tabs-docs-0" checked="checked" />
 &lt;label for="tabs-docs-0">MMv1&lt;/label>
 &lt;div class="book-tabs-content markdown-inner">&lt;p>To preview the documentation:&lt;/p></description></item><item><title>Add resource tests</title><link>https://googlecloudplatform.github.io/magic-modules/test/test/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://googlecloudplatform.github.io/magic-modules/test/test/</guid><description>&lt;h1 id="add-resource-tests">
 Add resource tests
 &lt;a class="anchor" href="#add-resource-tests">#&lt;/a>
&lt;/h1>
&lt;p>This page describes how to add tests to a new resource in the &lt;code>google&lt;/code> or &lt;code>google-beta&lt;/code> Terraform provider.&lt;/p>
&lt;p>The providers have two basic types of tests:&lt;/p>
&lt;ul>
&lt;li>Unit tests: test specific functions thoroughly. Unit tests do not interact with GCP APIs.&lt;/li>
&lt;li>Acceptance tests (aka VCR tests, or create and update tests): test that resources interact as expected with the APIs. Acceptance tests interact with GCP APIs, but should only test the provider&amp;rsquo;s behavior in constructing the API requests and parsing the responses.&lt;/li>
&lt;/ul>
&lt;p>Acceptance tests are also called &amp;ldquo;VCR tests&amp;rdquo; because they use &lt;a href="https://github.com/dnaeon/go-vcr">&lt;code>go-vcr&lt;/code>&lt;/a> to record and play back HTTP requests. This allows tests to run more quickly on PRs because the resources don&amp;rsquo;t actually need to be created, updated, or destroyed by the live API.&lt;/p></description></item><item><title>Create a pull request</title><link>https://googlecloudplatform.github.io/magic-modules/code-review/create-pr/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://googlecloudplatform.github.io/magic-modules/code-review/create-pr/</guid><description>&lt;h1 id="create-a-pull-request-pr">
 Create a pull request (PR)
 &lt;a class="anchor" href="#create-a-pull-request-pr">#&lt;/a>
&lt;/h1>
&lt;h2 id="requirements">
 Requirements
 &lt;a class="anchor" href="#requirements">#&lt;/a>
&lt;/h2>
&lt;ol>
&lt;li>Make sure your &lt;a href="https://docs.github.com/en/get-started/quickstart/github-flow#create-a-branch">branch&lt;/a> contains a single self-contained change. For example:
&lt;ul>
&lt;li>If you are adding multiple resources to the provider, only put one resource in each PR - even if the product requires all resources to be present before it can be meaningfully used.&lt;/li>
&lt;li>If you are adding a few fields and also fixing a bug, create one PR for adding the new fields and a separate PR for the bugs.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Follow the instructions at &lt;a href="https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/creating-a-pull-request">Creating a pull request&lt;/a> to create a pull request to merge your branch into &lt;code>GoogleCloudPlatform/magic-modules&lt;/code>.
&lt;ul>
&lt;li>Make sure the PR body includes the text &lt;code>Fixes GITHUB_ISSUE_LINK.&lt;/code> once per issue resolved by your PR. Replace &lt;code>GITHUB_ISSUE_LINK&lt;/code> with a link to a GitHub issue from the &lt;a href="https://github.com/hashicorp/terraform-provider-google/issues">provider issue tracker&lt;/a>.&lt;/li>
&lt;li>&lt;a href="https://googlecloudplatform.github.io/magic-modules/code-review/release-notes/">Write release notes&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h2 id="code-review">
 Code review
 &lt;a class="anchor" href="#code-review">#&lt;/a>
&lt;/h2>
&lt;ol>
&lt;li>A reviewer will automatically be assigned to your PR.&lt;/li>
&lt;li>Creating a new pull request or pushing a new commit automatically triggers our CI pipelines and workflows. After CI starts, downstream diff generation takes about 10 minutes; &lt;a href="https://googlecloudplatform.github.io/magic-modules/test/test/">VCR tests&lt;/a> can take up to 2 hours. If you are a community contributor, some tests will only run after approval from a reviewer.
&lt;ul>
&lt;li>While convenient, relying on CI to test iterative changes to PRs often adds extreme latency to reviews if there are errors in test configurations or at runtime. We &lt;strong>strongly&lt;/strong> recommend you &lt;a href="https://googlecloudplatform.github.io/magic-modules/test/run-tests/">test your changes locally before pushing&lt;/a> even after the initial change.&lt;/li>
&lt;li>VCR tests will first attempt to play back recorded HTTP requests (REPLAYING mode). If any tests fail, they will run in RECORDING mode to generate a new cassette; then, the same tests will run again in REPLAYING mode to detect any nondeterministic behavior in the test (which can cause flaky tests.)&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>If your assigned reviewer does not respond to changes on a pull request within two US business days, ping them on the pull request.&lt;/li>
&lt;/ol>
&lt;blockquote class="book-hint info">
 &lt;p>&lt;strong>TIP:&lt;/strong> Speeding up review:&lt;/p></description></item><item><title>Immutable fields</title><link>https://googlecloudplatform.github.io/magic-modules/best-practices/immutable-fields/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://googlecloudplatform.github.io/magic-modules/best-practices/immutable-fields/</guid><description>&lt;h1 id="immutable-fields">
 Immutable fields
 &lt;a class="anchor" href="#immutable-fields">#&lt;/a>
&lt;/h1>
&lt;blockquote class="book-hint info">
 &lt;strong>Note:&lt;/strong> This page covers best practices guidance for the Terraform provider for Google Cloud, which is used to ensure a consistent UX for Terraform users across providers or GCP users across the Google provider. Generally, this guidance should be followed and exceptions should be clearly demarcated / discussed.
&lt;/blockquote>

&lt;p>&lt;a href="https://developer.hashicorp.com/terraform/intro#how-does-terraform-work">&lt;code>ForceNew&lt;/code>&lt;/a> in a Terraform resource schema attribute that indicates that a field is immutable – that is, that a change to the field requires the resource to be destroyed and recreated.&lt;/p></description></item><item><title>MMv1 resource reference</title><link>https://googlecloudplatform.github.io/magic-modules/reference/resource/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://googlecloudplatform.github.io/magic-modules/reference/resource/</guid><description>&lt;h1 id="mmv1-resource-reference">
 MMv1 resource reference
 &lt;a class="anchor" href="#mmv1-resource-reference">#&lt;/a>
&lt;/h1>
&lt;p>This page documents commonly-used properties for resources. For a full list of
available properties, see &lt;a href="https://github.com/GoogleCloudPlatform/magic-modules/blob/main/mmv1/api/resource.go">resource.go ↗&lt;/a>.&lt;/p>
&lt;h2 id="basic">
 Basic
 &lt;a class="anchor" href="#basic">#&lt;/a>
&lt;/h2>
&lt;h3 id="name">
 &lt;code>name&lt;/code>
 &lt;a class="anchor" href="#name">#&lt;/a>
&lt;/h3>
&lt;p>API resource name.&lt;/p>
&lt;h3 id="description">
 &lt;code>description&lt;/code>
 &lt;a class="anchor" href="#description">#&lt;/a>
&lt;/h3>
&lt;p>Resource description. Used in documentation.&lt;/p>
&lt;p>Example:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">description&lt;/span>: |&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> This is a multi-line description
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> of a resource. All multi-line descriptions must follow
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> this format of using a vertical bar followed by a line-break,
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> with the remaining description being indented.&lt;/span> 
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="references">
 &lt;code>references&lt;/code>
 &lt;a class="anchor" href="#references">#&lt;/a>
&lt;/h3>
&lt;p>Links to reference documentation for a resource. Contains two attributes:&lt;/p></description></item><item><title>Set up your development environment</title><link>https://googlecloudplatform.github.io/magic-modules/develop/set-up-dev-environment/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://googlecloudplatform.github.io/magic-modules/develop/set-up-dev-environment/</guid><description>&lt;h1 id="set-up-your-development-environment">
 Set up your development environment
 &lt;a class="anchor" href="#set-up-your-development-environment">#&lt;/a>
&lt;/h1>
&lt;p>Before you start adding or updating a Terraform resource using
&lt;a href="https://googlecloudplatform.github.io/magic-modules/">magic-modules&lt;/a>, you must first set up your environment by
installing the necessary tools. This page explains the steps for setting up your
development environment.&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;a href="https://cloud.google.com/sdk/docs/install">Install the gcloud CLI.&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>In the Google Cloud console, on the project selector page, select or
&lt;a href="https://cloud.google.com/resource-manager/docs/creating-managing-projects">create a Google Cloud project&lt;/a>.
&lt;blockquote class="book-hint info">
 &lt;strong>Note:&lt;/strong> If you don&amp;rsquo;t already have a project to use for testing changes to
the Terraform providers, create a project instead of selecting an existing
poject. After you finish these steps, you can delete the project, removing
all resources associated with the project.
&lt;/blockquote>




 
 


&lt;a href="https://console.cloud.google.com/projectselector2/home/dashboard" target="_blank" rel="noopener" class="book-btn">
 Go to project selector
&lt;/a>
&lt;/p></description></item><item><title>Types of breaking changes</title><link>https://googlecloudplatform.github.io/magic-modules/breaking-changes/breaking-changes/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://googlecloudplatform.github.io/magic-modules/breaking-changes/breaking-changes/</guid><description>&lt;h1 id="types-of-breaking-changes">
 Types of breaking changes
 &lt;a class="anchor" href="#types-of-breaking-changes">#&lt;/a>
&lt;/h1>
&lt;p>A &amp;ldquo;breaking change&amp;rdquo; is any change that requires an end user to modify a
previously-valid configuration after a provider upgrade. In this context,
a &amp;ldquo;valid configuration&amp;rdquo; is one that:&lt;/p>
&lt;ul>
&lt;li>Is considered syntactically correct by &lt;code>terraform validate&lt;/code>&lt;/li>
&lt;li>Does not return an error during &lt;code>terraform apply&lt;/code>&lt;/li>
&lt;li>Creates, updates, deletes, or does not modify resources&lt;/li>
&lt;li>Only manages resources that have not been altered with other tools,
such as &lt;code>gcloud&lt;/code> or Cloud Console.&lt;/li>
&lt;/ul>
&lt;p>This document lists many types of breaking changes but may not be entirely
comprehensive. Some types of changes that would normally be &amp;ldquo;breaking&amp;rdquo; may
have specific mitigating circumstances that make them non-breaking.&lt;/p></description></item><item><title>Add a resource</title><link>https://googlecloudplatform.github.io/magic-modules/develop/add-resource/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://googlecloudplatform.github.io/magic-modules/develop/add-resource/</guid><description>&lt;h1 id="add-a-resource">
 Add a resource
 &lt;a class="anchor" href="#add-a-resource">#&lt;/a>
&lt;/h1>
&lt;p>This page describes how to add a new resource to the &lt;code>google&lt;/code> or &lt;code>google-beta&lt;/code> Terraform provider using MMv1 and/or handwritten code.&lt;/p>
&lt;p>For more information about types of resources and the generation process overall, see &lt;a href="https://googlecloudplatform.github.io/magic-modules/">How Magic Modules works&lt;/a>.&lt;/p>
&lt;h2 id="before-you-begin">
 Before you begin
 &lt;a class="anchor" href="#before-you-begin">#&lt;/a>
&lt;/h2>
&lt;ol>
&lt;li>Complete the steps in &lt;a href="https://googlecloudplatform.github.io/magic-modules/develop/set-up-dev-environment/">Set up your development environment&lt;/a> to set up your environment and your Google Cloud project.&lt;/li>
&lt;li>Ensure that your &lt;code>magic-modules&lt;/code>, &lt;code>terraform-provider-google&lt;/code>, and &lt;code>terraform-provider-google-beta&lt;/code> repositories are up to date.
&lt;pre tabindex="0">&lt;code>cd ~/magic-modules
git checkout main &amp;amp;&amp;amp; git clean -f . &amp;amp;&amp;amp; git checkout -- . &amp;amp;&amp;amp; git pull
cd $GOPATH/src/github.com/hashicorp/terraform-provider-google
git checkout main &amp;amp;&amp;amp; git clean -f . &amp;amp;&amp;amp; git checkout -- . &amp;amp;&amp;amp; git pull
cd $GOPATH/src/github.com/hashicorp/terraform-provider-google-beta
git checkout main &amp;amp;&amp;amp; git clean -f . &amp;amp;&amp;amp; git checkout -- . &amp;amp;&amp;amp; git pull
&lt;/code>&lt;/pre>&lt;/li>
&lt;/ol>
&lt;h2 id="add-a-resource-1">
 Add a resource
 &lt;a class="anchor" href="#add-a-resource-1">#&lt;/a>
&lt;/h2>




&lt;div class="book-tabs">&lt;input type="radio" class="toggle" name="tabs-resource" id="tabs-resource-0" checked="checked" />
 &lt;label for="tabs-resource-0">MMv1&lt;/label>
 &lt;div class="book-tabs-content markdown-inner">&lt;ol>
&lt;li>
&lt;p>Using an editor of your choice, in the appropriate &lt;a href="https://googlecloudplatform.github.io/magic-modules/#mmv1">product folder&lt;/a>, create a file called &lt;code>RESOURCE_NAME.yaml&lt;/code>. Replace &lt;code>RESOURCE_NAME&lt;/code> with the name of the API resource you are adding support for. For example, a configuration file for &lt;a href="https://cloud.google.com/apigee/docs/reference/apis/apigee/rest/v1/organizations.instances.natAddresses">NatAddress&lt;/a> would be called &lt;code>NatAddress.yaml&lt;/code>.&lt;/p></description></item><item><title>Contribution process</title><link>https://googlecloudplatform.github.io/magic-modules/contribution-process/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://googlecloudplatform.github.io/magic-modules/contribution-process/</guid><description>&lt;h1 id="contribution-process">
 Contribution process
 &lt;a class="anchor" href="#contribution-process">#&lt;/a>
&lt;/h1>
&lt;p>This page explains how you can contribute code and documentation to the	&lt;code>magic-modules&lt;/code> repository.&lt;/p>
&lt;h2 id="before-you-begin">
 Before you begin
 &lt;a class="anchor" href="#before-you-begin">#&lt;/a>
&lt;/h2>
&lt;ol>
&lt;li>Familiarize yourself with &lt;a href="https://docs.github.com/en/get-started/quickstart/github-flow">GitHub flow&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://docs.github.com/en/get-started/quickstart/fork-a-repo">Fork&lt;/a> the &lt;code>Magic Modules&lt;/code> repository into your GitHub account&lt;/li>
&lt;li>&lt;a href="https://googlecloudplatform.github.io/magic-modules/develop/set-up-dev-environment/">Set up your development environment&lt;/a>&lt;/li>
&lt;li>Check whether the feature you want to work on has already been &lt;a href="https://github.com/hashicorp/terraform-provider-google/issues">requested in the issue tracker&lt;/a>.
&lt;ul>
&lt;li>If there&amp;rsquo;s an issue and it already has a dedicated assignee, this indicates that someone might have already started to work on a solution. Otherwise, you&amp;rsquo;re welcome to work on the issue.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h2 id="contribute-code">
 Contribute code
 &lt;a class="anchor" href="#contribute-code">#&lt;/a>
&lt;/h2>
&lt;ol>
&lt;li>&lt;a href="https://googlecloudplatform.github.io/magic-modules/develop/set-up-dev-environment/">Set up your development environment&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://docs.github.com/en/get-started/quickstart/github-flow#create-a-branch">Create a new branch for your change&lt;/a>&lt;/li>
&lt;li>Make the code change. For example:
&lt;ul>
&lt;li>&lt;a href="https://googlecloudplatform.github.io/magic-modules/develop/add-resource/">Add a resource&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://googlecloudplatform.github.io/magic-modules/test/test/">Add resource tests&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://googlecloudplatform.github.io/magic-modules/develop/add-handwritten-datasource/">Add a datasource&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://googlecloudplatform.github.io/magic-modules/develop/promote-to-ga/">Promote to GA&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://googlecloudplatform.github.io/magic-modules/breaking-changes/make-a-breaking-change/">Make a breaking change&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="https://googlecloudplatform.github.io/magic-modules/develop/generate-providers/">Generate the providers&lt;/a> that include your change.&lt;/li>
&lt;li>&lt;a href="https://googlecloudplatform.github.io/magic-modules/test/run-tests/">Run provider tests locally&lt;/a> that are relevant to the change you made&lt;/li>
&lt;li>&lt;a href="https://googlecloudplatform.github.io/magic-modules/code-review/create-pr/">Create a pull request (PR)&lt;/a>&lt;/li>
&lt;li>Make changes in response to &lt;a href="https://googlecloudplatform.github.io/magic-modules/code-review/create-pr/#code-review">code review&lt;/a>&lt;/li>
&lt;/ol>
&lt;h2 id="after-your-change-is-merged">
 After your change is merged
 &lt;a class="anchor" href="#after-your-change-is-merged">#&lt;/a>
&lt;/h2>
&lt;p>After your change is merged, it can take a week or longer to be released to customers.&lt;/p></description></item><item><title>Deletion behaviors</title><link>https://googlecloudplatform.github.io/magic-modules/best-practices/deletion-behaviors/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://googlecloudplatform.github.io/magic-modules/best-practices/deletion-behaviors/</guid><description>&lt;h1 id="deletion-behaviors">
 Deletion behaviors
 &lt;a class="anchor" href="#deletion-behaviors">#&lt;/a>
&lt;/h1>
&lt;blockquote class="book-hint info">
 &lt;strong>Note:&lt;/strong> This page covers best practices guidance for the Terraform provider for Google Cloud, which is used to ensure a consistent UX for Terraform users across providers or GCP users across the Google provider. Generally, this guidance should be followed and exceptions should be clearly demarcated / discussed.
&lt;/blockquote>

&lt;h2 id="deletion_protection">
 Mitigating data loss risk via deletion_protection
 &lt;a class="anchor" href="#deletion_protection">#&lt;/a>
&lt;/h2>
&lt;p>Some resources, such as databases, have a significant risk of unrecoverable data loss if the resource is accidentally deleted due to a change to a ForceNew field. For these resources, the best practice is to add a &lt;code>deletion_protection&lt;/code> field that prevents the resource from being deleted if enabled.&lt;/p></description></item><item><title>Handwritten docs style guide</title><link>https://googlecloudplatform.github.io/magic-modules/document/handwritten-docs-style-guide/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://googlecloudplatform.github.io/magic-modules/document/handwritten-docs-style-guide/</guid><description>&lt;h1 id="handwritten-documentation-style-guide">
 Handwritten documentation style guide
 &lt;a class="anchor" href="#handwritten-documentation-style-guide">#&lt;/a>
&lt;/h1>
&lt;p>This document describes the style guide for handwritten documentation for resources and data sources. MMv1-based resources will automatically generate documentation that matches this style guide.&lt;/p>
&lt;h2 id="file-name-and-location">
 File name and location
 &lt;a class="anchor" href="#file-name-and-location">#&lt;/a>
&lt;/h2>
&lt;p>Handwritten documentation lives in:&lt;/p>
&lt;ul>
&lt;li>Data sources: &lt;a href="https://github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/third_party/terraform/website/docs/d">&lt;code>magic-modules/third_party/terraform/website/docs/d/&lt;/code>&lt;/a>&lt;/li>
&lt;li>Resources: &lt;a href="https://github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/third_party/terraform/website/docs/r">&lt;code>magic-modules/third_party/terraform/website/docs/r/&lt;/code>&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>The name of the file is the name of the resource without a &lt;code>google_&lt;/code> prefix. For example, for &lt;code>google_compute_instance&lt;/code>, the file is called &lt;code>compute_instance.html.markdown&lt;/code>&lt;/p>
&lt;h2 id="yaml-frontmatter">
 YAML frontmatter
 &lt;a class="anchor" href="#yaml-frontmatter">#&lt;/a>
&lt;/h2>
&lt;p>Every resource or datasource documentation page must include YAML frontmatter which sets &lt;code>subcategory&lt;/code> (where the page will be displayed in the left sidebar).&lt;/p></description></item><item><title>Make a breaking change</title><link>https://googlecloudplatform.github.io/magic-modules/breaking-changes/make-a-breaking-change/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://googlecloudplatform.github.io/magic-modules/breaking-changes/make-a-breaking-change/</guid><description>Guidance on making a breaking changes</description></item><item><title>MMv1 field reference</title><link>https://googlecloudplatform.github.io/magic-modules/reference/field/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://googlecloudplatform.github.io/magic-modules/reference/field/</guid><description>&lt;h1 id="mmv1-field-reference">
 MMv1 field reference
 &lt;a class="anchor" href="#mmv1-field-reference">#&lt;/a>
&lt;/h1>
&lt;p>This page documents commonly-used properties for fields. For a full list of
available properties, see &lt;a href="https://github.com/GoogleCloudPlatform/magic-modules/blob/main/mmv1/api/type.go">type.go ↗&lt;/a>.&lt;/p>
&lt;h2 id="shared-properties">
 Shared properties
 &lt;a class="anchor" href="#shared-properties">#&lt;/a>
&lt;/h2>
&lt;h3 id="name">
 &lt;code>name&lt;/code>
 &lt;a class="anchor" href="#name">#&lt;/a>
&lt;/h3>
&lt;p>Specifies the name of the field within Terraform. By default this will also
be the key for the field in the API request message, if a separate &lt;code>api_name&lt;/code>
is not declared using the corresponding property.&lt;/p>
&lt;h3 id="type">
 &lt;code>type&lt;/code>
 &lt;a class="anchor" href="#type">#&lt;/a>
&lt;/h3>
&lt;p>Sets the expected data type of the field. All valid types are declared &lt;a href="https://github.com/GoogleCloudPlatform/magic-modules/blob/d7777055cb7618648725abd16d3b05e5c138fc56/mmv1/api/type.go#L673">here&lt;/a>.&lt;/p></description></item><item><title>Run tests</title><link>https://googlecloudplatform.github.io/magic-modules/test/run-tests/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://googlecloudplatform.github.io/magic-modules/test/run-tests/</guid><description>&lt;h1 id="run-tests">
 Run tests
 &lt;a class="anchor" href="#run-tests">#&lt;/a>
&lt;/h1>
&lt;h2 id="before-you-begin">
 Before you begin
 &lt;a class="anchor" href="#before-you-begin">#&lt;/a>
&lt;/h2>
&lt;p>&lt;a href="https://googlecloudplatform.github.io/magic-modules/develop/generate-providers/">Generate the modified provider(s)&lt;/a>&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Set up application default credentials for Terraform&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>gcloud auth application-default login
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export GOOGLE_USE_DEFAULT_CREDENTIALS&lt;span style="color:#f92672">=&lt;/span>true
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Set the following environment variables:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>export GOOGLE_PROJECT&lt;span style="color:#f92672">=&lt;/span>PROJECT_ID
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export GOOGLE_REGION&lt;span style="color:#f92672">=&lt;/span>us-central1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export GOOGLE_ZONE&lt;span style="color:#f92672">=&lt;/span>us-central1-a
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Replace &lt;code>PROJECT_ID&lt;/code> with the ID of the Google Cloud project you are using for testing.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Optional: Some tests may require additional variables to be set, such as:&lt;/p>
&lt;pre tabindex="0">&lt;code>GOOGLE_ORG
GOOGLE_BILLING_ACCOUNT
&lt;/code>&lt;/pre>&lt;/li>
&lt;/ol>
&lt;h2 id="run-automated-tests">
 Run automated tests
 &lt;a class="anchor" href="#run-automated-tests">#&lt;/a>
&lt;/h2>




&lt;div class="book-tabs">&lt;input type="radio" class="toggle" name="tabs-version" id="tabs-version-0" checked="checked" />
 &lt;label for="tabs-version-0">GA Provider&lt;/label>
 &lt;div class="book-tabs-content markdown-inner">&lt;ol>
&lt;li>
&lt;p>Run unit tests and linters&lt;/p></description></item><item><title>Write release notes</title><link>https://googlecloudplatform.github.io/magic-modules/code-review/release-notes/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://googlecloudplatform.github.io/magic-modules/code-review/release-notes/</guid><description>&lt;h1 id="write-release-notes">
 Write release notes
 &lt;a class="anchor" href="#write-release-notes">#&lt;/a>
&lt;/h1>
&lt;p>This guide explains best practices for composing accurate, end-user focused release notes for Magic Modules pull requests.&lt;/p>
&lt;p>Every pull request must have at least one release note block in the opening comment. Release note blocks have the following format:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-markdown" data-lang="markdown">&lt;span style="display:flex;">&lt;span>```release-note:TYPE
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>CONTENT
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>```
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Replace &lt;code>TYPE&lt;/code> with the correct release note type, and &lt;code>CONTENT&lt;/code> with a release note written according to the guidelines in the following sections.&lt;/p></description></item><item><title>Add a field to an existing resource</title><link>https://googlecloudplatform.github.io/magic-modules/develop/add-fields/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://googlecloudplatform.github.io/magic-modules/develop/add-fields/</guid><description>&lt;h1 id="add-a-field-to-an-existing-resource">
 Add a field to an existing resource
 &lt;a class="anchor" href="#add-a-field-to-an-existing-resource">#&lt;/a>
&lt;/h1>
&lt;p>This page describes how to add a field to an existing resource in the &lt;code>google&lt;/code> or &lt;code>google-beta&lt;/code> Terraform
provider using MMv1 and/or handwritten code. In general, Terraform resources should implement all configurable
fields and all read-only fields. Even fields that seem like they would not be useful in Terraform
(like update time or etag) often end up being requested by users, so it&amp;rsquo;s usually easier to just add them all at
once. However, optional or read-only fields can be omitted when adding a resource if they would require significant
additional work to implement.&lt;/p></description></item><item><title>Labels and annotations</title><link>https://googlecloudplatform.github.io/magic-modules/best-practices/labels-and-annotations/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://googlecloudplatform.github.io/magic-modules/best-practices/labels-and-annotations/</guid><description>&lt;h1 id="add-labels-and-annotations-support">
 Add labels and annotations support
 &lt;a class="anchor" href="#add-labels-and-annotations-support">#&lt;/a>
&lt;/h1>
&lt;blockquote class="book-hint info">
 &lt;strong>Note:&lt;/strong> This page covers best practices guidance for the Terraform provider for Google Cloud, which is used to ensure a consistent UX for Terraform users across providers or GCP users across the Google provider. Generally, this guidance should be followed and exceptions should be clearly demarcated / discussed.
&lt;/blockquote>

&lt;p>The new labels model and the new annotations model are introduced in &lt;a href="https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/version_5_upgrade#provider">Terraform provider for Google Cloud 5.0.0&lt;/a>.&lt;/p></description></item><item><title>make commands</title><link>https://googlecloudplatform.github.io/magic-modules/reference/make-commands/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://googlecloudplatform.github.io/magic-modules/reference/make-commands/</guid><description>&lt;h1 id="make-commands-reference">
 &lt;code>make&lt;/code> commands reference
 &lt;a class="anchor" href="#make-commands-reference">#&lt;/a>
&lt;/h1>
&lt;h2 id="magic-modules">
 &lt;code>magic-modules&lt;/code>
 &lt;a class="anchor" href="#magic-modules">#&lt;/a>
&lt;/h2>
&lt;h3 id="make--make-provider">
 &lt;code>make&lt;/code> / &lt;code>make provider&lt;/code>
 &lt;a class="anchor" href="#make--make-provider">#&lt;/a>
&lt;/h3>
&lt;p>Generates the code for the downstream &lt;code>google&lt;/code> and &lt;code>google-beta&lt;/code> providers.&lt;/p>
&lt;blockquote class="book-hint info">
 &lt;strong>Note:&lt;/strong> Generation works best if the downstream provider has a commit checked out corresponding to the latest &lt;code>main&lt;/code> branch commit that is present in your &lt;code>magic-modules&lt;/code> working branch. This can generally be identified based on matching commit messages.
&lt;/blockquote>

&lt;p>Examples:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>make provider VERSION&lt;span style="color:#f92672">=&lt;/span>ga OUTPUT_PATH&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>$GOPATH&lt;span style="color:#e6db74">/src/github.com/hashicorp/terraform-provider-google&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>make provider VERSION&lt;span style="color:#f92672">=&lt;/span>beta OUTPUT_PATH&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>$GOPATH&lt;span style="color:#e6db74">/src/github.com/hashicorp/terraform-provider-google-beta&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Only generate a specific product (plus all common files)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>make provider VERSION&lt;span style="color:#f92672">=&lt;/span>ga OUTPUT_PATH&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>$GOPATH&lt;span style="color:#e6db74">/src/github.com/hashicorp/terraform-provider-google&amp;#34;&lt;/span> PRODUCT&lt;span style="color:#f92672">=&lt;/span>pubsub
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Only generate only a specific resources for a product&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>make provider VERSION&lt;span style="color:#f92672">=&lt;/span>ga OUTPUT_PATH&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>$GOPATH&lt;span style="color:#e6db74">/src/github.com/hashicorp/terraform-provider-google&amp;#34;&lt;/span> PRODUCT&lt;span style="color:#f92672">=&lt;/span>pubsub RESOURCE&lt;span style="color:#f92672">=&lt;/span>Topic
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Only generate common files, including all third_party code&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>make provider VERSION&lt;span style="color:#f92672">=&lt;/span>ga OUTPUT_PATH&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>$GOPATH&lt;span style="color:#e6db74">/src/github.com/hashicorp/terraform-provider-google&amp;#34;&lt;/span> PRODUCT&lt;span style="color:#f92672">=&lt;/span>doesnotexist
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="arguments">
 Arguments
 &lt;a class="anchor" href="#arguments">#&lt;/a>
&lt;/h4>
&lt;ul>
&lt;li>&lt;code>OUTPUT_PATH&lt;/code>: Required. The location you are generating provider code into.&lt;/li>
&lt;li>&lt;code>VERSION&lt;/code>: Required. The version of the provider you are building into. Valid values are &lt;code>ga&lt;/code> and &lt;code>beta&lt;/code>.&lt;/li>
&lt;li>&lt;code>PRODUCT&lt;/code>: Limits generations to the specified folder within &lt;code>mmv1/products&lt;/code> or &lt;code>tpgtools/api&lt;/code>. Handwritten files from &lt;code>mmv1/third_party/terraform&lt;/code> are always generated into the downstream regardless of this setting, so you can provide a non-existent product name to generate only handwritten code. Required if &lt;code>RESOURCE&lt;/code> is specified.&lt;/li>
&lt;li>&lt;code>RESOURCE&lt;/code>: Limits generation to the specified resource within a particular product. For &lt;code>mmv1&lt;/code> resources, matches the resource&amp;rsquo;s &lt;code>name&lt;/code> field (set in its configuration file).For &lt;code>tpgtools&lt;/code> resources, matches the terraform resource name.&lt;/li>
&lt;li>&lt;code>ENGINE&lt;/code>: Modifies &lt;code>make provider&lt;/code> to only generate code using the specified engine. Valid values are &lt;code>mmv1&lt;/code> or &lt;code>tpgtools&lt;/code>. (Providing &lt;code>tpgtools&lt;/code> will still generate any prerequisite mmv1 files required for tpgtools.)&lt;/li>
&lt;/ul>
&lt;h4 id="cleaning-up-old-files">
 Cleaning up old files
 &lt;a class="anchor" href="#cleaning-up-old-files">#&lt;/a>
&lt;/h4>
&lt;p>Magic Modules will only generate on top of whatever is in the downstream repository. This means that, from time
to time, you may end up with stale files or changes in your downstream that cause compilation or tests to fail.&lt;/p></description></item><item><title>Review a pull request</title><link>https://googlecloudplatform.github.io/magic-modules/code-review/review-pr/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://googlecloudplatform.github.io/magic-modules/code-review/review-pr/</guid><description>&lt;h1 id="review-a-pull-request">
 Review a pull request
 &lt;a class="anchor" href="#review-a-pull-request">#&lt;/a>
&lt;/h1>
&lt;p>This page provides guidelines for reviewing a Magic Modules pull request (PR).&lt;/p>
&lt;h2 id="special-cases">
 Special cases
 &lt;a class="anchor" href="#special-cases">#&lt;/a>
&lt;/h2>
&lt;p>The following types of PRs may require additional scrutiny and/or multiple reviewers.&lt;/p>
&lt;ul>
&lt;li>DCL to MMv1 migrations&lt;/li>
&lt;li>Adding multi-actor fields (fields whose values can be altered as a side effect of changes made to a different resource)&lt;/li>
&lt;/ul>
&lt;h2 id="review">
 Review
 &lt;a class="anchor" href="#review">#&lt;/a>
&lt;/h2>
&lt;ol>
&lt;li>Read the PR description to understand the context and ensure the PR either
&lt;ul>
&lt;li>is linked to a GitHub issue or an internal bug
&lt;ul>
&lt;li>if not, check the &lt;a href="https://github.com/hashicorp/terraform-provider-google/issues">issue tracker&lt;/a> to see whether the feature has already been requested and add the issues in the description, if any.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>establishes clear context itself via title or description.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>If the PR adds any new resource, ensure that the resource does not already exist in the &lt;a href="https://github.com/hashicorp/terraform-provider-google">GA provider&lt;/a> or &lt;a href="https://github.com/hashicorp/terraform-provider-google-beta">beta provider&lt;/a>&lt;/li>
&lt;li>Read through all the changes in the PR, generated code in the downstreams and the API documentation to ensure that:
&lt;ol>
&lt;li>the resource schema added in the PR matches the API structure.&lt;/li>
&lt;li>the features are added in the correct version
&lt;ul>
&lt;li>features only available in beta are not included in the GA google provider.&lt;/li>
&lt;li>features added to the GA provider are also included in the beta provider &amp;ndash; beta should be a strict superset of GA.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>no &lt;a href="https://googlecloudplatform.github.io/magic-modules/breaking-changes/make-a-breaking-change/">breaking changes&lt;/a> are introduced without a valid justification. Add the &lt;code>override-breaking-change&lt;/code> label if there is a valid justification.
&lt;ul>
&lt;li>remember to check for changes in default behaviour like changing the flags on delete!&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>verify the change &lt;strong>fully&lt;/strong> resolves the linked issues, if any. If it does not, change the &amp;ldquo;Fixes&amp;rdquo; message to &amp;ldquo;Part of&amp;rdquo;.&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>Check the tests added/modified to ensure that:
&lt;ol>
&lt;li>all fields added/updated in the PR appear in at least one test.
&lt;ul>
&lt;li>It is advisable to test updating from a non-zero value to a zero value if feasible.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>all mutable fields are tested in at least one update test.&lt;/li>
&lt;li>all resources in the acceptance tests have a &lt;code>tf-test&lt;/code> or &lt;code>tf_test&lt;/code> prefix in their primary id field.&lt;/li>
&lt;li>all handwritten test Config steps include import steps following them&lt;/li>
&lt;li>all related tests pass in GA for features promoted from beta to GA.
&lt;blockquote class="book-hint info">
 Note:
Presubmit VCR tests do not run in GA. Manual testing is required for promoted GA features.
&lt;/blockquote>
&lt;/li>
&lt;li>newly added or modified diff suppress functions are tested in at least one unit test.&lt;/li>
&lt;li>the linked issue (if any) is covered by at least one test that reproduces the issue
&lt;ul>
&lt;li>for example - a bugfix should test the bug (or explain why it&amp;rsquo;s not feasible to do so in the description, including manual results when possible) and an enhancement should test the new behaviour(s).&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>all related PR presubmit tests have been completed successfully, including:
&lt;ul>
&lt;li>terraform-provider-breaking-change-test&lt;/li>
&lt;li>terraform-provider-google-build-and-unit-tests&lt;/li>
&lt;li>terraform-provider-google-beta-build-and-unit-tests&lt;/li>
&lt;li>VCR-test
&lt;blockquote class="book-hint info">
 Note:
Some acceptance tests may be skipped in VCR and manual testing is required.
&lt;/blockquote>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>a significant number of preexisting tests have not been modified. Changing old tests often indicates a change is backwards incompatible.&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>Check documentation to ensure
&lt;ol>
&lt;li>resource-level and field-level documentation are generated correctly for MMv1-based resource&lt;/li>
&lt;li>documentation is added manually for handwritten resources.&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>Check if release notes capture all changes in the PR, and are correctly formatted following the guidance in &lt;a href="https://googlecloudplatform.github.io/magic-modules/code-review/release-notes/">write release notes&lt;/a> before merging the PR.&lt;/li>
&lt;/ol></description></item><item><title>MMv1 metadata reference</title><link>https://googlecloudplatform.github.io/magic-modules/reference/metadata/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://googlecloudplatform.github.io/magic-modules/reference/metadata/</guid><description>&lt;h1 id="mmv1-metadata-reference">
 MMv1 metadata reference
 &lt;a class="anchor" href="#mmv1-metadata-reference">#&lt;/a>
&lt;/h1>
&lt;p>This page documents all properties for metadata. Metadata does not impact the provider itself, but is used by Google internally for coverage metrics.&lt;/p>
&lt;h2 id="required">
 Required
 &lt;a class="anchor" href="#required">#&lt;/a>
&lt;/h2>
&lt;h3 id="resource">
 &lt;code>resource&lt;/code>
 &lt;a class="anchor" href="#resource">#&lt;/a>
&lt;/h3>
&lt;p>The name of the Terraform resource e.g., &amp;ldquo;google_cloudfunctions2_function&amp;rdquo;.&lt;/p>
&lt;h3 id="generation_type">
 &lt;code>generation_type&lt;/code>
 &lt;a class="anchor" href="#generation_type">#&lt;/a>
&lt;/h3>
&lt;p>The generation method used to create the Terraform resource e.g., &amp;ldquo;mmv1&amp;rdquo;, &amp;ldquo;dcl&amp;rdquo;, &amp;ldquo;handwritten&amp;rdquo;.&lt;/p>
&lt;h2 id="optional">
 Optional
 &lt;a class="anchor" href="#optional">#&lt;/a>
&lt;/h2>
&lt;h3 id="api_service_name">
 &lt;code>api_service_name&lt;/code>
 &lt;a class="anchor" href="#api_service_name">#&lt;/a>
&lt;/h3>
&lt;p>The base name of the API used for this resource e.g., &amp;ldquo;cloudfunctions.googleapis.com&amp;rdquo;.&lt;/p></description></item><item><title>Add IAM support</title><link>https://googlecloudplatform.github.io/magic-modules/develop/add-iam-support/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://googlecloudplatform.github.io/magic-modules/develop/add-iam-support/</guid><description>&lt;h1 id="add-iam-support">
 Add IAM support
 &lt;a class="anchor" href="#add-iam-support">#&lt;/a>
&lt;/h1>
&lt;p>This page covers how to add IAM resources in Terraform if they are supported by a particular API resource (indicated by
&lt;code>setIamPolicy&lt;/code> and &lt;code>getIamPolicy&lt;/code> methods in the API documentation for the resource).&lt;/p>
&lt;p>For more information about types of resources and the generation process overall, see &lt;a href="https://googlecloudplatform.github.io/magic-modules/">How Magic Modules works&lt;/a>.&lt;/p>
&lt;h2 id="before-you-begin">
 Before you begin
 &lt;a class="anchor" href="#before-you-begin">#&lt;/a>
&lt;/h2>
&lt;ol>
&lt;li>Complete the steps in &lt;a href="https://googlecloudplatform.github.io/magic-modules/develop/set-up-dev-environment/">Set up your development environment&lt;/a> to set up your environment and your Google Cloud project.&lt;/li>
&lt;li>Ensure that your &lt;code>magic-modules&lt;/code>, &lt;code>terraform-provider-google&lt;/code>, and &lt;code>terraform-provider-google-beta&lt;/code> repositories are up to date.
&lt;pre tabindex="0">&lt;code>cd ~/magic-modules
git checkout main &amp;amp;&amp;amp; git clean -f . &amp;amp;&amp;amp; git checkout -- . &amp;amp;&amp;amp; git pull
cd $GOPATH/src/github.com/hashicorp/terraform-provider-google
git checkout main &amp;amp;&amp;amp; git clean -f . &amp;amp;&amp;amp; git checkout -- . &amp;amp;&amp;amp; git pull
cd $GOPATH/src/github.com/hashicorp/terraform-provider-google-beta
git checkout main &amp;amp;&amp;amp; git clean -f . &amp;amp;&amp;amp; git checkout -- . &amp;amp;&amp;amp; git pull
&lt;/code>&lt;/pre>&lt;/li>
&lt;/ol>
&lt;h2 id="add-iam-support-1">
 Add IAM support
 &lt;a class="anchor" href="#add-iam-support-1">#&lt;/a>
&lt;/h2>




&lt;div class="book-tabs">&lt;input type="radio" class="toggle" name="tabs-IAM" id="tabs-IAM-0" checked="checked" />
 &lt;label for="tabs-IAM-0">MMv1&lt;/label>
 &lt;div class="book-tabs-content markdown-inner">&lt;p>IAM support for MMv1-generated resources is configured within the &lt;code>ResourceName.yaml&lt;/code> file, and will create the &lt;code>google_product_resource_iam_policy&lt;/code>, &lt;code>google_product_resource_iam_binding&lt;/code>, &lt;code>google_product_resource_iam_member&lt;/code> resource, website, and test files for that resource target when an &lt;code>iam_policy&lt;/code> block is present.&lt;/p></description></item><item><title>Common resource patterns</title><link>https://googlecloudplatform.github.io/magic-modules/best-practices/common-resource-patterns/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://googlecloudplatform.github.io/magic-modules/best-practices/common-resource-patterns/</guid><description>&lt;h1 id="common-resource-patterns">
 Common resource patterns
 &lt;a class="anchor" href="#common-resource-patterns">#&lt;/a>
&lt;/h1>
&lt;h2 id="singletons">
 Singletons
 &lt;a class="anchor" href="#singletons">#&lt;/a>
&lt;/h2>
&lt;p>Singletons are resources – often config or settings objects – that can only exist once. In some cases, it may be possible to create and delete the resource (but only one can exist at a time); in other cases the resource &lt;em>always&lt;/em> exists and can only be read and updated.&lt;/p>
&lt;p>Implementing resources like this may require some or all of the following:&lt;/p></description></item><item><title>Ruby to Go Migration</title><link>https://googlecloudplatform.github.io/magic-modules/reference/ruby-go-changes/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://googlecloudplatform.github.io/magic-modules/reference/ruby-go-changes/</guid><description>&lt;h1 id="what-has-changed-in-the-mmv1-go-migration">
 What has changed in the MMv1 Go migration
 &lt;a class="anchor" href="#what-has-changed-in-the-mmv1-go-migration">#&lt;/a>
&lt;/h1>
&lt;p>The Magic Modules code generator has been rewritten from Ruby to Go. For experienced contributors, this reference document lists what the expected changes are to the previous development workflow in Ruby.&lt;/p>
&lt;h2 id="yaml-changes">
 YAML changes
 &lt;a class="anchor" href="#yaml-changes">#&lt;/a>
&lt;/h2>
&lt;p>&lt;code>.yaml&lt;/code> files within &lt;code>mmv1/products&lt;/code> have had adjustments to the attribute typing. The initial Ruby lines &lt;code>!ruby/object:Api::Type::&amp;lt;TYPE&amp;gt;&lt;/code> have been removed and replaced with a simpler &lt;code>type: &amp;lt;TYPE&amp;gt;&lt;/code> line.&lt;/p></description></item><item><title>Add a datasource</title><link>https://googlecloudplatform.github.io/magic-modules/develop/add-handwritten-datasource/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://googlecloudplatform.github.io/magic-modules/develop/add-handwritten-datasource/</guid><description>Datasources are like terraform resources except they don&amp;rsquo;t &lt;em>create&lt;/em> anything.</description></item><item><title>Add custom resource code</title><link>https://googlecloudplatform.github.io/magic-modules/develop/custom-code/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://googlecloudplatform.github.io/magic-modules/develop/custom-code/</guid><description>&lt;h1 id="add-custom-resource-code">
 Add custom resource code
 &lt;a class="anchor" href="#add-custom-resource-code">#&lt;/a>
&lt;/h1>
&lt;p>This document covers how to add &amp;ldquo;custom code&amp;rdquo; to &lt;a href="https://googlecloudplatform.github.io/magic-modules/#mmv1">MMv1 resources&lt;/a>. Custom code can be used to add arbitrary logic to a resource while still generating most of the code; it allows for a balance between maintainability and supporting real-worlds APIs that deviate from what MMv1 can support. Custom code should only be added if the desired behavior can&amp;rsquo;t be achieved otherwise.&lt;/p>
&lt;p>Most custom code attributes are strings that contain a path to a template file relative to the &lt;code>mmv1&lt;/code> directory. For example:&lt;/p></description></item><item><title>Promote to GA</title><link>https://googlecloudplatform.github.io/magic-modules/develop/promote-to-ga/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://googlecloudplatform.github.io/magic-modules/develop/promote-to-ga/</guid><description>&lt;h1 id="promote-from-beta-to-ga">
 Promote from beta to GA
 &lt;a class="anchor" href="#promote-from-beta-to-ga">#&lt;/a>
&lt;/h1>
&lt;p>This document describes how to promote an existing resource or field that uses MMv1 and/or handwritten code from the &lt;code>google-beta&lt;/code> provider to the &lt;code>google&lt;/code> (also known as &amp;ldquo;GA&amp;rdquo;) provider.&lt;/p>
&lt;p>Handwritten code (including &lt;code>custom_code&lt;/code>) commonly uses &amp;ldquo;version guards&amp;rdquo; in the form of &lt;code>{{- if ne $.TargetVersionName &amp;quot;ga&amp;quot; }}...{{- end }}&lt;/code> to wrap code that is beta-specific, which need to be removed during promotion.&lt;/p>
&lt;p>For more information about types of resources and the generation process overall, see &lt;a href="https://googlecloudplatform.github.io/magic-modules/">How Magic Modules works&lt;/a>.&lt;/p></description></item><item><title>Update dependencies</title><link>https://googlecloudplatform.github.io/magic-modules/develop/update-dependencies/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://googlecloudplatform.github.io/magic-modules/develop/update-dependencies/</guid><description>&lt;h1 id="update-provider-dependencies">
 Update provider dependencies
 &lt;a class="anchor" href="#update-provider-dependencies">#&lt;/a>
&lt;/h1>
&lt;p>The Magic Modules repository does not contain a complete Go module, preventing the use of automated tooling like &lt;code>go get&lt;/code> from that repository. To add or update provider dependencies, use standard Go tooling to update the dependency in the &lt;code>terraform-provider-google&lt;/code> provider and copy the results to the upstream files in Magic Modules.&lt;/p>
&lt;p>Below are the steps you can follow to make the change:&lt;/p>
&lt;ol>
&lt;li>Navigate to the local &lt;code>google&lt;/code> provider directory:&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>cd $GOPATH/src/github.com/hashicorp/terraform-provider-google
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="2">
&lt;li>Open the &lt;a href="https://github.com/hashicorp/terraform-provider-google/blob/main/go.mod">&lt;code>go.mod&lt;/code>&lt;/a> file and add the new entries or modify the versions of existing entries as needed&lt;/li>
&lt;li>Update dependencies using either of the following methods
&lt;ul>
&lt;li>run the following commands to update all dependencies:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>go get
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>go mod tidy
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Alternatively, update a specific package to a desired version:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>go get google.golang.org/api@v0.105.0 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>go mod tidy
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Copy the contents of the updated &lt;code>go.mod&lt;/code> and &lt;code>go.sum&lt;/code> file into &lt;a href="https://github.com/GoogleCloudPlatform/magic-modules/blob/main/mmv1/third_party/terraform/go.mod.erb">&lt;code>mmv1/third_party/terraform/go.mod&lt;/code>&lt;/a> and &lt;a href="https://github.com/GoogleCloudPlatform/magic-modules/blob/main/mmv1/third_party/terraform/go.sum">&lt;code>mmv1/third_party/terraform/go.sum&lt;/code>&lt;/a> in the &lt;code>magic-modules&lt;/code> respectively.&lt;/li>
&lt;li>Create a pull request containing &lt;em>only&lt;/em> the dependency changes.&lt;/li>
&lt;li>Resolve any errors caused by the dependency upgrade.&lt;/li>
&lt;li>After the dependency pull request is merged, continue with a separate pull request for any additional changes that were blocked by the upgrade.&lt;/li>
&lt;/ol></description></item><item><title>Fix diffs</title><link>https://googlecloudplatform.github.io/magic-modules/develop/diffs/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://googlecloudplatform.github.io/magic-modules/develop/diffs/</guid><description>&lt;h1 id="fix-diffs">
 Fix diffs
 &lt;a class="anchor" href="#fix-diffs">#&lt;/a>
&lt;/h1>
&lt;p>This page outlines best practices for fixing various kinds of diffs that can show up at plan time. These will often show up as test failures with the text: &lt;code>After applying this test step, the plan was not empty.&lt;/code>. They can also show up for users at plan time, on fields that a user has not modified in their configuration. If the diff does not go away even after running &lt;code>terraform apply&lt;/code> more than once with the same configuration, the diff is called a &amp;ldquo;permadiff&amp;rdquo;.&lt;/p></description></item><item><title>Generate the providers</title><link>https://googlecloudplatform.github.io/magic-modules/develop/generate-providers/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://googlecloudplatform.github.io/magic-modules/develop/generate-providers/</guid><description>&lt;h1 id="generate-google-and-google-beta-providers">
 Generate &lt;code>google&lt;/code> and &lt;code>google-beta&lt;/code> providers
 &lt;a class="anchor" href="#generate-google-and-google-beta-providers">#&lt;/a>
&lt;/h1>
&lt;p>After making a change to the Terraform providers for Google Cloud, you must
integrate your changes with the providers. This page explains how to generate
provider changes to the &lt;code>google&lt;/code> and &lt;code>google-beta&lt;/code> Terraform providers.&lt;/p>
&lt;h2 id="before-you-begin">
 Before you begin
 &lt;a class="anchor" href="#before-you-begin">#&lt;/a>
&lt;/h2>
&lt;ol>
&lt;li>&lt;a href="https://googlecloudplatform.github.io/magic-modules/develop/set-up-dev-environment/">Set up your development environment&lt;/a>.&lt;/li>
&lt;li>Update &lt;code>magic-modules&lt;/code> as needed. These updates could be any of the following changes:&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>&lt;a href="https://googlecloudplatform.github.io/magic-modules/develop/add-resource/">Adding a resource&lt;/a>.&lt;/li>
&lt;li>&lt;a href="https://googlecloudplatform.github.io/magic-modules/develop/add-handwritten-datasource/">Adding a datasource&lt;/a>.&lt;/li>
&lt;li>&lt;a href="https://googlecloudplatform.github.io/magic-modules/develop/custom-code/">Adding custom resource code&lt;/a>.&lt;/li>
&lt;li>&lt;a href="https://googlecloudplatform.github.io/magic-modules/develop/promote-to-ga/">Promoting a resource to GA&lt;/a>.&lt;/li>
&lt;/ul>
&lt;h2 id="generate-a-provider-change">
 Generate a provider change
 &lt;a class="anchor" href="#generate-a-provider-change">#&lt;/a>
&lt;/h2>
&lt;ol>
&lt;li>
&lt;p>Clone the &lt;code>google&lt;/code> and &lt;code>google-beta&lt;/code> provider repositories with the following commands:&lt;/p></description></item><item><title>Client-side fields</title><link>https://googlecloudplatform.github.io/magic-modules/develop/client-side-fields/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://googlecloudplatform.github.io/magic-modules/develop/client-side-fields/</guid><description>&lt;h1 id="client-side-fields">
 Client-side fields
 &lt;a class="anchor" href="#client-side-fields">#&lt;/a>
&lt;/h1>
&lt;p>Client-side fields are most often used as flags to modify the behavior of a Terraform resource. Because they don&amp;rsquo;t correspond to an API field, there are some additional considerations in terms of how to implement them.&lt;/p>
&lt;p>Common client-side fields include:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://googlecloudplatform.github.io/magic-modules/best-practices/#deletion_protection">&lt;code>deletion_protection&lt;/code>&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://googlecloudplatform.github.io/magic-modules/best-practices/#deletion_policy">&lt;code>deletion_policy&lt;/code>&lt;/a>&lt;/li>
&lt;/ul>




&lt;div class="book-tabs">&lt;input type="radio" class="toggle" name="tabs-schema" id="tabs-schema-0" checked="checked" />
 &lt;label for="tabs-schema-0">MMv1&lt;/label>
 &lt;div class="book-tabs-content markdown-inner">&lt;h2 id="add-to-the-schema">
 Add to the schema
 &lt;a class="anchor" href="#add-to-the-schema">#&lt;/a>
&lt;/h2>
&lt;p>Instead of adding the field in &lt;code>parameters&lt;/code> or &lt;code>properties&lt;/code>, use a section called &lt;code>virtual_fields&lt;/code>.&lt;/p>
&lt;p>Example:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">virtual_fields&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;deletion_protection&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">type&lt;/span>: &lt;span style="color:#ae81ff">Boolean&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">default_value&lt;/span>: &lt;span style="color:#66d9ef">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">description&lt;/span>: |&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> Whether Terraform will be prevented from destroying the CertificateAuthority.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> When the field is set to true or unset in Terraform state, a `terraform apply`
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> or `terraform destroy` that would delete the CertificateAuthority will fail.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> When the field is set to false, deleting the CertificateAuthority is allowed.&lt;/span> 
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>This will automatically ensure that the field works as users expect.&lt;/p></description></item></channel></rss>